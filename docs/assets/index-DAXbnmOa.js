(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const _u=!1;var e0=Array.isArray,v_=Array.prototype.indexOf,Tf=Array.from,y_=Object.defineProperty,wo=Object.getOwnPropertyDescriptor,x_=Object.getOwnPropertyDescriptors,w_=Object.prototype,M_=Array.prototype,n0=Object.getPrototypeOf,zl=Object.isExtensible;function $_(t){for(var e=0;e<t.length;e++)t[e]()}function r0(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const se=2,i0=4,Af=8,Zn=16,Mr=32,ei=64,qs=128,cn=512,he=1024,De=2048,Jn=4096,Pe=8192,lr=16384,o0=32768,$i=65536,Ul=1<<17,a0=1<<18,Yi=1<<19,S_=1<<20,Ur=32768,vu=1<<21,Cf=1<<22,dr=1<<23,Ec=Symbol("$state"),T_=Symbol(""),bi=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function A_(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function C_(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function N_(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function k_(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function D_(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function E_(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const s0=1,c0=2,u0=4,L_=8,R_=16,I_=1,O_=2,ue=Symbol(),F_="http://www.w3.org/1999/xhtml";function P_(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function f0(t){return t===this.v}function j_(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function l0(t){return!j_(t,this.v)}let q_=!1,un=null;function Si(t){un=t}function Wi(t,e=!1,n){un={p:un,i:!1,c:null,e:null,s:t,x:null,l:null}}function Gi(t){var e=un,n=e.e;if(n!==null){e.e=null;for(var r of n)sv(r)}return e.i=!0,un=e.p,{}}function d0(){return!0}let Rr=[];function h0(){var t=Rr;Rr=[],$_(t)}function zs(t){if(Rr.length===0&&!Mo){var e=Rr;queueMicrotask(()=>{e===Rr&&h0()})}Rr.push(t)}function z_(){for(;Rr.length>0;)h0()}function p0(t){var e=jt;if(e===null)return Et.f|=dr,t;if((e.f&o0)===0){if((e.f&qs)===0)throw t;e.b.error(t)}else Ti(t,e)}function Ti(t,e){for(;e!==null;){if((e.f&qs)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const wa=new Set;let Ot=null,Ba=null,Ge=null,Ye=[],Us=null,yu=!1,Mo=!1;class vn{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#c=null;#o=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Ye=[],Ba=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#f(),this.is_deferred()?(this.#s(n.effects),this.#s(n.render_effects),this.#s(n.block_effects)):(Ba=this,Ot=null,Bl(n.render_effects),Bl(n.effects),Ba=null,this.#c?.resolve()),Ge=null}#a(e,n){e.f^=he;for(var r=e.first;r!==null;){var i=r.f,o=(i&(Mr|ei))!==0,a=o&&(i&he)!==0,s=a||(i&Pe)!==0||this.skipped_effects.has(r);if((r.f&qs)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!s&&r.fn!==null){o?r.f^=he:(i&i0)!==0?n.effects.push(r):Vo(r)&&((r.f&Zn)!==0&&n.block_effects.push(r),ko(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#s(n.effects),this.#s(n.render_effects),this.#s(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#s(e){for(const n of e)((n.f&De)!==0?this.#o:this.#i).push(n),this.#u(n.deps),be(n,he)}#u(e){if(e!==null)for(const n of e)(n.f&se)===0||(n.f&Ur)===0||(n.f^=Ur,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&dr)===0&&(this.current.set(e,e.v),Ge?.set(e,e.v))}activate(){Ot=this,this.apply()}deactivate(){Ot===this&&(Ot=null,Ge=null)}flush(){if(this.activate(),Ye.length>0){if(m0(),Ot!==null&&Ot!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#f(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#l()}#l(){if(wa.size>1){this.previous.clear();var e=Ge,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of wa){if(o===this){n=!1;continue}const a=[];for(const[c,u]of this.current){if(o.current.has(c))if(n&&u!==o.current.get(c))o.current.set(c,u);else continue;a.push(c)}if(a.length===0)continue;const s=[...o.current.keys()].filter(c=>!this.current.has(c));if(s.length>0){var i=Ye;Ye=[];const c=new Set,u=new Map;for(const f of a)b0(f,s,c,u);if(Ye.length>0){Ot=o,o.apply();for(const f of Ye)o.#a(f,r);o.deactivate()}Ye=i}}Ot=null,Ge=e}this.committed=!0,wa.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#o)be(e,De),Br(e);for(const e of this.#i)be(e,Jn),Br(e);this.#o=[],this.#i=[],this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#c??=r0()).promise}static ensure(){if(Ot===null){const e=Ot=new vn;wa.add(Ot),Mo||vn.enqueue(()=>{Ot===e&&e.flush()})}return Ot}static enqueue(e){zs(e)}apply(){}}function U_(t){var e=Mo;Mo=!0;try{for(var n;;){if(z_(),Ye.length===0&&(Ot?.flush(),Ye.length===0))return Us=null,n;m0()}}finally{Mo=e}}function m0(){var t=pr;yu=!0;var e=null;try{var n=0;for(Qa(!0);Ye.length>0;){var r=vn.ensure();if(n++>1e3){var i,o;B_()}r.process(Ye),hr.clear()}}finally{yu=!1,Qa(t),Us=null}}function B_(){try{C_()}catch(t){Ti(t,Us)}}let jn=null;function Bl(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(lr|Pe))===0&&Vo(r)&&(jn=new Set,ko(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?k0(r):r.fn=null),jn?.size>0)){hr.clear();for(const i of jn){if((i.f&(lr|Pe))!==0)continue;const o=[i];let a=i.parent;for(;a!==null;)jn.has(a)&&(jn.delete(a),o.push(a)),a=a.parent;for(let s=o.length-1;s>=0;s--){const c=o[s];(c.f&(lr|Pe))===0&&ko(c)}}jn.clear()}}jn=null}}function b0(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const o=i.f;(o&se)!==0?b0(i,e,n,r):(o&(Cf|Zn))!==0&&(o&De)===0&&g0(i,e,r)&&(be(i,De),Br(i))}}function g0(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&se)!==0&&g0(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function Br(t){for(var e=Us=t;e.parent!==null;){e=e.parent;var n=e.f;if(yu&&e===jt&&(n&Zn)!==0&&(n&a0)===0)return;if((n&(ei|Mr))!==0){if((n&he)===0)return;e.f^=he}}Ye.push(e)}function H_(t){let e=0,n=Hr(0),r;return()=>{Bs()&&(g(n),T0(()=>(e===0&&(r=z0(()=>t(()=>$o(n)))),e+=1,()=>{zs(()=>{e-=1,e===0&&(r?.(),r=void 0,$o(n))})})))}}var Y_=$i|Yi|qs;function W_(t,e,n){new G_(t,e,n)}class G_{parent;#t=!1;#e;#r=null;#n;#c;#o;#i=null;#a=null;#s=null;#u=null;#f=null;#l=0;#d=0;#p=!1;#h=null;#v=H_(()=>(this.#h=Hr(this.#l),()=>{this.#h=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#c=r,this.parent=jt.b,this.#t=!!this.#n.pending,this.#o=Ef(()=>{jt.b=this;{var i=this.#g();try{this.#i=We(()=>r(i))}catch(o){this.error(o)}this.#d>0?this.#b():this.#t=!1}return()=>{this.#f?.remove()}},Y_)}#y(){try{this.#i=We(()=>this.#c(this.#e))}catch(e){this.error(e)}this.#t=!1}#x(){const e=this.#n.pending;e&&(this.#a=We(()=>e(this.#e)),vn.enqueue(()=>{var n=this.#g();this.#i=this.#m(()=>(vn.ensure(),We(()=>this.#c(n)))),this.#d>0?this.#b():(vi(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#g(){var e=this.#e;return this.#t&&(this.#f=_r(),this.#e.before(this.#f),e=this.#f),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#m(e){var n=jt,r=Et,i=un;Sn(this.#o),Ae(this.#o),Si(this.#o.ctx);try{return e()}catch(o){return p0(o),null}finally{Sn(n),Ae(r),Si(i)}}#b(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#f),L0(this.#i,this.#u)),this.#a===null&&(this.#a=We(()=>e(this.#e)))}#_(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(e);return}this.#d+=e,this.#d===0&&(this.#t=!1,this.#a&&vi(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#_(e),this.#l+=e,this.#h&&Ai(this.#h,this.#l)}get_effect_pending(){return this.#v(),g(this.#h)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#p||!n&&!r)throw e;this.#i&&(ke(this.#i),this.#i=null),this.#a&&(ke(this.#a),this.#a=null),this.#s&&(ke(this.#s),this.#s=null);var i=!1,o=!1;const a=()=>{if(i){P_();return}i=!0,o&&E_(),vn.ensure(),this.#l=0,this.#s!==null&&vi(this.#s,()=>{this.#s=null}),this.#t=this.has_pending_snippet(),this.#i=this.#m(()=>(this.#p=!1,We(()=>this.#c(this.#e)))),this.#d>0?this.#b():this.#t=!1};var s=Et;try{Ae(null),o=!0,n?.(e,a),o=!1}catch(c){Ti(c,this.#o&&this.#o.parent)}finally{Ae(s)}r&&zs(()=>{this.#s=this.#m(()=>{vn.ensure(),this.#p=!0;try{return We(()=>{r(this.#e,()=>e,()=>a)})}catch(c){return Ti(c,this.#o.parent),null}finally{this.#p=!1}})})}}function V_(t,e,n,r){const i=Nf;if(n.length===0&&t.length===0){r(e.map(i));return}var o=Ot,a=jt,s=X_();function c(){Promise.all(n.map(u=>Z_(u))).then(u=>{s();try{r([...e.map(i),...u])}catch(f){(a.f&lr)===0&&Ti(f,a)}o?.deactivate(),Ja()}).catch(u=>{Ti(u,a)})}t.length>0?Promise.all(t).then(()=>{s();try{return c()}finally{o?.deactivate(),Ja()}}):c()}function X_(){var t=jt,e=Et,n=un,r=Ot;return function(o=!0){Sn(t),Ae(e),Si(n),o&&r?.activate()}}function Ja(){Sn(null),Ae(null),Si(null)}function Nf(t){var e=se|De,n=Et!==null&&(Et.f&se)!==0?Et:null;return jt!==null&&(jt.f|=Yi),{ctx:un,deps:null,effects:null,equals:f0,f:e,fn:t,reactions:null,rv:0,v:ue,wv:0,parent:n??jt,ac:null}}function Z_(t,e){let n=jt;n===null&&A_();var r=n.b,i=void 0,o=Hr(ue),a=!Et,s=new Map;return uv(()=>{var c=r0();i=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Ot&&u.committed&&u.deactivate(),Ja()})}catch(l){c.reject(l),Ja()}var u=Ot;if(a){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),s.get(u)?.reject(bi),s.delete(u),s.set(u,c)}const d=(l,h=void 0)=>{if(u.activate(),h)h!==bi&&(o.f|=dr,Ai(o,h));else{(o.f&dr)!==0&&(o.f^=dr),Ai(o,l);for(const[p,m]of s){if(s.delete(p),p===u)break;m.reject(bi)}}a&&(r.update_pending_count(-1),u.decrement(f))};c.promise.then(d,l=>d(null,l||"unknown"))}),av(()=>{for(const c of s.values())c.reject(bi)}),new Promise(c=>{function u(f){function d(){f===i?c(o):u(i)}f.then(d,d)}u(i)})}function At(t){const e=Nf(t);return R0(e),e}function J_(t){const e=Nf(t);return e.equals=l0,e}function _0(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ke(e[n])}}function Q_(t){for(var e=t.parent;e!==null;){if((e.f&se)===0)return(e.f&lr)===0?e:null;e=e.parent}return null}function kf(t){var e,n=jt;Sn(Q_(t));try{t.f&=~Ur,_0(t),e=P0(t)}finally{Sn(n)}return e}function v0(t){var e=kf(t);if(t.equals(e)||(Ot?.is_fork||(t.v=e),t.wv=O0()),!Go)if(Ge!==null)Bs()&&Ge.set(t,e);else{var n=(t.f&cn)===0?Jn:he;be(t,n)}}let xu=new Set;const hr=new Map;let y0=!1;function Hr(t,e){var n={f:0,v:t,reactions:null,equals:f0,rv:0,wv:0};return n}function $t(t,e){const n=Hr(t);return R0(n),n}function K_(t,e=!1,n=!0){const r=Hr(t);return e||(r.equals=l0),r}function at(t,e,n=!1){Et!==null&&(!yn||(Et.f&Ul)!==0)&&d0()&&(Et.f&(se|Zn|Cf|Ul))!==0&&!Wn?.includes(t)&&D_();let r=n?Te(e):e;return Ai(t,r)}function Ai(t,e){if(!t.equals(e)){var n=t.v;Go?hr.set(t,e):hr.set(t,n),t.v=e;var r=vn.ensure();r.capture(t,n),(t.f&se)!==0&&((t.f&De)!==0&&kf(t),be(t,(t.f&cn)!==0?he:Jn)),t.wv=O0(),x0(t,De),jt!==null&&(jt.f&he)!==0&&(jt.f&(Mr|ei))===0&&(He===null?lv([t]):He.push(t)),!r.is_fork&&xu.size>0&&!y0&&tv()}return e}function tv(){y0=!1;var t=pr;Qa(!0);const e=Array.from(xu);try{for(const n of e)(n.f&he)!==0&&be(n,Jn),Vo(n)&&ko(n)}finally{Qa(t)}xu.clear()}function $o(t){at(t,t.v+1)}function x0(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var o=n[i],a=o.f,s=(a&De)===0;if(s&&be(o,e),(a&se)!==0){var c=o;Ge?.delete(c),(a&Ur)===0&&(a&cn&&(o.f|=Ur),x0(c,Jn))}else s&&((a&Zn)!==0&&jn!==null&&jn.add(o),Br(o))}}function Te(t){if(typeof t!="object"||t===null||Ec in t)return t;const e=n0(t);if(e!==w_&&e!==M_)return t;var n=new Map,r=e0(t),i=$t(0),o=Fr,a=s=>{if(Fr===o)return s();var c=Et,u=Fr;Ae(null),Gl(o);var f=s();return Ae(c),Gl(u),f};return r&&n.set("length",$t(t.length)),new Proxy(t,{defineProperty(s,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&N_();var f=n.get(c);return f===void 0?f=a(()=>{var d=$t(u.value);return n.set(c,d),d}):at(f,u.value,!0),!0},deleteProperty(s,c){var u=n.get(c);if(u===void 0){if(c in s){const f=a(()=>$t(ue));n.set(c,f),$o(i)}}else at(u,ue),$o(i);return!0},get(s,c,u){if(c===Ec)return t;var f=n.get(c),d=c in s;if(f===void 0&&(!d||wo(s,c)?.writable)&&(f=a(()=>{var h=Te(d?s[c]:ue),p=$t(h);return p}),n.set(c,f)),f!==void 0){var l=g(f);return l===ue?void 0:l}return Reflect.get(s,c,u)},getOwnPropertyDescriptor(s,c){var u=Reflect.getOwnPropertyDescriptor(s,c);if(u&&"value"in u){var f=n.get(c);f&&(u.value=g(f))}else if(u===void 0){var d=n.get(c),l=d?.v;if(d!==void 0&&l!==ue)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return u},has(s,c){if(c===Ec)return!0;var u=n.get(c),f=u!==void 0&&u.v!==ue||Reflect.has(s,c);if(u!==void 0||jt!==null&&(!f||wo(s,c)?.writable)){u===void 0&&(u=a(()=>{var l=f?Te(s[c]):ue,h=$t(l);return h}),n.set(c,u));var d=g(u);if(d===ue)return!1}return f},set(s,c,u,f){var d=n.get(c),l=c in s;if(r&&c==="length")for(var h=u;h<d.v;h+=1){var p=n.get(h+"");p!==void 0?at(p,ue):h in s&&(p=a(()=>$t(ue)),n.set(h+"",p))}if(d===void 0)(!l||wo(s,c)?.writable)&&(d=a(()=>$t(void 0)),at(d,Te(u)),n.set(c,d));else{l=d.v!==ue;var m=a(()=>Te(u));at(d,m)}var b=Reflect.getOwnPropertyDescriptor(s,c);if(b?.set&&b.set.call(f,u),!l){if(r&&typeof c=="string"){var v=n.get("length"),x=Number(c);Number.isInteger(x)&&x>=v.v&&at(v,x+1)}$o(i)}return!0},ownKeys(s){g(i);var c=Reflect.ownKeys(s).filter(d=>{var l=n.get(d);return l===void 0||l.v!==ue});for(var[u,f]of n)f.v!==ue&&!(u in s)&&c.push(u);return c},setPrototypeOf(){k_()}})}var Hl,w0,M0,$0;function ev(){if(Hl===void 0){Hl=window,w0=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;M0=wo(e,"firstChild").get,$0=wo(e,"nextSibling").get,zl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),zl(n)&&(n.__t=void 0)}}function _r(t=""){return document.createTextNode(t)}function cr(t){return M0.call(t)}function Wo(t){return $0.call(t)}function _(t,e){return cr(t)}function Nt(t,e=!1){{var n=cr(t);return n instanceof Comment&&n.data===""?Wo(n):n}}function w(t,e=1,n=!1){let r=t;for(;e--;)r=Wo(r);return r}function nv(t){t.textContent=""}function S0(){return!1}let Yl=!1;function rv(){Yl||(Yl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Df(t){var e=Et,n=jt;Ae(null),Sn(null);try{return t()}finally{Ae(e),Sn(n)}}function iv(t,e,n,r=n){t.addEventListener(e,()=>Df(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),rv()}function ov(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function $r(t,e,n){var r=jt;r!==null&&(r.f&Pe)!==0&&(t|=Pe);var i={ctx:un,deps:null,nodes_start:null,nodes_end:null,f:t|De|cn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ko(i),i.f|=o0}catch(s){throw ke(i),s}else e!==null&&Br(i);var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&Yi)===0&&(o=o.first,(t&Zn)!==0&&(t&$i)!==0&&o!==null&&(o.f|=$i)),o!==null&&(o.parent=r,r!==null&&ov(o,r),Et!==null&&(Et.f&se)!==0&&(t&ei)===0)){var a=Et;(a.effects??=[]).push(o)}return i}function Bs(){return Et!==null&&!yn}function av(t){const e=$r(Af,null,!1);return be(e,he),e.teardown=t,e}function sv(t){return $r(i0|S_,t,!1)}function cv(t){vn.ensure();const e=$r(ei|Yi,t,!0);return(n={})=>new Promise(r=>{n.outro?vi(e,()=>{ke(e),r(void 0)}):(ke(e),r(void 0))})}function uv(t){return $r(Cf|Yi,t,!0)}function T0(t,e=0){return $r(Af|e,t,!0)}function Ft(t,e=[],n=[],r=[]){V_(r,e,n,i=>{$r(Af,()=>t(...i.map(g)),!0)})}function Ef(t,e=0){var n=$r(Zn|e,t,!0);return n}function We(t){return $r(Mr|Yi,t,!0)}function A0(t){var e=t.teardown;if(e!==null){const n=Go,r=Et;Wl(!0),Ae(null);try{e.call(null)}finally{Wl(n),Ae(r)}}}function C0(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&Df(()=>{i.abort(bi)});var r=n.next;(n.f&ei)!==0?n.parent=null:ke(n,e),n=r}}function fv(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Mr)===0&&ke(e),e=n}}function ke(t,e=!0){var n=!1;(e||(t.f&a0)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(N0(t.nodes_start,t.nodes_end),n=!0),C0(t,e&&!n),Ka(t,0),be(t,lr);var r=t.transitions;if(r!==null)for(const o of r)o.stop();A0(t);var i=t.parent;i!==null&&i.first!==null&&k0(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function N0(t,e){for(;t!==null;){var n=t===e?null:Wo(t);t.remove(),t=n}}function k0(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function vi(t,e,n=!0){var r=[];Lf(t,r,!0),D0(r,()=>{n&&ke(t),e&&e()})}function D0(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function Lf(t,e,n){if((t.f&Pe)===0){if(t.f^=Pe,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,o=(r.f&$i)!==0||(r.f&Mr)!==0&&(t.f&Zn)!==0;Lf(r,e,o?n:!1),r=i}}}function Rf(t){E0(t,!0)}function E0(t,e){if((t.f&Pe)!==0){t.f^=Pe,(t.f&he)===0&&(be(t,De),Br(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&$i)!==0||(n.f&Mr)!==0;E0(n,i?e:!1),n=r}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}function L0(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Wo(n);e.append(n),n=i}}let pr=!1;function Qa(t){pr=t}let Go=!1;function Wl(t){Go=t}let Et=null,yn=!1;function Ae(t){Et=t}let jt=null;function Sn(t){jt=t}let Wn=null;function R0(t){Et!==null&&(Wn===null?Wn=[t]:Wn.push(t))}let xe=null,Re=0,He=null;function lv(t){He=t}let I0=1,No=0,Fr=No;function Gl(t){Fr=t}function O0(){return++I0}function Vo(t){var e=t.f;if((e&De)!==0)return!0;if(e&se&&(t.f&=~Ur),(e&Jn)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var o=n[i];if(Vo(o)&&v0(o),o.wv>t.wv)return!0}(e&cn)!==0&&Ge===null&&be(t,he)}return!1}function F0(t,e,n=!0){var r=t.reactions;if(r!==null&&!Wn?.includes(t))for(var i=0;i<r.length;i++){var o=r[i];(o.f&se)!==0?F0(o,e,!1):e===o&&(n?be(o,De):(o.f&he)!==0&&be(o,Jn),Br(o))}}function P0(t){var e=xe,n=Re,r=He,i=Et,o=Wn,a=un,s=yn,c=Fr,u=t.f;xe=null,Re=0,He=null,Et=(u&(Mr|ei))===0?t:null,Wn=null,Si(t.ctx),yn=!1,Fr=++No,t.ac!==null&&(Df(()=>{t.ac.abort(bi)}),t.ac=null);try{t.f|=vu;var f=t.fn,d=f(),l=t.deps;if(xe!==null){var h;if(Ka(t,Re),l!==null&&Re>0)for(l.length=Re+xe.length,h=0;h<xe.length;h++)l[Re+h]=xe[h];else t.deps=l=xe;if(pr&&Bs()&&(t.f&cn)!==0)for(h=Re;h<l.length;h++)(l[h].reactions??=[]).push(t)}else l!==null&&Re<l.length&&(Ka(t,Re),l.length=Re);if(d0()&&He!==null&&!yn&&l!==null&&(t.f&(se|Jn|De))===0)for(h=0;h<He.length;h++)F0(He[h],t);return i!==null&&i!==t&&(No++,He!==null&&(r===null?r=He:r.push(...He))),(t.f&dr)!==0&&(t.f^=dr),d}catch(p){return p0(p)}finally{t.f^=vu,xe=e,Re=n,He=r,Et=i,Wn=o,Si(a),yn=s,Fr=c}}function dv(t,e){let n=e.reactions;if(n!==null){var r=v_.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&se)!==0&&(xe===null||!xe.includes(e))&&(be(e,Jn),(e.f&cn)!==0&&(e.f^=cn,e.f&=~Ur),_0(e),Ka(e,0))}function Ka(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)dv(t,n[r])}function ko(t){var e=t.f;if((e&lr)===0){be(t,he);var n=jt,r=pr;jt=t,pr=!0;try{(e&Zn)!==0?fv(t):C0(t),A0(t);var i=P0(t);t.teardown=typeof i=="function"?i:null,t.wv=I0;var o;_u&&q_&&(t.f&De)!==0&&t.deps}finally{pr=r,jt=n}}}async function hv(){await Promise.resolve(),U_()}function g(t){var e=t.f,n=(e&se)!==0;if(Et!==null&&!yn){var r=jt!==null&&(jt.f&lr)!==0;if(!r&&!Wn?.includes(t)){var i=Et.deps;if((Et.f&vu)!==0)t.rv<No&&(t.rv=No,xe===null&&i!==null&&i[Re]===t?Re++:xe===null?xe=[t]:xe.includes(t)||xe.push(t));else{(Et.deps??=[]).push(t);var o=t.reactions;o===null?t.reactions=[Et]:o.includes(Et)||o.push(Et)}}}if(Go){if(hr.has(t))return hr.get(t);if(n){var a=t,s=a.v;return((a.f&he)===0&&a.reactions!==null||q0(a))&&(s=kf(a)),hr.set(a,s),s}}else n&&!Ge?.has(t)&&(a=t,Vo(a)&&v0(a),pr&&Bs()&&(a.f&cn)===0&&j0(a));if(Ge?.has(t))return Ge.get(t);if((t.f&dr)!==0)throw t.v;return t.v}function j0(t){if(t.deps!==null){t.f^=cn;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&se)!==0&&(e.f&cn)===0&&j0(e)}}function q0(t){if(t.v===ue)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(hr.has(e)||(e.f&se)!==0&&q0(e))return!0;return!1}function z0(t){var e=yn;try{return yn=!0,t()}finally{yn=e}}const pv=-7169;function be(t,e){t.f=t.f&pv|e}const mv=["touchstart","touchmove"];function bv(t){return mv.includes(t)}const U0=new Set,wu=new Set;function Vi(t){for(var e=0;e<t.length;e++)U0.add(t[e]);for(var n of wu)n(t)}let Vl=null;function Ma(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],o=i[0]||t.target;Vl=t;var a=0,s=Vl===t&&t.__root;if(s){var c=i.indexOf(s);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;c<=u&&(a=c)}if(o=i[a]||t.target,o!==e){y_(t,"currentTarget",{configurable:!0,get(){return o||n}});var f=Et,d=jt;Ae(null),Sn(null);try{for(var l,h=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];m!=null&&(!o.disabled||t.target===o)&&m.call(o,t)}catch(b){l?h.push(b):l=b}if(t.cancelBubble||p===e||p===null)break;o=p}if(l){for(let b of h)queueMicrotask(()=>{throw b});throw l}}finally{t.__root=e,delete t.currentTarget,Ae(f),Sn(d)}}}function B0(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ts(t,e){var n=jt;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function wt(t,e){var n=(e&I_)!==0,r=(e&O_)!==0,i,o=!t.startsWith("<!>");return()=>{i===void 0&&(i=B0(o?t:"<!>"+t),n||(i=cr(i)));var a=r||w0?document.importNode(i,!0):i.cloneNode(!0);if(n){var s=cr(a),c=a.lastChild;ts(s,c)}else ts(a,a);return a}}function Wt(){var t=document.createDocumentFragment(),e=document.createComment(""),n=_r();return t.append(e,n),ts(e,n),t}function ot(t,e){t!==null&&t.before(e)}function j(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function gv(t,e){return _v(t,e)}const li=new Map;function _v(t,{target:e,anchor:n,props:r={},events:i,context:o,intro:a=!0}){ev();var s=new Set,c=d=>{for(var l=0;l<d.length;l++){var h=d[l];if(!s.has(h)){s.add(h);var p=bv(h);e.addEventListener(h,Ma,{passive:p});var m=li.get(h);m===void 0?(document.addEventListener(h,Ma,{passive:p}),li.set(h,1)):li.set(h,m+1)}}};c(Tf(U0)),wu.add(c);var u=void 0,f=cv(()=>{var d=n??e.appendChild(_r());return W_(d,{pending:()=>{}},l=>{if(o){Wi({});var h=un;h.c=o}i&&(r.$$events=i),u=t(l,r)||{},o&&Gi()}),()=>{for(var l of s){e.removeEventListener(l,Ma);var h=li.get(l);--h===0?(document.removeEventListener(l,Ma),li.delete(l)):li.set(l,h)}wu.delete(c),d!==n&&d.parentNode?.removeChild(d)}});return vv.set(u,f),u}let vv=new WeakMap;class yv{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#c=!0;constructor(e,n=!0){this.anchor=e,this.#c=n}#o=()=>{var e=Ot;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)Rf(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[o,a]of this.#t){if(this.#t.delete(o),o===e)break;const s=this.#r.get(a);s&&(ke(s.effect),this.#r.delete(a))}for(const[o,a]of this.#e){if(o===n||this.#n.has(o))continue;const s=()=>{if(Array.from(this.#t.values()).includes(o)){var u=document.createDocumentFragment();L0(a,u),u.append(_r()),this.#r.set(o,{effect:a,fragment:u})}else ke(a);this.#n.delete(o),this.#e.delete(o)};this.#c||!r?(this.#n.add(o),vi(a,s,!1)):s()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(ke(i.effect),this.#r.delete(r))};ensure(e,n){var r=Ot,i=S0();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var o=document.createDocumentFragment(),a=_r();o.append(a),this.#r.set(e,{effect:We(()=>n(a)),fragment:o})}else this.#e.set(e,We(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[s,c]of this.#e)s===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[s,c]of this.#r)s===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#o),r.ondiscard(this.#i)}else this.#o()}}function Pt(t,e,n=!1){var r=new yv(t),i=n?$i:0;function o(a,s){r.ensure(a,s)}Ef(()=>{var a=!1;e((s,c=!0)=>{a=!0,o(c,s)}),a||o(!1,null)},i)}function Ce(t,e){return e}function xv(t,e,n){for(var r=[],i=e.length,o=0;o<i;o++)Lf(e[o].e,r,!0);D0(r,()=>{var a=r.length===0&&n!==null;if(a){var s=n,c=s.parentNode;nv(c),c.append(s),t.items.clear(),mn(t,e[0].prev,e[i-1].next)}for(var u=0;u<i;u++){var f=e[u];a||(t.items.delete(f.k),mn(t,f.prev,f.next)),ke(f.e,!a)}t.first===e[0]&&(t.first=e[0].prev)})}function Ne(t,e,n,r,i,o=null){var a=t,s=new Map,c=null,u=(e&u0)!==0,f=(e&s0)!==0,d=(e&c0)!==0;if(u){var l=t;a=l.appendChild(_r())}var h=null,p=J_(()=>{var y=n();return e0(y)?y:y==null?[]:Tf(y)}),m,b=!0;function v(){wv(S,m,a,e,r),h!==null&&(m.length===0?(h.fragment?(a.before(h.fragment),h.fragment=null):Rf(h.effect),x.first=h.effect):vi(h.effect,()=>{h=null}))}var x=Ef(()=>{m=g(p);for(var y=m.length,A=new Set,M=Ot,$=null,N=S0(),D=0;D<y;D+=1){var R=m[D],T=r(R,D),O=b?null:s.get(T);O?(f&&Ai(O.v,R),d?Ai(O.i,D):O.i=D,N&&M.skipped_effects.delete(O.e)):(O=Mv(b?a:null,$,R,T,D,i,e,n),b&&(O.o=!0,$===null?c=O:$.next=O,$=O),s.set(T,O)),A.add(T)}if(y===0&&o&&!h)if(b)h={fragment:null,effect:We(()=>o(a))};else{var G=document.createDocumentFragment(),q=_r();G.append(q),h={fragment:G,effect:We(()=>o(q))}}if(!b)if(N){for(const[k,Y]of s)A.has(k)||M.skipped_effects.add(Y.e);M.oncommit(v),M.ondiscard(()=>{})}else v();g(p)}),S={effect:x,items:s,first:c};b=!1}function wv(t,e,n,r,i){var o=(r&L_)!==0,a=e.length,s=t.items,c=t.first,u,f=null,d,l=[],h=[],p,m,b,v;if(o)for(v=0;v<a;v+=1)p=e[v],m=i(p,v),b=s.get(m),b.a?.measure(),(d??=new Set).add(b);for(v=0;v<a;v+=1){if(p=e[v],m=i(p,v),b=s.get(m),t.first??=b,!b.o){b.o=!0;var x=f?f.next:c;mn(t,f,b),mn(t,b,x),Lc(b,x,n),f=b,l=[],h=[],c=f.next;continue}if((b.e.f&Pe)!==0&&(Rf(b.e),o&&(b.a?.unfix(),(d??=new Set).delete(b))),b!==c){if(u!==void 0&&u.has(b)){if(l.length<h.length){var S=h[0],y;f=S.prev;var A=l[0],M=l[l.length-1];for(y=0;y<l.length;y+=1)Lc(l[y],S,n);for(y=0;y<h.length;y+=1)u.delete(h[y]);mn(t,A.prev,M.next),mn(t,f,A),mn(t,M,S),c=S,f=M,v-=1,l=[],h=[]}else u.delete(b),Lc(b,c,n),mn(t,b.prev,b.next),mn(t,b,f===null?t.first:f.next),mn(t,f,b),f=b;continue}for(l=[],h=[];c!==null&&c.k!==m;)(c.e.f&Pe)===0&&(u??=new Set).add(c),h.push(c),c=c.next;if(c===null)continue;b=c}l.push(b),f=b,c=b.next}if(c!==null||u!==void 0){for(var $=u===void 0?[]:Tf(u);c!==null;)(c.e.f&Pe)===0&&$.push(c),c=c.next;var N=$.length;if(N>0){var D=(r&u0)!==0&&a===0?n:null;if(o){for(v=0;v<N;v+=1)$[v].a?.measure();for(v=0;v<N;v+=1)$[v].a?.fix()}xv(t,$,D)}}o&&zs(()=>{if(d!==void 0)for(b of d)b.a?.apply()})}function Mv(t,e,n,r,i,o,a,s){var c=(a&s0)!==0,u=(a&R_)===0,f=c?u?K_(n,!1,!1):Hr(n):n,d=(a&c0)===0?i:Hr(i),l={i:d,v:f,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var h=document.createDocumentFragment();h.append(t=_r())}return l.e=We(()=>o(t,f,d,s)),e!==null&&(e.next=l),l}finally{}}function Lc(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,o=t.e.nodes_start;o!==null&&o!==r;){var a=Wo(o);i.before(o),o=a}}function mn(t,e,n){e===null?(t.first=n,t.effect.first=n&&n.e):(e.e.next&&(e.e.next.prev=null),e.next=n,e.e.next=n&&n.e),n===null?t.effect.last=e&&e.e:(n.e.prev&&(n.e.prev.next=null),n.prev=e,n.e.prev=e&&e.e)}function fe(t,e,n=!1,r=!1,i=!1){var o=t,a="";Ft(()=>{var s=jt;if(a!==(a=e()??"")&&(s.nodes_start!==null&&(N0(s.nodes_start,s.nodes_end),s.nodes_start=s.nodes_end=null),a!=="")){var c=a+"";n?c=`<svg>${c}</svg>`:r&&(c=`<math>${c}</math>`);var u=B0(c);if((n||r)&&(u=cr(u)),ts(cr(u),u.lastChild),n||r)for(;cr(u);)o.before(cr(u));else o.before(u)}})}function H0(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=H0(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $v(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=H0(t))&&(r&&(r+=" "),r+=e);return r}function lo(t){return typeof t=="object"?$v(t):t??""}function Sv(t,e,n){var r=t==null?"":""+t;return r===""?null:r}function It(t,e,n,r,i,o){var a=t.__className;if(a!==n||a===void 0){var s=Sv(n);s==null?t.removeAttribute("class"):t.className=s,t.__className=n}return o}const Tv=Symbol("is custom element"),Av=Symbol("is html");function yi(t,e,n,r){var i=Cv(t);i[e]!==(i[e]=n)&&(e==="loading"&&(t[T_]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Nv(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Cv(t){return t.__attributes??={[Tv]:t.nodeName.includes("-"),[Av]:t.namespaceURI===F_}}var Xl=new Map;function Nv(t){var e=t.getAttribute("is")||t.nodeName,n=Xl.get(e);if(n)return n;Xl.set(e,n=[]);for(var r,i=t,o=Element.prototype;o!==i;){r=x_(i);for(var a in r)r[a].set&&n.push(a);i=n0(i)}return n}function Ht(t,e,n=e){var r=new WeakSet;iv(t,"input",async i=>{var o=i?t.defaultValue:t.value;if(o=Rc(t)?Ic(o):o,n(o),Ot!==null&&r.add(Ot),await hv(),o!==(o=e())){var a=t.selectionStart,s=t.selectionEnd,c=t.value.length;if(t.value=o??"",s!==null){var u=t.value.length;a===s&&s===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=a,t.selectionEnd=Math.min(s,u))}}}),z0(e)==null&&t.value&&(n(Rc(t)?Ic(t.value):t.value),Ot!==null&&r.add(Ot)),T0(()=>{var i=e();if(t===document.activeElement){var o=Ba??Ot;if(r.has(o))return}Rc(t)&&i===Ic(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Rc(t){var e=t.type;return e==="number"||e==="range"}function Ic(t){return t===""?null:+t}const kv="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(kv);var Dv=wt(`<div class="flex justify-center flex-col"><div><table class="table table-md border-2 border-base-content/5 mb-4 w-[1000px]"><thead><tr><th colspan="3" class="font-bold text-lg text-primary">a. Model as an optimization problem</th></tr><tr><th>Part</th><th class="w-80">Description</th><th class="w-120">Reason</th></tr></thead><tbody><tr><td>Objective Function</td><td>Maximize the total reward collected from visited nodes
                        substracting the total travel distance.</td><td>There are no other parameters in our problem besides the
                        limitations of visiting the nodes once and the incentive
                        of collecting the prize. <br/><br/> I consider that some
                        multiplier should be given to the prizes or the distances
                        to make them comparable. If the distances are too big, there
                        is no benefit in moving and since I'm not forced to visit
                        all nodes, I can just stay at the most beneficial</td></tr><tr><td>Constraint 1</td><td>Subtour elimination</td><td>Since this is a TSP variant, the subtours aren't
                        allowed.</td></tr><tr><td>Constraint 2</td><td>Each node can be visited at most once with the exception
                        of the starting point</td><td>TSP requieres this constraint and it makes sense since
                        you shouldn't be able to collect the prize multiple
                        times. If you allow that, looping through a pair of
                        close nodes con make our objective infinite.</td></tr><tr><td>Constraint 3</td><td>The starting and exit point should be the same</td><td>TSP forces this condition</td></tr><tr><td>Constraint 4</td><td>The prize can be collected only once</td><td></td></tr><tr><td>Variables 1</td><td>Binary variable that indicates if a node was visited or
                        not</td><td></td></tr><tr><td>Variable 2</td><td>Starting node</td><td>I consider the starting node as free parameter that we
                        can optimize.</td></tr></tbody></table> <p>The model must represent how profitable is to walk an arc between
            two nodes and help you to select the most convinient one</p> <table class="table table-md border-2 border-base-content/5 mt-4 w-full"><thead><tr><th colspan="3" class="font-bold text-lg text-primary">b. Heuristic for the prize collecting TSP</th></tr><tr><th>Step</th><th>Description</th><th>Go to</th></tr></thead><tbody><tr><td>1</td><td>Since the starting point is not given, search for the
                        most promising node <span class="font-bold">(node with the highest reward)</span></td><td></td></tr><tr><td>2</td><td>Calculate the delta between the minimum distance
                        between two arcs and the prize. After this, pick the
                        most profitable one.</td><td></td></tr><tr><td>3</td><td>If there is no profitable one, look one step ahead and
                        if no profits are posible, pick a path with minimal
                        loses to the depot.</td><td></td></tr><tr><td>4</td><td>Repeat until no more nodes are left or no more
                        profitable paths are available.</td><td>2</td></tr></tbody></table></div></div> <p class="my-4">This heuristic is based on the greedy idea of move towards profitable arcs
    and return to the depot at the first sign of loses.</p>`,1);function Ev(t){var e=Dv();ot(t,e)}function wn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hs(t){let e,n,r;t.length!==2?(e=wn,n=(s,c)=>wn(t(s),c),r=(s,c)=>t(s)-c):(e=t===wn||t===Yr?t:Lv,n=t,r=t);function i(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const d=u+f>>>1;n(s[d],c)<0?u=d+1:f=d}while(u<f)}return u}function o(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const d=u+f>>>1;n(s[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function a(s,c,u=0,f=s.length){const d=i(s,c,u,f-1);return d>u&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:i,center:a,right:o}}function Lv(){return 0}function Y0(t){return t===null?NaN:+t}function*Rv(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Iv=Hs(wn),If=Iv.right;Hs(Y0).center;function Ov(t){return t.length|0}function Fv(t){return!(t>0)}function Pv(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function jv(t){return e=>t(...e)}function qv(...t){const e=typeof t[t.length-1]=="function"&&jv(t.pop());t=t.map(Pv);const n=t.map(Ov),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(Fv))return o;for(;;){o.push(i.map((s,c)=>t[c][s]));let a=r;for(;++i[a]===n[a];){if(a===0)return e?o.map(e):o;i[a--]=0}}}function W0(t,e){let n=0,r,i=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function zv(t,e){const n=W0(t,e);return n&&Math.sqrt(n)}function mr(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Wr{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=e+o,s=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);s&&(n[r++]=s),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Do extends Map{constructor(e,n=X0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Mu(this,e))}has(e){return super.has(Mu(this,e))}set(e,n){return super.set(G0(this,e),n)}delete(e){return super.delete(V0(this,e))}}class Ys extends Set{constructor(e,n=X0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Mu(this,e))}add(e){return super.add(G0(this,e))}delete(e){return super.delete(V0(this,e))}}function Mu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function G0({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function V0({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function X0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $u(t){return t}function Uv(t,...e){return Of(t,$u,$u,e)}function Oc(t,e,...n){return Of(t,$u,e,n)}function Bv(t,e,...n){return Of(t,Array.from,e,n)}function Of(t,e,n,r){return(function i(o,a){if(a>=r.length)return n(o);const s=new Do,c=r[a++];let u=-1;for(const f of o){const d=c(f,++u,o),l=s.get(d);l?l.push(f):s.set(d,[f])}for(const[f,d]of s)s.set(f,i(d,a));return e(s)})(t,0)}function Hv(t,e){return Array.from(e,n=>t[n])}function Yv(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,o)=>o);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,o)=>{for(const a of e){const s=es(a[i],a[o]);if(s)return s}})):(n=t.map(n),r.sort((i,o)=>es(n[i],n[o]))),Hv(t,r)}return t.sort(Z0(n))}function Z0(t=wn){if(t===wn)return es;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function es(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Wv=Math.sqrt(50),Gv=Math.sqrt(10),Vv=Math.sqrt(2);function ns(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Wv?10:o>=Gv?5:o>=Vv?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=n&&n<2?ns(t,e,n*2):[s,c,u]}function rs(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?ns(e,t,n):ns(t,e,n);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)c[u]=(o-u)/-a;else for(let u=0;u<s;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)c[u]=(i+u)/-a;else for(let u=0;u<s;++u)c[u]=(i+u)*a;return c}function Su(t,e,n){return e=+e,t=+t,n=+n,ns(t,e,n)[2]}function Tu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Su(e,t,n):Su(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Tn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Xv(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Eo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Zv(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function J0(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?es:Z0(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),d=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),h=Math.max(n,Math.floor(e-u*d/c+l)),p=Math.min(r,Math.floor(e+(c-u)*d/c+l));J0(t,e,h,p,i)}const o=t[e];let a=n,s=r;for(io(t,n,e),i(t[r],o)>0&&io(t,n,r);a<s;){for(io(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?io(t,n,s):(++s,io(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function io(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function is(t,e,n){if(t=Float64Array.from(Rv(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Eo(t);if(e>=1)return Tn(t);var r,i=(r-1)*e,o=Math.floor(i),a=Tn(J0(t,o).subarray(0,o+1)),s=Eo(t.subarray(o+1));return a+(s-a)*(i-o)}}function Jv(t,e,n=Y0){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function Qv(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Au(t,e){return is(t,.5,e)}function*Kv(t){for(const e of t)yield*e}function Q0(t){return Array.from(Kv(t))}function t2(t,e){const n=new Do;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function e2(t,e=n2){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function n2(t,e){return[t,e]}function Cu(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Ff(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function os(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function r2(t){return t}var i2=3,Zl=1e-6;function o2(t){return"translate("+t+",0)"}function a2(t){return e=>+t(e)}function s2(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function c2(){return!this.__axis}function u2(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=1,f="y",d=o2;function l(h){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):r2),b=Math.max(o,0)+s,v=e.range(),x=+v[0]+c,S=+v[v.length-1]+c,y=(e.bandwidth?s2:a2)(e.copy(),c),A=h.selection?h.selection():h,M=A.selectAll(".domain").data([null]),$=A.selectAll(".tick").data(p,e).order(),N=$.exit(),D=$.enter().append("g").attr("class","tick"),R=$.select("line"),T=$.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(D),R=R.merge(D.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),T=T.merge(D.append("text").attr("fill","currentColor").attr(f,u*b).attr("dy","0.71em")),h!==A&&(M=M.transition(h),$=$.transition(h),R=R.transition(h),T=T.transition(h),N=N.transition(h).attr("opacity",Zl).attr("transform",function(O){return isFinite(O=y(O))?d(O+c):this.getAttribute("transform")}),D.attr("opacity",Zl).attr("transform",function(O){var G=this.parentNode.__axis;return d((G&&isFinite(G=G(O))?G:y(O))+c)})),N.remove(),M.attr("d",a?"M"+x+","+u*a+"V"+c+"H"+S+"V"+u*a:"M"+x+","+c+"H"+S),$.attr("opacity",1).attr("transform",function(O){return d(y(O)+c)}),R.attr(f+"2",u*o),T.attr(f,u*b).text(m),A.filter(c2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),A.each(function(){this.__axis=y})}return l.scale=function(h){return arguments.length?(e=h,l):e},l.ticks=function(){return n=Array.from(arguments),l},l.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),l):n.slice()},l.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),l):r&&r.slice()},l.tickFormat=function(h){return arguments.length?(i=h,l):i},l.tickSize=function(h){return arguments.length?(o=a=+h,l):o},l.tickSizeInner=function(h){return arguments.length?(o=+h,l):o},l.tickSizeOuter=function(h){return arguments.length?(a=+h,l):a},l.tickPadding=function(h){return arguments.length?(s=+h,l):s},l.offset=function(h){return arguments.length?(c=+h,l):c},l}function f2(t){return u2(i2,t)}var l2={value:()=>{}};function K0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ha(n)}function Ha(t){this._=t}function d2(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ha.prototype=K0.prototype={constructor:Ha,on:function(t,e){var n=this._,r=d2(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=h2(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Jl(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Jl(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ha(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function h2(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Jl(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=l2,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Nu="http://www.w3.org/1999/xhtml";const Ci={svg:"http://www.w3.org/2000/svg",xhtml:Nu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ws(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ci.hasOwnProperty(e)?{space:Ci[e],local:t}:t}function p2(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Nu&&e.documentElement.namespaceURI===Nu?e.createElement(t):e.createElementNS(n,t)}}function m2(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Gs(t){var e=Ws(t);return(e.local?m2:p2)(e)}function b2(){}function Pf(t){return t==null?b2:function(){return this.querySelector(t)}}function g2(t){typeof t!="function"&&(t=Pf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,u,f=0;f<a;++f)(c=o[f])&&(u=t.call(c,c.__data__,f,o))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new je(r,this._parents)}function _2(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function v2(){return[]}function tp(t){return t==null?v2:function(){return this.querySelectorAll(t)}}function y2(t){return function(){return _2(t.apply(this,arguments))}}function x2(t){typeof t=="function"?t=y2(t):t=tp(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&(r.push(t.call(c,c.__data__,u,a)),i.push(c));return new je(r,i)}function ep(t){return function(){return this.matches(t)}}function np(t){return function(e){return e.matches(t)}}var w2=Array.prototype.find;function M2(t){return function(){return w2.call(this.children,t)}}function $2(){return this.firstElementChild}function S2(t){return this.select(t==null?$2:M2(typeof t=="function"?t:np(t)))}var T2=Array.prototype.filter;function A2(){return Array.from(this.children)}function C2(t){return function(){return T2.call(this.children,t)}}function N2(t){return this.selectAll(t==null?A2:C2(typeof t=="function"?t:np(t)))}function k2(t){typeof t!="function"&&(t=ep(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new je(r,this._parents)}function rp(t){return new Array(t.length)}function D2(){return new je(this._enter||this._groups.map(rp),this._parents)}function as(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}as.prototype={constructor:as,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function E2(t){return function(){return t}}function L2(t,e,n,r,i,o){for(var a=0,s,c=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new as(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function R2(t,e,n,r,i,o,a){var s,c,u=new Map,f=e.length,d=o.length,l=new Array(f),h;for(s=0;s<f;++s)(c=e[s])&&(l[s]=h=a.call(c,c.__data__,s,e)+"",u.has(h)?i[s]=c:u.set(h,c));for(s=0;s<d;++s)h=a.call(t,o[s],s,o)+"",(c=u.get(h))?(r[s]=c,c.__data__=o[s],u.delete(h)):n[s]=new as(t,o[s]);for(s=0;s<f;++s)(c=e[s])&&u.get(l[s])===c&&(i[s]=c)}function I2(t){return t.__data__}function O2(t,e){if(!arguments.length)return Array.from(this,I2);var n=e?R2:L2,r=this._parents,i=this._groups;typeof t!="function"&&(t=E2(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var f=r[u],d=i[u],l=d.length,h=F2(t.call(f,f&&f.__data__,u,r)),p=h.length,m=s[u]=new Array(p),b=a[u]=new Array(p),v=c[u]=new Array(l);n(f,d,m,b,v,h,e);for(var x=0,S=0,y,A;x<p;++x)if(y=m[x]){for(x>=S&&(S=x+1);!(A=b[S])&&++S<p;);y._next=A||null}}return a=new je(a,r),a._enter=s,a._exit=c,a}function F2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function P2(){return new je(this._exit||this._groups.map(rp),this._parents)}function j2(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function q2(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var u=n[c],f=r[c],d=u.length,l=s[c]=new Array(d),h,p=0;p<d;++p)(h=u[p]||f[p])&&(l[p]=h);for(;c<i;++c)s[c]=n[c];return new je(s,this._parents)}function z2(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function U2(t){t||(t=B2);function e(d,l){return d&&l?t(d.__data__,l.__data__):!d-!l}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(c[f]=u);c.sort(e)}return new je(i,this._parents).order()}function B2(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function H2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Y2(){return Array.from(this)}function W2(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function G2(){let t=0;for(const e of this)++t;return t}function V2(){return!this.node()}function X2(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Z2(t){return function(){this.removeAttribute(t)}}function J2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Q2(t,e){return function(){this.setAttribute(t,e)}}function K2(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ty(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ey(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ny(t,e){var n=Ws(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?J2:Z2:typeof e=="function"?n.local?ey:ty:n.local?K2:Q2)(n,e))}function ip(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ry(t){return function(){this.style.removeProperty(t)}}function iy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function oy(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ay(t,e,n){return arguments.length>1?this.each((e==null?ry:typeof e=="function"?oy:iy)(t,e,n??"")):Ni(this.node(),t)}function Ni(t,e){return t.style.getPropertyValue(e)||ip(t).getComputedStyle(t,null).getPropertyValue(e)}function sy(t){return function(){delete this[t]}}function cy(t,e){return function(){this[t]=e}}function uy(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function fy(t,e){return arguments.length>1?this.each((e==null?sy:typeof e=="function"?uy:cy)(t,e)):this.node()[t]}function op(t){return t.trim().split(/^|\s+/)}function jf(t){return t.classList||new ap(t)}function ap(t){this._node=t,this._names=op(t.getAttribute("class")||"")}ap.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function sp(t,e){for(var n=jf(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function cp(t,e){for(var n=jf(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ly(t){return function(){sp(this,t)}}function dy(t){return function(){cp(this,t)}}function hy(t,e){return function(){(e.apply(this,arguments)?sp:cp)(this,t)}}function py(t,e){var n=op(t+"");if(arguments.length<2){for(var r=jf(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?hy:e?ly:dy)(n,e))}function my(){this.textContent=""}function by(t){return function(){this.textContent=t}}function gy(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _y(t){return arguments.length?this.each(t==null?my:(typeof t=="function"?gy:by)(t)):this.node().textContent}function vy(){this.innerHTML=""}function yy(t){return function(){this.innerHTML=t}}function xy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function wy(t){return arguments.length?this.each(t==null?vy:(typeof t=="function"?xy:yy)(t)):this.node().innerHTML}function My(){this.nextSibling&&this.parentNode.appendChild(this)}function $y(){return this.each(My)}function Sy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ty(){return this.each(Sy)}function Ay(t){var e=typeof t=="function"?t:Gs(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Cy(){return null}function Ny(t,e){var n=typeof t=="function"?t:Gs(t),r=e==null?Cy:typeof e=="function"?e:Pf(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ky(){var t=this.parentNode;t&&t.removeChild(this)}function Dy(){return this.each(ky)}function Ey(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ly(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ry(t){return this.select(t?Ly:Ey)}function Iy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Oy(t){return function(e){t.call(this,e,this.__data__)}}function Fy(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Py(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function jy(t,e,n){return function(){var r=this.__on,i,o=Oy(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function qy(t,e,n){var r=Fy(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(i=0,f=s[c];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=e?jy:Py,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function up(t,e,n){var r=ip(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zy(t,e){return function(){return up(this,t,e)}}function Uy(t,e){return function(){return up(this,t,e.apply(this,arguments))}}function By(t,e){return this.each((typeof e=="function"?Uy:zy)(t,e))}function*Hy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var fp=[null];function je(t,e){this._groups=t,this._parents=e}function Xo(){return new je([[document.documentElement]],fp)}function Yy(){return this}je.prototype=Xo.prototype={constructor:je,select:g2,selectAll:x2,selectChild:S2,selectChildren:N2,filter:k2,data:O2,enter:D2,exit:P2,join:j2,merge:q2,selection:Yy,order:z2,sort:U2,call:H2,nodes:Y2,node:W2,size:G2,empty:V2,each:X2,attr:ny,style:ay,property:fy,classed:py,text:_y,html:wy,raise:$y,lower:Ty,append:Ay,insert:Ny,remove:Dy,clone:Ry,datum:Iy,on:qy,dispatch:By,[Symbol.iterator]:Hy};function Pr(t){return typeof t=="string"?new je([[document.querySelector(t)]],[document.documentElement]):new je([[t]],fp)}function Wy(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Gy(t,e){if(t=Wy(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Xi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Sr(){}var Gr=.7,ki=1/Gr,xi="\\s*([+-]?\\d+)\\s*",Lo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vy=/^#([0-9a-f]{3,8})$/,Xy=new RegExp(`^rgb\\(${xi},${xi},${xi}\\)$`),Zy=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),Jy=new RegExp(`^rgba\\(${xi},${xi},${xi},${Lo}\\)$`),Qy=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${Lo}\\)$`),Ky=new RegExp(`^hsl\\(${Lo},${Mn},${Mn}\\)$`),tx=new RegExp(`^hsla\\(${Lo},${Mn},${Mn},${Lo}\\)$`),Ql={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xi(Sr,Vr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Kl,formatHex:Kl,formatHex8:ex,formatHsl:nx,formatRgb:td,toString:td});function Kl(){return this.rgb().formatHex()}function ex(){return this.rgb().formatHex8()}function nx(){return lp(this).formatHsl()}function td(){return this.rgb().formatRgb()}function Vr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ed(e):n===3?new ne(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?$a(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?$a(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xy.exec(t))?new ne(e[1],e[2],e[3],1):(e=Zy.exec(t))?new ne(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jy.exec(t))?$a(e[1],e[2],e[3],e[4]):(e=Qy.exec(t))?$a(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ky.exec(t))?id(e[1],e[2]/100,e[3]/100,1):(e=tx.exec(t))?id(e[1],e[2]/100,e[3]/100,e[4]):Ql.hasOwnProperty(t)?ed(Ql[t]):t==="transparent"?new ne(NaN,NaN,NaN,0):null}function ed(t){return new ne(t>>16&255,t>>8&255,t&255,1)}function $a(t,e,n,r){return r<=0&&(t=e=n=NaN),new ne(t,e,n,r)}function qf(t){return t instanceof Sr||(t=Vr(t)),t?(t=t.rgb(),new ne(t.r,t.g,t.b,t.opacity)):new ne}function vr(t,e,n,r){return arguments.length===1?qf(t):new ne(t,e,n,r??1)}function ne(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Xi(ne,vr,Zo(Sr,{brighter(t){return t=t==null?ki:Math.pow(ki,t),new ne(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gr:Math.pow(Gr,t),new ne(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ne(jr(this.r),jr(this.g),jr(this.b),ss(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nd,formatHex:nd,formatHex8:rx,formatRgb:rd,toString:rd}));function nd(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}`}function rx(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}${Ir((isNaN(this.opacity)?1:this.opacity)*255)}`}function rd(){const t=ss(this.opacity);return`${t===1?"rgb(":"rgba("}${jr(this.r)}, ${jr(this.g)}, ${jr(this.b)}${t===1?")":`, ${t})`}`}function ss(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function jr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ir(t){return t=jr(t),(t<16?"0":"")+t.toString(16)}function id(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new on(t,e,n,r)}function lp(t){if(t instanceof on)return new on(t.h,t.s,t.l,t.opacity);if(t instanceof Sr||(t=Vr(t)),!t)return new on;if(t instanceof on)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new on(a,s,c,t.opacity)}function ku(t,e,n,r){return arguments.length===1?lp(t):new on(t,e,n,r??1)}function on(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Xi(on,ku,Zo(Sr,{brighter(t){return t=t==null?ki:Math.pow(ki,t),new on(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gr:Math.pow(Gr,t),new on(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ne(Fc(t>=240?t-240:t+120,i,r),Fc(t,i,r),Fc(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new on(od(this.h),Sa(this.s),Sa(this.l),ss(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ss(this.opacity);return`${t===1?"hsl(":"hsla("}${od(this.h)}, ${Sa(this.s)*100}%, ${Sa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function od(t){return t=(t||0)%360,t<0?t+360:t}function Sa(t){return Math.max(0,Math.min(1,t||0))}function Fc(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const dp=Math.PI/180,hp=180/Math.PI,cs=18,pp=.96422,mp=1,bp=.82521,gp=4/29,wi=6/29,_p=3*wi*wi,ix=wi*wi*wi;function vp(t){if(t instanceof $n)return new $n(t.l,t.a,t.b,t.opacity);if(t instanceof Un)return yp(t);t instanceof ne||(t=qf(t));var e=zc(t.r),n=zc(t.g),r=zc(t.b),i=Pc((.2225045*e+.7168786*n+.0606169*r)/mp),o,a;return e===n&&n===r?o=a=i:(o=Pc((.4360747*e+.3850649*n+.1430804*r)/pp),a=Pc((.0139322*e+.0971045*n+.7141733*r)/bp)),new $n(116*i-16,500*(o-i),200*(i-a),t.opacity)}function Du(t,e,n,r){return arguments.length===1?vp(t):new $n(t,e,n,r??1)}function $n(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Xi($n,Du,Zo(Sr,{brighter(t){return new $n(this.l+cs*(t??1),this.a,this.b,this.opacity)},darker(t){return new $n(this.l-cs*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=pp*jc(e),t=mp*jc(t),n=bp*jc(n),new ne(qc(3.1338561*e-1.6168667*t-.4906146*n),qc(-.9787684*e+1.9161415*t+.033454*n),qc(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Pc(t){return t>ix?Math.pow(t,1/3):t/_p+gp}function jc(t){return t>wi?t*t*t:_p*(t-gp)}function qc(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zc(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ox(t){if(t instanceof Un)return new Un(t.h,t.c,t.l,t.opacity);if(t instanceof $n||(t=vp(t)),t.a===0&&t.b===0)return new Un(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*hp;return new Un(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Eu(t,e,n,r){return arguments.length===1?ox(t):new Un(t,e,n,r??1)}function Un(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function yp(t){if(isNaN(t.h))return new $n(t.l,0,0,t.opacity);var e=t.h*dp;return new $n(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Xi(Un,Eu,Zo(Sr,{brighter(t){return new Un(this.h,this.c,this.l+cs*(t??1),this.opacity)},darker(t){return new Un(this.h,this.c,this.l-cs*(t??1),this.opacity)},rgb(){return yp(this).rgb()}}));var xp=-.14861,zf=1.78277,Uf=-.29227,Vs=-.90649,Ro=1.97294,ad=Ro*Vs,sd=Ro*zf,cd=zf*Uf-Vs*xp;function ax(t){if(t instanceof qr)return new qr(t.h,t.s,t.l,t.opacity);t instanceof ne||(t=qf(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(cd*r+ad*e-sd*n)/(cd+ad-sd),o=r-i,a=(Ro*(n-i)-Uf*o)/Vs,s=Math.sqrt(a*a+o*o)/(Ro*i*(1-i)),c=s?Math.atan2(a,o)*hp-120:NaN;return new qr(c<0?c+360:c,s,i,t.opacity)}function An(t,e,n,r){return arguments.length===1?ax(t):new qr(t,e,n,r??1)}function qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Xi(qr,An,Zo(Sr,{brighter(t){return t=t==null?ki:Math.pow(ki,t),new qr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gr:Math.pow(Gr,t),new qr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*dp,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ne(255*(e+n*(xp*r+zf*i)),255*(e+n*(Uf*r+Vs*i)),255*(e+n*(Ro*r)),this.opacity)}}));function sx(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function cx(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return sx((n-r/e)*e,a,i,o,s)}}const Xs=t=>()=>t;function wp(t,e){return function(n){return t+n*e}}function ux(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Bf(t,e){var n=e-t;return n?wp(t,n>180||n<-180?n-360*Math.round(n/360):n):Xs(isNaN(t)?e:t)}function fx(t){return(t=+t)==1?pe:function(e,n){return n-e?ux(e,n,t):Xs(isNaN(e)?n:e)}}function pe(t,e){var n=e-t;return n?wp(t,n):Xs(isNaN(t)?e:t)}const Xr=(function t(e){var n=fx(e);function r(i,o){var a=n((i=vr(i)).r,(o=vr(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),u=pe(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function lx(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=vr(e[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var dx=lx(cx);function hx(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function px(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mx(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Jo(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function bx(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function le(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gx(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Jo(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Lu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uc=new RegExp(Lu.source,"g");function _x(t){return function(){return t}}function vx(t){return function(e){return t(e)+""}}function Mp(t,e){var n=Lu.lastIndex=Uc.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Lu.exec(t))&&(i=Uc.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:le(r,i)})),n=Uc.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?vx(c[0].x):_x(e):(e=c.length,function(u){for(var f=0,d;f<e;++f)s[(d=c[f]).i]=d.x(u);return s.join("")})}function Jo(t,e){var n=typeof e,r;return e==null||n==="boolean"?Xs(e):(n==="number"?le:n==="string"?(r=Vr(e))?(e=r,Xr):Mp:e instanceof Vr?Xr:e instanceof Date?bx:px(e)?hx:Array.isArray(e)?mx:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gx:le)(t,e)}function Hf(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ud=180/Math.PI,Ru={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $p(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ud,skewX:Math.atan(c)*ud,scaleX:a,scaleY:s}}var Ta;function yx(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ru:$p(e.a,e.b,e.c,e.d,e.e,e.f)}function xx(t){return t==null||(Ta||(Ta=document.createElementNS("http://www.w3.org/2000/svg","g")),Ta.setAttribute("transform",t),!(t=Ta.transform.baseVal.consolidate()))?Ru:(t=t.matrix,$p(t.a,t.b,t.c,t.d,t.e,t.f))}function Sp(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,l,h,p){if(u!==d||f!==l){var m=h.push("translate(",null,e,null,n);p.push({i:m-4,x:le(u,d)},{i:m-2,x:le(f,l)})}else(d||l)&&h.push("translate("+d+e+l+n)}function a(u,f,d,l){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),l.push({i:d.push(i(d)+"rotate(",null,r)-2,x:le(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function s(u,f,d,l){u!==f?l.push({i:d.push(i(d)+"skewX(",null,r)-2,x:le(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function c(u,f,d,l,h,p){if(u!==d||f!==l){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:le(u,d)},{i:m-2,x:le(f,l)})}else(d!==1||l!==1)&&h.push(i(h)+"scale("+d+","+l+")")}return function(u,f){var d=[],l=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,l),a(u.rotate,f.rotate,d,l),s(u.skewX,f.skewX,d,l),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,l),u=f=null,function(h){for(var p=-1,m=l.length,b;++p<m;)d[(b=l[p]).i]=b.x(h);return d.join("")}}}var wx=Sp(yx,"px, ","px)","deg)"),Mx=Sp(xx,", ",")",")");function $x(t){return function(e,n){var r=t((e=ku(e)).h,(n=ku(n)).h),i=pe(e.s,n.s),o=pe(e.l,n.l),a=pe(e.opacity,n.opacity);return function(s){return e.h=r(s),e.s=i(s),e.l=o(s),e.opacity=a(s),e+""}}}const Sx=$x(Bf);function Tx(t,e){var n=pe((t=Du(t)).l,(e=Du(e)).l),r=pe(t.a,e.a),i=pe(t.b,e.b),o=pe(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=o(a),t+""}}function Ax(t){return function(e,n){var r=t((e=Eu(e)).h,(n=Eu(n)).h),i=pe(e.c,n.c),o=pe(e.l,n.l),a=pe(e.opacity,n.opacity);return function(s){return e.h=r(s),e.c=i(s),e.l=o(s),e.opacity=a(s),e+""}}}const Cx=Ax(Bf);function Tp(t){return(function e(n){n=+n;function r(i,o){var a=t((i=An(i)).h,(o=An(o)).h),s=pe(i.s,o.s),c=pe(i.l,o.l),u=pe(i.opacity,o.opacity);return function(f){return i.h=a(f),i.s=s(f),i.l=c(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=e,r})(1)}Tp(Bf);var Yf=Tp(pe);function Zs(t,e){e===void 0&&(e=t,t=Jo);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function fn(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Di=0,ho=0,oo=0,Ap=1e3,us,po,fs=0,Zr=0,Js=0,Io=typeof performance=="object"&&performance.now?performance:Date,Cp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wf(){return Zr||(Cp(Nx),Zr=Io.now()+Js)}function Nx(){Zr=0}function ls(){this._call=this._time=this._next=null}ls.prototype=Np.prototype={constructor:ls,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Wf():+n)+(e==null?0:+e),!this._next&&po!==this&&(po?po._next=this:us=this,po=this),this._call=t,this._time=n,Iu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Iu())}};function Np(t,e,n){var r=new ls;return r.restart(t,e,n),r}function kx(){Wf(),++Di;for(var t=us,e;t;)(e=Zr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Di}function fd(){Zr=(fs=Io.now())+Js,Di=ho=0;try{kx()}finally{Di=0,Ex(),Zr=0}}function Dx(){var t=Io.now(),e=t-fs;e>Ap&&(Js-=e,fs=t)}function Ex(){for(var t,e=us,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:us=n);po=t,Iu(r)}function Iu(t){if(!Di){ho&&(ho=clearTimeout(ho));var e=t-Zr;e>24?(t<1/0&&(ho=setTimeout(fd,t-Io.now()-Js)),oo&&(oo=clearInterval(oo))):(oo||(fs=Io.now(),oo=setInterval(Dx,Ap)),Di=1,Cp(fd))}}function ld(t,e,n){var r=new ls;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Lx=K0("start","end","cancel","interrupt"),Rx=[],kp=0,dd=1,Ou=2,Ya=3,hd=4,Fu=5,Wa=6;function Qs(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Ix(t,n,{name:e,index:r,group:i,on:Lx,tween:Rx,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:kp})}function Gf(t,e){var n=hn(t,e);if(n.state>kp)throw new Error("too late; already scheduled");return n}function kn(t,e){var n=hn(t,e);if(n.state>Ya)throw new Error("too late; already running");return n}function hn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ix(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Np(o,0,n.time);function o(u){n.state=dd,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,d,l,h;if(n.state!==dd)return c();for(f in r)if(h=r[f],h.name===n.name){if(h.state===Ya)return ld(a);h.state===hd?(h.state=Wa,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[f]):+f<e&&(h.state=Wa,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[f])}if(ld(function(){n.state===Ya&&(n.state=hd,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ou,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ou){for(n.state=Ya,i=new Array(l=n.tween.length),f=0,d=-1;f<l;++f)(h=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Fu,1),d=-1,l=i.length;++d<l;)i[d].call(t,f);n.state===Fu&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Wa,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Ox(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Ou&&r.state<Fu,r.state=Wa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Fx(t){return this.each(function(){Ox(this,t)})}function Px(t,e){var n,r;return function(){var i=kn(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function jx(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=kn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}o.tween=i}}function qx(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=hn(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Px:jx)(n,t,e))}function Vf(t,e,n){var r=t._id;return t.each(function(){var i=kn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return hn(i,r).value[e]}}function Dp(t,e){var n;return(typeof e=="number"?le:e instanceof Vr?Xr:(n=Vr(e))?(e=n,Xr):Mp)(t,e)}function zx(t){return function(){this.removeAttribute(t)}}function Ux(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bx(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Hx(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Yx(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function Wx(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function Gx(t,e){var n=Ws(t),r=n==="transform"?Mx:Dp;return this.attrTween(t,typeof e=="function"?(n.local?Wx:Yx)(n,r,Vf(this,"attr."+t,e)):e==null?(n.local?Ux:zx)(n):(n.local?Hx:Bx)(n,r,e))}function Vx(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Xx(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Zx(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Xx(t,o)),n}return i._value=e,i}function Jx(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Vx(t,o)),n}return i._value=e,i}function Qx(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ws(t);return this.tween(n,(r.local?Zx:Jx)(r,e))}function Kx(t,e){return function(){Gf(this,t).delay=+e.apply(this,arguments)}}function tw(t,e){return e=+e,function(){Gf(this,t).delay=e}}function ew(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Kx:tw)(e,t)):hn(this.node(),e).delay}function nw(t,e){return function(){kn(this,t).duration=+e.apply(this,arguments)}}function rw(t,e){return e=+e,function(){kn(this,t).duration=e}}function iw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nw:rw)(e,t)):hn(this.node(),e).duration}function ow(t,e){if(typeof e!="function")throw new Error;return function(){kn(this,t).ease=e}}function aw(t){var e=this._id;return arguments.length?this.each(ow(e,t)):hn(this.node(),e).ease}function sw(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;kn(this,t).ease=n}}function cw(t){if(typeof t!="function")throw new Error;return this.each(sw(this._id,t))}function uw(t){typeof t!="function"&&(t=ep(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new Gn(r,this._parents,this._name,this._id)}function fw(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],u=n[s],f=c.length,d=a[s]=new Array(f),l,h=0;h<f;++h)(l=c[h]||u[h])&&(d[h]=l);for(;s<r;++s)a[s]=e[s];return new Gn(a,this._parents,this._name,this._id)}function lw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function dw(t,e,n){var r,i,o=lw(e)?Gf:kn;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function hw(t,e){var n=this._id;return arguments.length<2?hn(this.node(),n).on.on(t):this.each(dw(n,t,e))}function pw(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mw(){return this.on("end.remove",pw(this._id))}function bw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Pf(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,u=o[a]=new Array(c),f,d,l=0;l<c;++l)(f=s[l])&&(d=t.call(f,f.__data__,l,s))&&("__data__"in f&&(d.__data__=f.__data__),u[l]=d,Qs(u[l],e,n,l,u,hn(f,n)));return new Gn(o,this._parents,e,n)}function gw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tp(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],u=c.length,f,d=0;d<u;++d)if(f=c[d]){for(var l=t.call(f,f.__data__,d,c),h,p=hn(f,n),m=0,b=l.length;m<b;++m)(h=l[m])&&Qs(h,e,n,m,l,p);o.push(l),a.push(f)}return new Gn(o,a,e,n)}var _w=Xo.prototype.constructor;function vw(){return new _w(this._groups,this._parents)}function yw(t,e){var n,r,i;return function(){var o=Ni(this,t),a=(this.style.removeProperty(t),Ni(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Ep(t){return function(){this.style.removeProperty(t)}}function xw(t,e,n){var r,i=n+"",o;return function(){var a=Ni(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function ww(t,e,n){var r,i,o;return function(){var a=Ni(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),Ni(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function Mw(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=kn(this,t),u=c.on,f=c.value[o]==null?s||(s=Ep(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),c.on=r}}function $w(t,e,n){var r=(t+="")=="transform"?wx:Dp;return e==null?this.styleTween(t,yw(t,r)).on("end.style."+t,Ep(t)):typeof e=="function"?this.styleTween(t,ww(t,r,Vf(this,"style."+t,e))).each(Mw(this._id,t)):this.styleTween(t,xw(t,r,e),n).on("end.style."+t,null)}function Sw(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Tw(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Sw(t,a,n)),r}return o._value=e,o}function Aw(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Tw(t,e,n??""))}function Cw(t){return function(){this.textContent=t}}function Nw(t){return function(){var e=t(this);this.textContent=e??""}}function kw(t){return this.tween("text",typeof t=="function"?Nw(Vf(this,"text",t)):Cw(t==null?"":t+""))}function Dw(t){return function(e){this.textContent=t.call(this,e)}}function Ew(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Dw(i)),e}return r._value=t,r}function Lw(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ew(t))}function Rw(){for(var t=this._name,e=this._id,n=Lp(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)if(c=a[u]){var f=hn(c,e);Qs(c,t,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Gn(r,this._parents,t,n)}function Iw(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var u=kn(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),u.on=e}),i===0&&o()})}var Ow=0;function Gn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Lp(){return++Ow}var Rn=Xo.prototype;Gn.prototype={constructor:Gn,select:bw,selectAll:gw,selectChild:Rn.selectChild,selectChildren:Rn.selectChildren,filter:uw,merge:fw,selection:vw,transition:Rw,call:Rn.call,nodes:Rn.nodes,node:Rn.node,size:Rn.size,empty:Rn.empty,each:Rn.each,on:hw,attr:Gx,attrTween:Qx,style:$w,styleTween:Aw,text:kw,textTween:Lw,remove:mw,tween:qx,delay:ew,duration:iw,ease:aw,easeVarying:cw,end:Iw,[Symbol.iterator]:Rn[Symbol.iterator]};function Fw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Pw={time:null,delay:0,duration:250,ease:Fw};function jw(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function qw(t){var e,n;t instanceof Gn?(e=t._id,t=t._name):(e=Lp(),(n=Pw).time=Wf(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&Qs(c,t,e,u,a,n||jw(c,e));return new Gn(r,this._parents,t,e)}Xo.prototype.interrupt=Fx;Xo.prototype.transition=qw;const Pu=Math.PI,ju=2*Pu,Er=1e-6,zw=ju-Er;function Rp(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Uw(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Rp;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ip{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Rp:Uw(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-e,u=i-n,f=a-e,d=s-n,l=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(l>Er)if(!(Math.abs(d*c-u*f)>Er)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-a,p=i-s,m=c*c+u*u,b=h*h+p*p,v=Math.sqrt(m),x=Math.sqrt(l),S=o*Math.tan((Pu-Math.acos((m+l-b)/(2*v*x)))/2),y=S/x,A=S/v;Math.abs(y-1)>Er&&this._append`L${e+y*f},${n+y*d}`,this._append`A${o},${o},0,0,${+(d*h>f*p)},${this._x1=e+A*c},${this._y1=n+A*u}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),u=e+s,f=n+c,d=1^a,l=a?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Er||Math.abs(this._y1-f)>Er)&&this._append`L${u},${f}`,r&&(l<0&&(l=l%ju+ju),l>zw?this._append`A${r},${r},0,1,${d},${e-s},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:l>Er&&this._append`A${r},${r},0,${+(l>=Pu)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Or(t=3){return new Ip(+t)}function Bw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ds(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ei(t){return t=ds(Math.abs(t)),t?t[1]:NaN}function Hw(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Yw(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ww=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oo(t){if(!(e=Ww.exec(t)))throw new Error("invalid format: "+t);var e;return new Xf({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Oo.prototype=Xf.prototype;function Xf(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Xf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gw(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Op;function Vw(t,e){var n=ds(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Op=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ds(t,Math.max(0,e+o-1))[0]}function pd(t,e){var n=ds(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const md={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bw,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pd(t*100,e),r:pd,s:Vw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function bd(t){return t}var gd=Array.prototype.map,_d=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xw(t){var e=t.grouping===void 0||t.thousands===void 0?bd:Hw(gd.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?bd:Yw(gd.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Oo(d);var l=d.fill,h=d.align,p=d.sign,m=d.symbol,b=d.zero,v=d.width,x=d.comma,S=d.precision,y=d.trim,A=d.type;A==="n"?(x=!0,A="g"):md[A]||(S===void 0&&(S=12),y=!0,A="g"),(b||l==="0"&&h==="=")&&(b=!0,l="0",h="=");var M=m==="$"?n:m==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",$=m==="$"?r:/[%p]/.test(A)?a:"",N=md[A],D=/[defgprs%]/.test(A);S=S===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(T){var O=M,G=$,q,k,Y;if(A==="c")G=N(T)+G,T="";else{T=+T;var rt=T<0||1/T<0;if(T=isNaN(T)?c:N(Math.abs(T),S),y&&(T=Gw(T)),rt&&+T==0&&p!=="+"&&(rt=!1),O=(rt?p==="("?p:s:p==="-"||p==="("?"":p)+O,G=(A==="s"?_d[8+Op/3]:"")+G+(rt&&p==="("?")":""),D){for(q=-1,k=T.length;++q<k;)if(Y=T.charCodeAt(q),48>Y||Y>57){G=(Y===46?i+T.slice(q+1):T.slice(q))+G,T=T.slice(0,q);break}}}x&&!b&&(T=e(T,1/0));var Q=O.length+T.length+G.length,E=Q<v?new Array(v-Q+1).join(l):"";switch(x&&b&&(T=e(E+T,E.length?v-G.length:1/0),E=""),h){case"<":T=O+T+G+E;break;case"=":T=O+E+T+G;break;case"^":T=E.slice(0,Q=E.length>>1)+O+T+G+E.slice(Q);break;default:T=E+O+T+G;break}return o(T)}return R.toString=function(){return d+""},R}function f(d,l){var h=u((d=Oo(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Ei(l)/3)))*3,m=Math.pow(10,-p),b=_d[8+p/3];return function(v){return h(m*v)+b}}return{format:u,formatPrefix:f}}var Aa,Zi,Fp;Zw({thousands:",",grouping:[3],currency:["$",""]});function Zw(t){return Aa=Xw(t),Zi=Aa.format,Fp=Aa.formatPrefix,Aa}function Jw(t){return Math.max(0,-Ei(Math.abs(t)))}function Qw(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ei(e)/3)))*3-Ei(Math.abs(t)))}function Kw(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ei(e)-Ei(t))+1}var ht=1e-6,Pp=1e-12,yt=Math.PI,Gt=yt/2,vd=yt/4,qe=yt*2,ye=180/yt,Yt=yt/180,Rt=Math.abs,Ji=Math.atan,Vn=Math.atan2,gt=Math.cos,jp=Math.exp,hs=Math.log,Bc=Math.pow,ft=Math.sin,Xe=Math.sign||function(t){return t>0?1:t<0?-1:0},Ee=Math.sqrt,Zf=Math.tan;function qp(t){return t>1?0:t<-1?yt:Math.acos(t)}function Ke(t){return t>1?Gt:t<-1?-Gt:Math.asin(t)}function Ze(){}function ps(t,e){t&&xd.hasOwnProperty(t.type)&&xd[t.type](t,e)}var yd={Feature:function(t,e){ps(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ps(n[r].geometry,e)}},xd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){qu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)qu(n[r],e,0)},Polygon:function(t,e){wd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)wd(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ps(n[r],e)}};function qu(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function wd(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)qu(t[n],e,1);e.polygonEnd()}function Lr(t,e){t&&yd.hasOwnProperty(t.type)?yd[t.type](t,e):ps(t,e)}function zu(t){return[Vn(t[1],t[0]),Ke(t[2])]}function Li(t){var e=t[0],n=t[1],r=gt(n);return[r*gt(e),r*ft(e),ft(n)]}function Ca(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ms(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Hc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Na(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Uu(t){var e=Ee(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bu(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function Hu(t,e){return Rt(t)>yt&&(t-=Math.round(t/qe)*qe),[t,e]}Hu.invert=Hu;function zp(t,e,n){return(t%=qe)?e||n?Bu($d(t),Sd(e,n)):$d(t):e||n?Sd(e,n):Hu}function Md(t){return function(e,n){return e+=t,Rt(e)>yt&&(e-=Math.round(e/qe)*qe),[e,n]}}function $d(t){var e=Md(t);return e.invert=Md(-t),e}function Sd(t,e){var n=gt(t),r=ft(t),i=gt(e),o=ft(e);function a(s,c){var u=gt(c),f=gt(s)*u,d=ft(s)*u,l=ft(c),h=l*n+f*r;return[Vn(d*i-h*o,f*n-l*r),Ke(h*i+d*o)]}return a.invert=function(s,c){var u=gt(c),f=gt(s)*u,d=ft(s)*u,l=ft(c),h=l*i-d*o;return[Vn(d*i+l*o,f*n+h*r),Ke(h*n-f*r)]},a}function t3(t){t=zp(t[0]*Yt,t[1]*Yt,t.length>2?t[2]*Yt:0);function e(n){return n=t(n[0]*Yt,n[1]*Yt),n[0]*=ye,n[1]*=ye,n}return e.invert=function(n){return n=t.invert(n[0]*Yt,n[1]*Yt),n[0]*=ye,n[1]*=ye,n},e}function e3(t,e,n,r,i,o){if(n){var a=gt(e),s=ft(e),c=r*n;i==null?(i=e+r*qe,o=e-c/2):(i=Td(a,i),o=Td(a,o),(r>0?i<o:i>o)&&(i+=r*qe));for(var u,f=i;r>0?f>o:f<o;f-=c)u=zu([a,-s*gt(f),-s*ft(f)]),t.point(u[0],u[1])}}function Td(t,e){e=Li(e),e[0]-=t,Uu(e);var n=qp(-e[1]);return((-e[2]<0?-n:n)+qe-ht)%qe}function Up(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Ze,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Ga(t,e){return Rt(t[0]-e[0])<ht&&Rt(t[1]-e[1])<ht}function ka(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bp(t,e,n,r,i){var o=[],a=[],s,c;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,b=p[0],v=p[m],x;if(Ga(b,v)){if(!b[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((b=p[s])[0],b[1]);i.lineEnd();return}v[0]+=2*ht}o.push(x=new ka(b,p,null,!0)),a.push(x.o=new ka(b,null,x,!1)),o.push(x=new ka(v,p,null,!1)),a.push(x.o=new ka(v,null,x,!0))}}),!!o.length){for(a.sort(e),Ad(o),Ad(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var u=o[0],f,d;;){for(var l=u,h=!0;l.v;)if((l=l.n)===u)return;f=l.z,i.lineStart();do{if(l.v=l.o.v=!0,l.e){if(h)for(s=0,c=f.length;s<c;++s)i.point((d=f[s])[0],d[1]);else r(l.x,l.n.x,1,i);l=l.n}else{if(h)for(f=l.p.z,s=f.length-1;s>=0;--s)i.point((d=f[s])[0],d[1]);else r(l.x,l.p.x,-1,i);l=l.p}l=l.o,f=l.z,h=!h}while(!l.v);i.lineEnd()}}}function Ad(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Yc(t){return Rt(t[0])<=yt?t[0]:Xe(t[0])*((Rt(t[0])+yt)%qe-yt)}function n3(t,e){var n=Yc(e),r=e[1],i=ft(r),o=[ft(n),-gt(n),0],a=0,s=0,c=new Wr;i===1?r=Gt+ht:i===-1&&(r=-Gt-ht);for(var u=0,f=t.length;u<f;++u)if(l=(d=t[u]).length)for(var d,l,h=d[l-1],p=Yc(h),m=h[1]/2+vd,b=ft(m),v=gt(m),x=0;x<l;++x,p=y,b=M,v=$,h=S){var S=d[x],y=Yc(S),A=S[1]/2+vd,M=ft(A),$=gt(A),N=y-p,D=N>=0?1:-1,R=D*N,T=R>yt,O=b*M;if(c.add(Vn(O*D*ft(R),v*$+O*gt(R))),a+=T?N+D*qe:N,T^p>=n^y>=n){var G=ms(Li(h),Li(S));Uu(G);var q=ms(o,G);Uu(q);var k=(T^N>=0?-1:1)*Ke(q[2]);(r>k||r===k&&(G[0]||G[1]))&&(s+=T^N>=0?1:-1)}}return(a<-ht||a<ht&&c<-Pp)^s&1}function Hp(t,e,n,r){return function(i){var o=e(i),a=Up(),s=e(a),c=!1,u,f,d,l={point:h,lineStart:m,lineEnd:b,polygonStart:function(){l.point=v,l.lineStart=x,l.lineEnd=S,f=[],u=[]},polygonEnd:function(){l.point=h,l.lineStart=m,l.lineEnd=b,f=Q0(f);var y=n3(u,r);f.length?(c||(i.polygonStart(),c=!0),Bp(f,i3,y,n,i)):y&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(y,A){t(y,A)&&i.point(y,A)}function p(y,A){o.point(y,A)}function m(){l.point=p,o.lineStart()}function b(){l.point=h,o.lineEnd()}function v(y,A){d.push([y,A]),s.point(y,A)}function x(){s.lineStart(),d=[]}function S(){v(d[0][0],d[0][1]),s.lineEnd();var y=s.clean(),A=a.result(),M,$=A.length,N,D,R;if(d.pop(),u.push(d),d=null,!!$){if(y&1){if(D=A[0],(N=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),M=0;M<N;++M)i.point((R=D[M])[0],R[1]);i.lineEnd()}return}$>1&&y&2&&A.push(A.pop().concat(A.shift())),f.push(A.filter(r3))}}return l}}function r3(t){return t.length>1}function i3(t,e){return((t=t.x)[0]<0?t[1]-Gt-ht:Gt-t[1])-((e=e.x)[0]<0?e[1]-Gt-ht:Gt-e[1])}const Cd=Hp(function(){return!0},o3,s3,[-yt,-Gt]);function o3(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var s=o>0?yt:-yt,c=Rt(o-e);Rt(c-yt)<ht?(t.point(e,n=(n+a)/2>0?Gt:-Gt),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),i=0):r!==s&&c>=yt&&(Rt(e-r)<ht&&(e-=r*ht),Rt(o-s)<ht&&(o-=s*ht),n=a3(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=o,n=a),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function a3(t,e,n,r){var i,o,a=ft(t-n);return Rt(a)>ht?Ji((ft(e)*(o=gt(r))*ft(n)-ft(r)*(i=gt(e))*ft(t))/(i*o*a)):(e+r)/2}function s3(t,e,n,r){var i;if(t==null)i=n*Gt,r.point(-yt,i),r.point(0,i),r.point(yt,i),r.point(yt,0),r.point(yt,-i),r.point(0,-i),r.point(-yt,-i),r.point(-yt,0),r.point(-yt,i);else if(Rt(t[0]-e[0])>ht){var o=t[0]<e[0]?yt:-yt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function c3(t){var e=gt(t),n=2*Yt,r=e>0,i=Rt(e)>ht;function o(f,d,l,h){e3(h,t,n,l,f,d)}function a(f,d){return gt(f)*gt(d)>e}function s(f){var d,l,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(b,v){var x=[b,v],S,y=a(b,v),A=r?y?0:u(b,v):y?u(b+(b<0?yt:-yt),v):0;if(!d&&(p=h=y)&&f.lineStart(),y!==h&&(S=c(d,x),(!S||Ga(d,S)||Ga(x,S))&&(x[2]=1)),y!==h)m=0,y?(f.lineStart(),S=c(x,d),f.point(S[0],S[1])):(S=c(d,x),f.point(S[0],S[1],2),f.lineEnd()),d=S;else if(i&&d&&r^y){var M;!(A&l)&&(M=c(x,d,!0))&&(m=0,r?(f.lineStart(),f.point(M[0][0],M[0][1]),f.point(M[1][0],M[1][1]),f.lineEnd()):(f.point(M[1][0],M[1][1]),f.lineEnd(),f.lineStart(),f.point(M[0][0],M[0][1],3)))}y&&(!d||!Ga(d,x))&&f.point(x[0],x[1]),d=x,h=y,l=A},lineEnd:function(){h&&f.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function c(f,d,l){var h=Li(f),p=Li(d),m=[1,0,0],b=ms(h,p),v=Ca(b,b),x=b[0],S=v-x*x;if(!S)return!l&&f;var y=e*v/S,A=-e*x/S,M=ms(m,b),$=Na(m,y),N=Na(b,A);Hc($,N);var D=M,R=Ca($,D),T=Ca(D,D),O=R*R-T*(Ca($,$)-1);if(!(O<0)){var G=Ee(O),q=Na(D,(-R-G)/T);if(Hc(q,$),q=zu(q),!l)return q;var k=f[0],Y=d[0],rt=f[1],Q=d[1],E;Y<k&&(E=k,k=Y,Y=E);var W=Y-k,Z=Rt(W-yt)<ht,B=Z||W<ht;if(!Z&&Q<rt&&(E=rt,rt=Q,Q=E),B?Z?rt+Q>0^q[1]<(Rt(q[0]-k)<ht?rt:Q):rt<=q[1]&&q[1]<=Q:W>yt^(k<=q[0]&&q[0]<=Y)){var P=Na(D,(-R+G)/T);return Hc(P,$),[q,zu(P)]}}}function u(f,d){var l=r?t:yt-t,h=0;return f<-l?h|=1:f>l&&(h|=2),d<-l?h|=4:d>l&&(h|=8),h}return Hp(a,s,o,r?[0,-t]:[-yt,t-yt])}function u3(t,e,n,r,i,o){var a=t[0],s=t[1],c=e[0],u=e[1],f=0,d=1,l=c-a,h=u-s,p;if(p=n-a,!(!l&&p>0)){if(p/=l,l<0){if(p<f)return;p<d&&(d=p)}else if(l>0){if(p>d)return;p>f&&(f=p)}if(p=i-a,!(!l&&p<0)){if(p/=l,l<0){if(p>d)return;p>f&&(f=p)}else if(l>0){if(p<f)return;p<d&&(d=p)}if(p=r-s,!(!h&&p>0)){if(p/=h,h<0){if(p<f)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>f&&(f=p)}if(p=o-s,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>f&&(f=p)}else if(h>0){if(p<f)return;p<d&&(d=p)}return f>0&&(t[0]=a+f*l,t[1]=s+f*h),d<1&&(e[0]=a+d*l,e[1]=s+d*h),!0}}}}}var mo=1e9,Da=-mo;function Yp(t,e,n,r){function i(u,f){return t<=u&&u<=n&&e<=f&&f<=r}function o(u,f,d,l){var h=0,p=0;if(u==null||(h=a(u,d))!==(p=a(f,d))||c(u,f)<0^d>0)do l.point(h===0||h===3?t:n,h>1?r:e);while((h=(h+d+4)%4)!==p);else l.point(f[0],f[1])}function a(u,f){return Rt(u[0]-t)<ht?f>0?0:3:Rt(u[0]-n)<ht?f>0?2:1:Rt(u[1]-e)<ht?f>0?1:0:f>0?3:2}function s(u,f){return c(u.x,f.x)}function c(u,f){var d=a(u,1),l=a(f,1);return d!==l?d-l:d===0?f[1]-u[1]:d===1?u[0]-f[0]:d===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,d=Up(),l,h,p,m,b,v,x,S,y,A,M,$={point:N,lineStart:O,lineEnd:G,polygonStart:R,polygonEnd:T};function N(k,Y){i(k,Y)&&f.point(k,Y)}function D(){for(var k=0,Y=0,rt=h.length;Y<rt;++Y)for(var Q=h[Y],E=1,W=Q.length,Z=Q[0],B,P,z=Z[0],U=Z[1];E<W;++E)B=z,P=U,Z=Q[E],z=Z[0],U=Z[1],P<=r?U>r&&(z-B)*(r-P)>(U-P)*(t-B)&&++k:U<=r&&(z-B)*(r-P)<(U-P)*(t-B)&&--k;return k}function R(){f=d,l=[],h=[],M=!0}function T(){var k=D(),Y=M&&k,rt=(l=Q0(l)).length;(Y||rt)&&(u.polygonStart(),Y&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),rt&&Bp(l,s,k,o,u),u.polygonEnd()),f=u,l=h=p=null}function O(){$.point=q,h&&h.push(p=[]),A=!0,y=!1,x=S=NaN}function G(){l&&(q(m,b),v&&y&&d.rejoin(),l.push(d.result())),$.point=N,y&&f.lineEnd()}function q(k,Y){var rt=i(k,Y);if(h&&p.push([k,Y]),A)m=k,b=Y,v=rt,A=!1,rt&&(f.lineStart(),f.point(k,Y));else if(rt&&y)f.point(k,Y);else{var Q=[x=Math.max(Da,Math.min(mo,x)),S=Math.max(Da,Math.min(mo,S))],E=[k=Math.max(Da,Math.min(mo,k)),Y=Math.max(Da,Math.min(mo,Y))];u3(Q,E,t,e,n,r)?(y||(f.lineStart(),f.point(Q[0],Q[1])),f.point(E[0],E[1]),rt||f.lineEnd(),M=!1):rt&&(f.lineStart(),f.point(k,Y),M=!1)}x=k,S=Y,y=rt}return $}}const Yu=t=>t;var Wc=new Wr,Wu=new Wr,Wp,Gp,Gu,Vu,zn={point:Ze,lineStart:Ze,lineEnd:Ze,polygonStart:function(){zn.lineStart=f3,zn.lineEnd=d3},polygonEnd:function(){zn.lineStart=zn.lineEnd=zn.point=Ze,Wc.add(Rt(Wu)),Wu=new Wr},result:function(){var t=Wc/2;return Wc=new Wr,t}};function f3(){zn.point=l3}function l3(t,e){zn.point=Vp,Wp=Gu=t,Gp=Vu=e}function Vp(t,e){Wu.add(Vu*t-Gu*e),Gu=t,Vu=e}function d3(){Vp(Wp,Gp)}var Ri=1/0,bs=Ri,Fo=-Ri,gs=Fo,_s={point:h3,lineStart:Ze,lineEnd:Ze,polygonStart:Ze,polygonEnd:Ze,result:function(){var t=[[Ri,bs],[Fo,gs]];return Fo=gs=-(bs=Ri=1/0),t}};function h3(t,e){t<Ri&&(Ri=t),t>Fo&&(Fo=t),e<bs&&(bs=e),e>gs&&(gs=e)}var Xu=0,Zu=0,bo=0,vs=0,ys=0,gi=0,Ju=0,Qu=0,go=0,Xp,Zp,gn,_n,Ve={point:Jr,lineStart:Nd,lineEnd:kd,polygonStart:function(){Ve.lineStart=b3,Ve.lineEnd=g3},polygonEnd:function(){Ve.point=Jr,Ve.lineStart=Nd,Ve.lineEnd=kd},result:function(){var t=go?[Ju/go,Qu/go]:gi?[vs/gi,ys/gi]:bo?[Xu/bo,Zu/bo]:[NaN,NaN];return Xu=Zu=bo=vs=ys=gi=Ju=Qu=go=0,t}};function Jr(t,e){Xu+=t,Zu+=e,++bo}function Nd(){Ve.point=p3}function p3(t,e){Ve.point=m3,Jr(gn=t,_n=e)}function m3(t,e){var n=t-gn,r=e-_n,i=Ee(n*n+r*r);vs+=i*(gn+t)/2,ys+=i*(_n+e)/2,gi+=i,Jr(gn=t,_n=e)}function kd(){Ve.point=Jr}function b3(){Ve.point=_3}function g3(){Jp(Xp,Zp)}function _3(t,e){Ve.point=Jp,Jr(Xp=gn=t,Zp=_n=e)}function Jp(t,e){var n=t-gn,r=e-_n,i=Ee(n*n+r*r);vs+=i*(gn+t)/2,ys+=i*(_n+e)/2,gi+=i,i=_n*t-gn*e,Ju+=i*(gn+t),Qu+=i*(_n+e),go+=i*3,Jr(gn=t,_n=e)}function Qp(t){this._context=t}Qp.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,qe);break}}},result:Ze};var Ku=new Wr,Gc,Kp,t1,_o,vo,Po={point:Ze,lineStart:function(){Po.point=v3},lineEnd:function(){Gc&&e1(Kp,t1),Po.point=Ze},polygonStart:function(){Gc=!0},polygonEnd:function(){Gc=null},result:function(){var t=+Ku;return Ku=new Wr,t}};function v3(t,e){Po.point=e1,Kp=_o=t,t1=vo=e}function e1(t,e){_o-=t,vo-=e,Ku.add(Ee(_o*_o+vo*vo)),_o=t,vo=e}let Dd,xs,Ed,Ld;class Rd{constructor(e){this._append=e==null?n1:y3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Ed||this._append!==xs){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ed=r,xs=this._append,Ld=this._,this._=i}this._+=Ld;break}}}result(){const e=this._;return this._="",e.length?e:null}}function n1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function y3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return n1;if(e!==Dd){const n=10**e;Dd=e,xs=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return xs}function Jf(t,e){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Lr(s,i(o))),o.result()}return a.area=function(s){return Lr(s,i(zn)),zn.result()},a.measure=function(s){return Lr(s,i(Po)),Po.result()},a.bounds=function(s){return Lr(s,i(_s)),_s.result()},a.centroid=function(s){return Lr(s,i(Ve)),Ve.result()},a.projection=function(s){return arguments.length?(i=s==null?(t=null,Yu):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(e=null,new Rd(n)):new Qp(e=s),typeof r!="function"&&o.pointRadius(r),a):e},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return e===null&&(o=new Rd(n)),a},a.projection(t).digits(n).context(e)}function ws(t){return{stream:Ks(t)}}function Ks(t){return function(e){var n=new tf;for(var r in t)n[r]=t[r];return n.stream=e,n}}function tf(){}tf.prototype={constructor:tf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qf(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Lr(n,t.stream(_s)),e(_s.result()),r!=null&&t.clipExtent(r),t}function Kf(t,e,n){return Qf(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,c])},n)}function r1(t,e,n){return Kf(t,[[0,0],e],n)}function i1(t,e,n){return Qf(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([a,s])},n)}function o1(t,e,n){return Qf(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,s])},n)}var Id=16,x3=gt(30*Yt);function Od(t,e){return+e?M3(t,e):w3(t)}function w3(t){return Ks({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function M3(t,e){function n(r,i,o,a,s,c,u,f,d,l,h,p,m,b){var v=u-r,x=f-i,S=v*v+x*x;if(S>4*e&&m--){var y=a+l,A=s+h,M=c+p,$=Ee(y*y+A*A+M*M),N=Ke(M/=$),D=Rt(Rt(M)-1)<ht||Rt(o-d)<ht?(o+d)/2:Vn(A,y),R=t(D,N),T=R[0],O=R[1],G=T-r,q=O-i,k=x*G-v*q;(k*k/S>e||Rt((v*G+x*q)/S-.5)>.3||a*l+s*h+c*p<x3)&&(n(r,i,o,a,s,c,T,O,D,y/=$,A/=$,M,m,b),b.point(T,O),n(T,O,D,y,A,M,u,f,d,l,h,p,m,b))}}return function(r){var i,o,a,s,c,u,f,d,l,h,p,m,b={point:v,lineStart:x,lineEnd:y,polygonStart:function(){r.polygonStart(),b.lineStart=A},polygonEnd:function(){r.polygonEnd(),b.lineStart=x}};function v(N,D){N=t(N,D),r.point(N[0],N[1])}function x(){d=NaN,b.point=S,r.lineStart()}function S(N,D){var R=Li([N,D]),T=t(N,D);n(d,l,f,h,p,m,d=T[0],l=T[1],f=N,h=R[0],p=R[1],m=R[2],Id,r),r.point(d,l)}function y(){b.point=v,r.lineEnd()}function A(){x(),b.point=M,b.lineEnd=$}function M(N,D){S(i=N,D),o=d,a=l,s=h,c=p,u=m,b.point=S}function $(){n(d,l,f,h,p,m,o,a,i,s,c,u,Id,r),b.lineEnd=y,y()}return b}}var $3=Ks({point:function(t,e){this.stream.point(t*Yt,e*Yt)}});function S3(t){return Ks({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function T3(t,e,n,r,i){function o(a,s){return a*=r,s*=i,[e+t*a,n-t*s]}return o.invert=function(a,s){return[(a-e)/t*r,(n-s)/t*i]},o}function Fd(t,e,n,r,i,o){if(!o)return T3(t,e,n,r,i);var a=gt(o),s=ft(o),c=a*t,u=s*t,f=a/t,d=s/t,l=(s*n-a*e)/t,h=(s*e+a*n)/t;function p(m,b){return m*=r,b*=i,[c*m-u*b+e,n-u*m-c*b]}return p.invert=function(m,b){return[r*(f*m-d*b+l),i*(h-d*m-f*b)]},p}function Tr(t){return a1(function(){return t})()}function a1(t){var e,n=150,r=480,i=250,o=0,a=0,s=0,c=0,u=0,f,d=0,l=1,h=1,p=null,m=Cd,b=null,v,x,S,y=Yu,A=.5,M,$,N,D,R;function T(k){return N(k[0]*Yt,k[1]*Yt)}function O(k){return k=N.invert(k[0],k[1]),k&&[k[0]*ye,k[1]*ye]}T.stream=function(k){return D&&R===k?D:D=$3(S3(f)(m(M(y(R=k)))))},T.preclip=function(k){return arguments.length?(m=k,p=void 0,q()):m},T.postclip=function(k){return arguments.length?(y=k,b=v=x=S=null,q()):y},T.clipAngle=function(k){return arguments.length?(m=+k?c3(p=k*Yt):(p=null,Cd),q()):p*ye},T.clipExtent=function(k){return arguments.length?(y=k==null?(b=v=x=S=null,Yu):Yp(b=+k[0][0],v=+k[0][1],x=+k[1][0],S=+k[1][1]),q()):b==null?null:[[b,v],[x,S]]},T.scale=function(k){return arguments.length?(n=+k,G()):n},T.translate=function(k){return arguments.length?(r=+k[0],i=+k[1],G()):[r,i]},T.center=function(k){return arguments.length?(o=k[0]%360*Yt,a=k[1]%360*Yt,G()):[o*ye,a*ye]},T.rotate=function(k){return arguments.length?(s=k[0]%360*Yt,c=k[1]%360*Yt,u=k.length>2?k[2]%360*Yt:0,G()):[s*ye,c*ye,u*ye]},T.angle=function(k){return arguments.length?(d=k%360*Yt,G()):d*ye},T.reflectX=function(k){return arguments.length?(l=k?-1:1,G()):l<0},T.reflectY=function(k){return arguments.length?(h=k?-1:1,G()):h<0},T.precision=function(k){return arguments.length?(M=Od($,A=k*k),q()):Ee(A)},T.fitExtent=function(k,Y){return Kf(T,k,Y)},T.fitSize=function(k,Y){return r1(T,k,Y)},T.fitWidth=function(k,Y){return i1(T,k,Y)},T.fitHeight=function(k,Y){return o1(T,k,Y)};function G(){var k=Fd(n,0,0,l,h,d).apply(null,e(o,a)),Y=Fd(n,r-k[0],i-k[1],l,h,d);return f=zp(s,c,u),$=Bu(e,Y),N=Bu(f,$),M=Od($,A),q()}function q(){return D=R=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&O,G()}}function tl(t){var e=0,n=yt/3,r=a1(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*Yt,n=o[1]*Yt):[e*ye,n*ye]},i}function A3(t){var e=gt(t);function n(r,i){return[r*e,ft(i)/e]}return n.invert=function(r,i){return[r/e,Ke(i*e)]},n}function C3(t,e){var n=ft(t),r=(n+ft(e))/2;if(Rt(r)<ht)return A3(t);var i=1+n*(2*r-n),o=Ee(i)/r;function a(s,c){var u=Ee(i-2*r*ft(c))/r;return[u*ft(s*=r),o-u*gt(s)]}return a.invert=function(s,c){var u=o-c,f=Vn(s,Rt(u))*Xe(u);return u*r<0&&(f-=yt*Xe(s)*Xe(u)),[f/r,Ke((i-(s*s+u*u)*r*r)/(2*r))]},a}function Ms(){return tl(C3).scale(155.424).center([0,33.6442])}function s1(){return Ms().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function N3(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function k3(){var t,e,n=s1(),r,i=Ms().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ms().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,u={point:function(l,h){c=[l,h]}};function f(l){var h=l[0],p=l[1];return c=null,r.point(h,p),c||(o.point(h,p),c)||(s.point(h,p),c)}f.invert=function(l){var h=n.scale(),p=n.translate(),m=(l[0]-p[0])/h,b=(l[1]-p[1])/h;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?i:b>=.166&&b<.234&&m>=-.214&&m<-.115?a:n).invert(l)},f.stream=function(l){return t&&e===l?t:t=N3([n.stream(e=l),i.stream(l),a.stream(l)])},f.precision=function(l){return arguments.length?(n.precision(l),i.precision(l),a.precision(l),d()):n.precision()},f.scale=function(l){return arguments.length?(n.scale(l),i.scale(l*.35),a.scale(l),f.translate(n.translate())):n.scale()},f.translate=function(l){if(!arguments.length)return n.translate();var h=n.scale(),p=+l[0],m=+l[1];return r=n.translate(l).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),o=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+ht,m+.12*h+ht],[p-.214*h-ht,m+.234*h-ht]]).stream(u),s=a.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+ht,m+.166*h+ht],[p-.115*h-ht,m+.234*h-ht]]).stream(u),d()},f.fitExtent=function(l,h){return Kf(f,l,h)},f.fitSize=function(l,h){return r1(f,l,h)},f.fitWidth=function(l,h){return i1(f,l,h)},f.fitHeight=function(l,h){return o1(f,l,h)};function d(){return t=e=null,f}return f.scale(1070)}function c1(t){return function(e,n){var r=gt(e),i=gt(n),o=t(r*i);return o===1/0?[2,0]:[o*i*ft(e),o*ft(n)]}}function Qo(t){return function(e,n){var r=Ee(e*e+n*n),i=t(r),o=ft(i),a=gt(i);return[Vn(e*o,r*a),Ke(r&&n*o/r)]}}var u1=c1(function(t){return Ee(2/(1+t))});u1.invert=Qo(function(t){return 2*Ke(t/2)});function D3(){return Tr(u1).scale(124.75).clipAngle(180-.001)}var f1=c1(function(t){return(t=qp(t))&&t/ft(t)});f1.invert=Qo(function(t){return t});function E3(){return Tr(f1).scale(79.4188).clipAngle(180-.001)}function tc(t,e){return[t,hs(Zf((Gt+e)/2))]}tc.invert=function(t,e){return[t,2*Ji(jp(e))-Gt]};function L3(){return l1(tc).scale(961/qe)}function l1(t){var e=Tr(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,a=null,s,c,u;e.scale=function(d){return arguments.length?(r(d),f()):r()},e.translate=function(d){return arguments.length?(i(d),f()):i()},e.center=function(d){return arguments.length?(n(d),f()):n()},e.clipExtent=function(d){return arguments.length?(d==null?a=s=c=u=null:(a=+d[0][0],s=+d[0][1],c=+d[1][0],u=+d[1][1]),f()):a==null?null:[[a,s],[c,u]]};function f(){var d=yt*r(),l=e(t3(e.rotate()).invert([0,0]));return o(a==null?[[l[0]-d,l[1]-d],[l[0]+d,l[1]+d]]:t===tc?[[Math.max(l[0]-d,a),s],[Math.min(l[0]+d,c),u]]:[[a,Math.max(l[1]-d,s)],[c,Math.min(l[1]+d,u)]])}return f()}function Ea(t){return Zf((Gt+t)/2)}function R3(t,e){var n=gt(t),r=t===e?ft(t):hs(n/gt(e))/hs(Ea(e)/Ea(t)),i=n*Bc(Ea(t),r)/r;if(!r)return tc;function o(a,s){i>0?s<-Gt+ht&&(s=-Gt+ht):s>Gt-ht&&(s=Gt-ht);var c=i/Bc(Ea(s),r);return[c*ft(r*a),i-c*gt(r*a)]}return o.invert=function(a,s){var c=i-s,u=Xe(r)*Ee(a*a+c*c),f=Vn(a,Rt(c))*Xe(c);return c*r<0&&(f-=yt*Xe(a)*Xe(c)),[f/r,2*Ji(Bc(i/u,1/r))-Gt]},o}function I3(){return tl(R3).scale(109.5).parallels([30,30])}function $s(t,e){return[t,e]}$s.invert=$s;function O3(){return Tr($s).scale(152.63)}function F3(t,e){var n=gt(t),r=t===e?ft(t):(n-gt(e))/(e-t),i=n/r+t;if(Rt(r)<ht)return $s;function o(a,s){var c=i-s,u=r*a;return[c*ft(u),i-c*gt(u)]}return o.invert=function(a,s){var c=i-s,u=Vn(a,Rt(c))*Xe(c);return c*r<0&&(u-=yt*Xe(a)*Xe(c)),[u/r,i-Xe(r)*Ee(a*a+c*c)]},o}function P3(){return tl(F3).scale(131.154).center([0,13.9389])}var So=1.340264,To=-.081106,Ao=893e-6,Co=.003796,Ss=Ee(3)/2,j3=12;function d1(t,e){var n=Ke(Ss*ft(e)),r=n*n,i=r*r*r;return[t*gt(n)/(Ss*(So+3*To*r+i*(7*Ao+9*Co*r))),n*(So+To*r+i*(Ao+Co*r))]}d1.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,o=0,a,s,c;o<j3&&(s=n*(So+To*r+i*(Ao+Co*r))-e,c=So+3*To*r+i*(7*Ao+9*Co*r),n-=a=s/c,r=n*n,i=r*r*r,!(Rt(a)<Pp));++o);return[Ss*t*(So+3*To*r+i*(7*Ao+9*Co*r))/gt(n),Ke(ft(n)/Ss)]};function q3(){return Tr(d1).scale(177.158)}function h1(t,e){var n=gt(e),r=gt(t)*n;return[n*ft(t)/r,ft(e)/r]}h1.invert=Qo(Ji);function z3(){return Tr(h1).scale(144.049).clipAngle(60)}function p1(t,e){return[gt(e)*ft(t),ft(e)]}p1.invert=Qo(Ke);function U3(){return Tr(p1).scale(249.5).clipAngle(90+ht)}function m1(t,e){var n=gt(e),r=1+gt(t)*n;return[n*ft(t)/r,ft(e)/r]}m1.invert=Qo(function(t){return 2*Ji(t)});function B3(){return Tr(m1).scale(250).clipAngle(142)}function b1(t,e){return[hs(Zf((Gt+e)/2)),-t]}b1.invert=function(t,e){return[-e,2*Ji(jp(t))-Gt]};function H3(){var t=l1(b1),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Dn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ec(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ef=Symbol("implicit");function el(){var t=new Do,e=[],n=[],r=ef;function i(o){let a=t.get(o);if(a===void 0){if(r!==ef)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Do;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return el(e,n).unknown(r)},Dn.apply(i,arguments),i}function nc(){var t=el().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,c=0,u=0,f=.5;delete t.unknown;function d(){var l=e().length,h=i<r,p=h?i:r,m=h?r:i;o=(m-p)/Math.max(1,l-c+u*2),s&&(o=Math.floor(o)),p+=(m-p-o*(l-c))*f,a=o*(1-c),s&&(p=Math.round(p),a=Math.round(a));var b=Cu(l).map(function(v){return p+o*v});return n(h?b.reverse():b)}return t.domain=function(l){return arguments.length?(e(l),d()):e()},t.range=function(l){return arguments.length?([r,i]=l,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(l){return[r,i]=l,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(l){return arguments.length?(s=!!l,d()):s},t.padding=function(l){return arguments.length?(c=Math.min(1,u=+l),d()):c},t.paddingInner=function(l){return arguments.length?(c=Math.min(1,l),d()):c},t.paddingOuter=function(l){return arguments.length?(u=+l,d()):u},t.align=function(l){return arguments.length?(f=Math.max(0,Math.min(1,l)),d()):f},t.copy=function(){return nc(e(),[r,i]).round(s).paddingInner(c).paddingOuter(u).align(f)},Dn.apply(d(),arguments)}function g1(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return g1(e())},t}function Y3(){return g1(nc.apply(null,arguments).paddingInner(1))}function W3(t){return function(){return t}}function nf(t){return+t}var Pd=[0,1];function Je(t){return t}function rf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:W3(isNaN(e)?NaN:.5)}function G3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function V3(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=rf(i,r),o=n(a,o)):(r=rf(r,i),o=n(o,a)),function(s){return o(r(s))}}function X3(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=rf(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var c=If(t,s,1,r)-1;return o[c](i[c](s))}}function Ko(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rc(){var t=Pd,e=Pd,n=Jo,r,i,o,a=Je,s,c,u;function f(){var l=Math.min(t.length,e.length);return a!==Je&&(a=G3(t[0],t[l-1])),s=l>2?X3:V3,c=u=null,d}function d(l){return l==null||isNaN(l=+l)?o:(c||(c=s(t.map(r),e,n)))(r(a(l)))}return d.invert=function(l){return a(i((u||(u=s(e,t.map(r),le)))(l)))},d.domain=function(l){return arguments.length?(t=Array.from(l,nf),f()):t.slice()},d.range=function(l){return arguments.length?(e=Array.from(l),f()):e.slice()},d.rangeRound=function(l){return e=Array.from(l),n=Hf,f()},d.clamp=function(l){return arguments.length?(a=l?!0:Je,f()):a!==Je},d.interpolate=function(l){return arguments.length?(n=l,f()):n},d.unknown=function(l){return arguments.length?(o=l,d):o},function(l,h){return r=l,i=h,f()}}function _1(){return rc()(Je,Je)}function Z3(t,e,n,r){var i=Tu(t,e,n),o;switch(r=Oo(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Qw(i,a))&&(r.precision=o),Fp(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Kw(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Jw(i))&&(r.precision=o-(r.type==="%")*2);break}}return Zi(r)}function ta(t){var e=t.domain;return t.ticks=function(n){var r=e();return rs(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Z3(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],c,u,f=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);f-- >0;){if(u=Su(a,s,n),u===c)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function nl(){var t=_1();return t.copy=function(){return Ko(t,nl())},Dn.apply(t,arguments),ta(t)}function v1(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,nf),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return v1(t).unknown(e)},t=arguments.length?Array.from(t,nf):[0,1],ta(n)}function y1(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function jd(t){return Math.log(t)}function qd(t){return Math.exp(t)}function J3(t){return-Math.log(-t)}function Q3(t){return-Math.exp(-t)}function K3(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t5(t){return t===10?K3:t===Math.E?Math.exp:e=>Math.pow(t,e)}function e5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function zd(t){return(e,n)=>-t(-e,n)}function x1(t){const e=t(jd,qd),n=e.domain;let r=10,i,o;function a(){return i=e5(r),o=t5(r),n()[0]<0?(i=zd(i),o=zd(o),t(J3,Q3)):t(jd,qd),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const c=n();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let l=i(u),h=i(f),p,m;const b=s==null?10:+s;let v=[];if(!(r%1)&&h-l<b){if(l=Math.floor(l),h=Math.ceil(h),u>0){for(;l<=h;++l)for(p=1;p<r;++p)if(m=l<0?p/o(-l):p*o(l),!(m<u)){if(m>f)break;v.push(m)}}else for(;l<=h;++l)for(p=r-1;p>=1;--p)if(m=l>0?p/o(-l):p*o(l),!(m<u)){if(m>f)break;v.push(m)}v.length*2<b&&(v=rs(u,f,b))}else v=rs(l,h,Math.min(h-l,b)).map(o);return d?v.reverse():v},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Oo(c)).precision==null&&(c.trim=!0),c=Zi(c)),s===1/0)return c;const u=Math.max(1,r*s/e.ticks().length);return f=>{let d=f/o(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=u?c(f):""}},e.nice=()=>n(y1(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function w1(){const t=x1(rc()).domain([1,10]);return t.copy=()=>Ko(t,w1()).base(t.base()),Dn.apply(t,arguments),t}function Ud(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Bd(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function M1(t){var e=1,n=t(Ud(e),Bd(e));return n.constant=function(r){return arguments.length?t(Ud(e=+r),Bd(e)):e},ta(n)}function $1(){var t=M1(rc());return t.copy=function(){return Ko(t,$1()).constant(t.constant())},Dn.apply(t,arguments)}function Hd(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function n5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function r5(t){return t<0?-t*t:t*t}function S1(t){var e=t(Je,Je),n=1;function r(){return n===1?t(Je,Je):n===.5?t(n5,r5):t(Hd(n),Hd(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ta(e)}function T1(){var t=S1(rc());return t.copy=function(){return Ko(t,T1()).exponent(t.exponent())},Dn.apply(t,arguments),t}function A1(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=Jv(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[If(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(wn),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return A1().domain(t).range(e).unknown(r)},Dn.apply(o,arguments)}function C1(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[If(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return C1().domain(t).range(e).unknown(n)},Dn.apply(i,arguments)}const Vc=new Date,Xc=new Date;function Jt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let u;do c.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return c},i.filter=o=>Jt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Vc.setTime(+o),Xc.setTime(+a),t(Vc),t(Xc),Math.floor(n(Vc,Xc))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Ts=Jt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ts.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Jt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ts);Ts.range;const Bn=1e3,Qe=Bn*60,Hn=Qe*60,Xn=Hn*24,rl=Xn*7,Yd=Xn*30,Zc=Xn*365,an=Jt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Bn)},(t,e)=>(e-t)/Bn,t=>t.getUTCSeconds());an.range;const ea=Jt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bn)},(t,e)=>{t.setTime(+t+e*Qe)},(t,e)=>(e-t)/Qe,t=>t.getMinutes());ea.range;const na=Jt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Qe)},(t,e)=>(e-t)/Qe,t=>t.getUTCMinutes());na.range;const ra=Jt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bn-t.getMinutes()*Qe)},(t,e)=>{t.setTime(+t+e*Hn)},(t,e)=>(e-t)/Hn,t=>t.getHours());ra.range;const ia=Jt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Hn)},(t,e)=>(e-t)/Hn,t=>t.getUTCHours());ia.range;const ni=Jt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qe)/Xn,t=>t.getDate()-1);ni.range;const ic=Jt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xn,t=>t.getUTCDate()-1);ic.range;const oc=Jt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xn,t=>Math.floor(t/Xn));oc.range;function ri(t){return Jt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Qe)/rl)}const Ii=ri(0),jo=ri(1),N1=ri(2),k1=ri(3),Qr=ri(4),D1=ri(5),E1=ri(6);Ii.range;jo.range;N1.range;k1.range;Qr.range;D1.range;E1.range;function ii(t){return Jt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/rl)}const Oi=ii(0),qo=ii(1),L1=ii(2),R1=ii(3),Kr=ii(4),I1=ii(5),O1=ii(6);Oi.range;qo.range;L1.range;R1.range;Kr.range;I1.range;O1.range;const oa=Jt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());oa.range;const aa=Jt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());aa.range;const ln=Jt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ln.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ln.range;const dn=Jt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());dn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});dn.range;function F1(t,e,n,r,i,o){const a=[[an,1,Bn],[an,5,5*Bn],[an,15,15*Bn],[an,30,30*Bn],[o,1,Qe],[o,5,5*Qe],[o,15,15*Qe],[o,30,30*Qe],[i,1,Hn],[i,3,3*Hn],[i,6,6*Hn],[i,12,12*Hn],[r,1,Xn],[r,2,2*Xn],[n,1,rl],[e,1,Yd],[e,3,3*Yd],[t,1,Zc]];function s(u,f,d){const l=f<u;l&&([u,f]=[f,u]);const h=d&&typeof d.range=="function"?d:c(u,f,d),p=h?h.range(u,+f+1):[];return l?p.reverse():p}function c(u,f,d){const l=Math.abs(f-u)/d,h=Hs(([,,b])=>b).right(a,l);if(h===a.length)return t.every(Tu(u/Zc,f/Zc,d));if(h===0)return Ts.every(Math.max(Tu(u,f,d),1));const[p,m]=a[l/a[h-1][2]<a[h][2]/l?h-1:h];return p.every(m)}return[s,c]}const[i5,o5]=F1(dn,aa,Oi,oc,ia,na),[a5,s5]=F1(ln,oa,Ii,ni,ra,ea);function Jc(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qc(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ao(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function c5(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=so(i),f=co(i),d=so(o),l=co(o),h=so(a),p=co(a),m=so(s),b=co(s),v=so(c),x=co(c),S={a:rt,A:Q,b:E,B:W,c:null,d:Jd,e:Jd,f:D5,g:z5,G:B5,H:C5,I:N5,j:k5,L:P1,m:E5,M:L5,p:Z,q:B,Q:th,s:eh,S:R5,u:I5,U:O5,V:F5,w:P5,W:j5,x:null,X:null,y:q5,Y:U5,Z:H5,"%":Kd},y={a:P,A:z,b:U,B:tt,c:null,d:Qd,e:Qd,f:V5,g:i6,G:a6,H:Y5,I:W5,j:G5,L:q1,m:X5,M:Z5,p:I,q:K,Q:th,s:eh,S:J5,u:Q5,U:K5,V:t6,w:e6,W:n6,x:null,X:null,y:r6,Y:o6,Z:s6,"%":Kd},A={a:R,A:T,b:O,B:G,c:q,d:Xd,e:Xd,f:$5,g:Vd,G:Gd,H:Zd,I:Zd,j:y5,L:M5,m:v5,M:x5,p:D,q:_5,Q:T5,s:A5,S:w5,u:h5,U:p5,V:m5,w:d5,W:b5,x:k,X:Y,y:Vd,Y:Gd,Z:g5,"%":S5};S.x=M(n,S),S.X=M(r,S),S.c=M(e,S),y.x=M(n,y),y.X=M(r,y),y.c=M(e,y);function M(L,F){return function(V){var C=[],X=-1,H=0,et=L.length,nt,J,st;for(V instanceof Date||(V=new Date(+V));++X<et;)L.charCodeAt(X)===37&&(C.push(L.slice(H,X)),(J=Wd[nt=L.charAt(++X)])!=null?nt=L.charAt(++X):J=nt==="e"?" ":"0",(st=F[nt])&&(nt=st(V,J)),C.push(nt),H=X+1);return C.push(L.slice(H,X)),C.join("")}}function $(L,F){return function(V){var C=ao(1900,void 0,1),X=N(C,L,V+="",0),H,et;if(X!=V.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(F&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(H=Qc(ao(C.y,0,1)),et=H.getUTCDay(),H=et>4||et===0?qo.ceil(H):qo(H),H=ic.offset(H,(C.V-1)*7),C.y=H.getUTCFullYear(),C.m=H.getUTCMonth(),C.d=H.getUTCDate()+(C.w+6)%7):(H=Jc(ao(C.y,0,1)),et=H.getDay(),H=et>4||et===0?jo.ceil(H):jo(H),H=ni.offset(H,(C.V-1)*7),C.y=H.getFullYear(),C.m=H.getMonth(),C.d=H.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),et="Z"in C?Qc(ao(C.y,0,1)).getUTCDay():Jc(ao(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(et+5)%7:C.w+C.U*7-(et+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,Qc(C)):Jc(C)}}function N(L,F,V,C){for(var X=0,H=F.length,et=V.length,nt,J;X<H;){if(C>=et)return-1;if(nt=F.charCodeAt(X++),nt===37){if(nt=F.charAt(X++),J=A[nt in Wd?F.charAt(X++):nt],!J||(C=J(L,V,C))<0)return-1}else if(nt!=V.charCodeAt(C++))return-1}return C}function D(L,F,V){var C=u.exec(F.slice(V));return C?(L.p=f.get(C[0].toLowerCase()),V+C[0].length):-1}function R(L,F,V){var C=h.exec(F.slice(V));return C?(L.w=p.get(C[0].toLowerCase()),V+C[0].length):-1}function T(L,F,V){var C=d.exec(F.slice(V));return C?(L.w=l.get(C[0].toLowerCase()),V+C[0].length):-1}function O(L,F,V){var C=v.exec(F.slice(V));return C?(L.m=x.get(C[0].toLowerCase()),V+C[0].length):-1}function G(L,F,V){var C=m.exec(F.slice(V));return C?(L.m=b.get(C[0].toLowerCase()),V+C[0].length):-1}function q(L,F,V){return N(L,e,F,V)}function k(L,F,V){return N(L,n,F,V)}function Y(L,F,V){return N(L,r,F,V)}function rt(L){return a[L.getDay()]}function Q(L){return o[L.getDay()]}function E(L){return c[L.getMonth()]}function W(L){return s[L.getMonth()]}function Z(L){return i[+(L.getHours()>=12)]}function B(L){return 1+~~(L.getMonth()/3)}function P(L){return a[L.getUTCDay()]}function z(L){return o[L.getUTCDay()]}function U(L){return c[L.getUTCMonth()]}function tt(L){return s[L.getUTCMonth()]}function I(L){return i[+(L.getUTCHours()>=12)]}function K(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var F=M(L+="",S);return F.toString=function(){return L},F},parse:function(L){var F=$(L+="",!1);return F.toString=function(){return L},F},utcFormat:function(L){var F=M(L+="",y);return F.toString=function(){return L},F},utcParse:function(L){var F=$(L+="",!0);return F.toString=function(){return L},F}}}var Wd={"-":"",_:" ",0:"0"},re=/^\s*\d+/,u5=/^%/,f5=/[\\^$*+?|[\]().{}]/g;function Dt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function l5(t){return t.replace(f5,"\\$&")}function so(t){return new RegExp("^(?:"+t.map(l5).join("|")+")","i")}function co(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function d5(t,e,n){var r=re.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function h5(t,e,n){var r=re.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function p5(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function m5(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function b5(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Gd(t,e,n){var r=re.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Vd(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g5(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _5(t,e,n){var r=re.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function v5(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Xd(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function y5(t,e,n){var r=re.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Zd(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function x5(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function w5(t,e,n){var r=re.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function M5(t,e,n){var r=re.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function $5(t,e,n){var r=re.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function S5(t,e,n){var r=u5.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function T5(t,e,n){var r=re.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function A5(t,e,n){var r=re.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Jd(t,e){return Dt(t.getDate(),e,2)}function C5(t,e){return Dt(t.getHours(),e,2)}function N5(t,e){return Dt(t.getHours()%12||12,e,2)}function k5(t,e){return Dt(1+ni.count(ln(t),t),e,3)}function P1(t,e){return Dt(t.getMilliseconds(),e,3)}function D5(t,e){return P1(t,e)+"000"}function E5(t,e){return Dt(t.getMonth()+1,e,2)}function L5(t,e){return Dt(t.getMinutes(),e,2)}function R5(t,e){return Dt(t.getSeconds(),e,2)}function I5(t){var e=t.getDay();return e===0?7:e}function O5(t,e){return Dt(Ii.count(ln(t)-1,t),e,2)}function j1(t){var e=t.getDay();return e>=4||e===0?Qr(t):Qr.ceil(t)}function F5(t,e){return t=j1(t),Dt(Qr.count(ln(t),t)+(ln(t).getDay()===4),e,2)}function P5(t){return t.getDay()}function j5(t,e){return Dt(jo.count(ln(t)-1,t),e,2)}function q5(t,e){return Dt(t.getFullYear()%100,e,2)}function z5(t,e){return t=j1(t),Dt(t.getFullYear()%100,e,2)}function U5(t,e){return Dt(t.getFullYear()%1e4,e,4)}function B5(t,e){var n=t.getDay();return t=n>=4||n===0?Qr(t):Qr.ceil(t),Dt(t.getFullYear()%1e4,e,4)}function H5(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Dt(e/60|0,"0",2)+Dt(e%60,"0",2)}function Qd(t,e){return Dt(t.getUTCDate(),e,2)}function Y5(t,e){return Dt(t.getUTCHours(),e,2)}function W5(t,e){return Dt(t.getUTCHours()%12||12,e,2)}function G5(t,e){return Dt(1+ic.count(dn(t),t),e,3)}function q1(t,e){return Dt(t.getUTCMilliseconds(),e,3)}function V5(t,e){return q1(t,e)+"000"}function X5(t,e){return Dt(t.getUTCMonth()+1,e,2)}function Z5(t,e){return Dt(t.getUTCMinutes(),e,2)}function J5(t,e){return Dt(t.getUTCSeconds(),e,2)}function Q5(t){var e=t.getUTCDay();return e===0?7:e}function K5(t,e){return Dt(Oi.count(dn(t)-1,t),e,2)}function z1(t){var e=t.getUTCDay();return e>=4||e===0?Kr(t):Kr.ceil(t)}function t6(t,e){return t=z1(t),Dt(Kr.count(dn(t),t)+(dn(t).getUTCDay()===4),e,2)}function e6(t){return t.getUTCDay()}function n6(t,e){return Dt(qo.count(dn(t)-1,t),e,2)}function r6(t,e){return Dt(t.getUTCFullYear()%100,e,2)}function i6(t,e){return t=z1(t),Dt(t.getUTCFullYear()%100,e,2)}function o6(t,e){return Dt(t.getUTCFullYear()%1e4,e,4)}function a6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Kr(t):Kr.ceil(t),Dt(t.getUTCFullYear()%1e4,e,4)}function s6(){return"+0000"}function Kd(){return"%"}function th(t){return+t}function eh(t){return Math.floor(+t/1e3)}var di,il,sa;c6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function c6(t){return di=c5(t),il=di.format,di.parse,sa=di.utcFormat,di.utcParse,di}function u6(t){return new Date(t)}function f6(t){return t instanceof Date?+t:+new Date(+t)}function ol(t,e,n,r,i,o,a,s,c,u){var f=_1(),d=f.invert,l=f.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),b=u("%I %p"),v=u("%a %d"),x=u("%b %d"),S=u("%B"),y=u("%Y");function A(M){return(c(M)<M?h:s(M)<M?p:a(M)<M?m:o(M)<M?b:r(M)<M?i(M)<M?v:x:n(M)<M?S:y)(M)}return f.invert=function(M){return new Date(d(M))},f.domain=function(M){return arguments.length?l(Array.from(M,f6)):l().map(u6)},f.ticks=function(M){var $=l();return t($[0],$[$.length-1],M??10)},f.tickFormat=function(M,$){return $==null?A:u($)},f.nice=function(M){var $=l();return(!M||typeof M.range!="function")&&(M=e($[0],$[$.length-1],M??10)),M?l(y1($,M)):f},f.copy=function(){return Ko(f,ol(t,e,n,r,i,o,a,s,c,u))},f}function l6(){return Dn.apply(ol(a5,s5,ln,oa,Ii,ni,ra,ea,an,il).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function d6(){return Dn.apply(ol(i5,o5,dn,aa,Oi,ic,ia,na,an,sa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ac(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function sc(){var t=0,e=.5,n=1,r=1,i,o,a,s,c,u=Je,f,d=!1,l;function h(m){return isNaN(m=+m)?l:(m=.5+((m=+f(m))-o)*(r*m<r*o?s:c),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,i=f(t=+t),o=f(e=+e),a=f(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(b){var v,x,S;return arguments.length?([v,x,S]=b,u=Zs(m,[v,x,S]),h):[u(0),u(.5),u(1)]}}return h.range=p(Jo),h.rangeRound=p(Hf),h.unknown=function(m){return arguments.length?(l=m,h):l},function(m){return f=m,i=m(t),o=m(e),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,h}}function U1(){var t=ta(sc()(Je));return t.copy=function(){return ac(t,U1())},ec.apply(t,arguments)}function B1(){var t=x1(sc()).domain([.1,1,10]);return t.copy=function(){return ac(t,B1()).base(t.base())},ec.apply(t,arguments)}function H1(){var t=M1(sc());return t.copy=function(){return ac(t,H1()).constant(t.constant())},ec.apply(t,arguments)}function Y1(){var t=S1(sc());return t.copy=function(){return ac(t,Y1()).exponent(t.exponent())},ec.apply(t,arguments)}function lt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const h6=lt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),p6=lt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),m6=lt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),b6=lt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),g6=lt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),_6=lt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),v6=lt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),y6=lt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),x6=lt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),w6=lt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),M6=lt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),qt=t=>dx(t[t.length-1]);var W1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(lt);const G1=qt(W1);var V1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(lt);const X1=qt(V1);var Z1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(lt);const J1=qt(Z1);var Q1=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(lt);const K1=qt(Q1);var of=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(lt);const As=qt(of);var tm=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(lt);const em=qt(tm);var af=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(lt);const Cs=qt(af);var nm=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(lt);const rm=qt(nm);var im=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(lt);const om=qt(im);var am=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(lt);const sm=qt(am);var cm=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(lt);const um=qt(cm);var fm=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(lt);const lm=qt(fm);var dm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(lt);const hm=qt(dm);var pm=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(lt);const mm=qt(pm);var bm=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(lt);const gm=qt(bm);var _m=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(lt);const vm=qt(_m);var ym=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(lt);const xm=qt(ym);var wm=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(lt);const Mm=qt(wm);var $m=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(lt);const Sm=qt($m);var Tm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(lt);const Am=qt(Tm);var Cm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(lt);const Nm=qt(Cm);var km=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(lt);const Dm=qt(km);var Em=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(lt);const Lm=qt(Em);var Rm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(lt);const Im=qt(Rm);var Om=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(lt);const Fm=qt(Om);var Pm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(lt);const jm=qt(Pm);var qm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(lt);const zm=qt(qm);function Um(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Bm=Yf(An(300,.5,0),An(-240,.5,1));var Hm=Yf(An(-100,.75,.35),An(80,1.5,.8)),Ym=Yf(An(260,.75,.35),An(80,1.5,.8)),La=An();function Wm(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return La.h=360*t-100,La.s=1.5-1.5*e,La.l=.8-.9*e,La+""}var Ra=vr(),$6=Math.PI/3,S6=Math.PI*2/3;function Gm(t){var e;return t=(.5-t)*Math.PI,Ra.r=255*(e=Math.sin(t))*e,Ra.g=255*(e=Math.sin(t+$6))*e,Ra.b=255*(e=Math.sin(t+S6))*e,Ra+""}function Vm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function cc(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Xm=cc(lt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Zm=cc(lt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Jm=cc(lt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Qm=cc(lt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function hi(t){return function(){return t}}const Km=Math.cos,al=Math.min,Ns=Math.sin,Qt=Math.sqrt,nh=1e-12,ks=Math.PI,uc=2*ks;function T6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ip(e)}function A6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function tb(t){this._context=t}tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fc(t){return new tb(t)}function C6(t){return t[0]}function N6(t){return t[1]}function k6(t,e){var n=hi(!0),r=null,i=fc,o=null,a=T6(s);t=typeof t=="function"?t:t===void 0?C6:hi(t),e=typeof e=="function"?e:e===void 0?N6:hi(e);function s(c){var u,f=(c=A6(c)).length,d,l=!1,h;for(r==null&&(o=i(h=a())),u=0;u<=f;++u)!(u<f&&n(d=c[u],u,c))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(d,u,c),+e(d,u,c));if(h)return o=null,h+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:hi(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:hi(+c),s):e},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:hi(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}class eb{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function D6(t){return new eb(t,!0)}function E6(t){return new eb(t,!1)}const L6=Qt(3),nb={draw(t,e){const n=Qt(e+al(e/28,.75))*.59436,r=n/2,i=r*L6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},zo={draw(t,e){const n=Qt(e/ks);t.moveTo(n,0),t.arc(0,0,n,0,uc)}},rb={draw(t,e){const n=Qt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ib=Qt(1/3),R6=ib*2,ob={draw(t,e){const n=Qt(e/R6),r=n*ib;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ab={draw(t,e){const n=Qt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},sb={draw(t,e){const n=Qt(e-al(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},cb={draw(t,e){const n=Qt(e),r=-n/2;t.rect(r,r,n,n)}},ub={draw(t,e){const n=Qt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},I6=.8908130915292852,fb=Ns(ks/10)/Ns(7*ks/10),O6=Ns(uc/10)*fb,F6=-Km(uc/10)*fb,lb={draw(t,e){const n=Qt(e*I6),r=O6*n,i=F6*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=uc*o/5,s=Km(a),c=Ns(a);t.lineTo(c*n,-s*n),t.lineTo(s*r-c*i,c*r+s*i)}t.closePath()}},Kc=Qt(3),db={draw(t,e){const n=-Qt(e/(Kc*3));t.moveTo(0,n*2),t.lineTo(-Kc*n,-n),t.lineTo(Kc*n,-n),t.closePath()}},P6=Qt(3),hb={draw(t,e){const n=Qt(e)*.6824,r=n/2,i=n*P6/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},Ue=-.5,Be=Qt(3)/2,sf=1/Qt(12),j6=(sf/2+1)*3,pb={draw(t,e){const n=Qt(e/j6),r=n/2,i=n*sf,o=r,a=n*sf+n,s=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,c),t.lineTo(Ue*r-Be*i,Be*r+Ue*i),t.lineTo(Ue*o-Be*a,Be*o+Ue*a),t.lineTo(Ue*s-Be*c,Be*s+Ue*c),t.lineTo(Ue*r+Be*i,Ue*i-Be*r),t.lineTo(Ue*o+Be*a,Ue*a-Be*o),t.lineTo(Ue*s+Be*c,Ue*c-Be*s),t.closePath()}},mb={draw(t,e){const n=Qt(e-al(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},q6=[zo,rb,ob,cb,lb,db,pb],z6=[zo,sb,mb,hb,nb,ub,ab];function yr(){}function Ds(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function lc(t){this._context=t}lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ds(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ds(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function U6(t){return new lc(t)}function bb(t){this._context=t}bb.prototype={areaStart:yr,areaEnd:yr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ds(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function B6(t){return new bb(t)}function gb(t){this._context=t}gb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ds(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function H6(t){return new gb(t)}function _b(t,e){this._basis=new lc(t),this._beta=e}_b.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,a=e[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+c*o),this._beta*e[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Y6=(function t(e){function n(r){return e===1?new lc(r):new _b(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Es(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function sl(t,e){this._context=t,this._k=(1-e)/6}sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Es(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Es(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const W6=(function t(e){function n(r){return new sl(r,e)}return n.tension=function(r){return t(+r)},n})(0);function cl(t,e){this._context=t,this._k=(1-e)/6}cl.prototype={areaStart:yr,areaEnd:yr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Es(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const G6=(function t(e){function n(r){return new cl(r,e)}return n.tension=function(r){return t(+r)},n})(0);function ul(t,e){this._context=t,this._k=(1-e)/6}ul.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Es(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const V6=(function t(e){function n(r){return new ul(r,e)}return n.tension=function(r){return t(+r)},n})(0);function fl(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>nh){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>nh){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function vb(t,e){this._context=t,this._alpha=e}vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:fl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const X6=(function t(e){function n(r){return e?new vb(r,e):new sl(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function yb(t,e){this._context=t,this._alpha=e}yb.prototype={areaStart:yr,areaEnd:yr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:fl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Z6=(function t(e){function n(r){return e?new yb(r,e):new cl(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function xb(t,e){this._context=t,this._alpha=e}xb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const J6=(function t(e){function n(r){return e?new xb(r,e):new ul(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function wb(t){this._context=t}wb.prototype={areaStart:yr,areaEnd:yr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Q6(t){return new wb(t)}function rh(t){return t<0?-1:1}function ih(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(rh(o)+rh(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function oh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function tu(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Ls(t){this._context=t}Ls.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tu(this,this._t0,oh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,tu(this,oh(this,n=ih(this,t,e)),n);break;default:tu(this,this._t0,n=ih(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Mb(t){this._context=new $b(t)}(Mb.prototype=Object.create(Ls.prototype)).point=function(t,e){Ls.prototype.point.call(this,e,t)};function $b(t){this._context=t}$b.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function K6(t){return new Ls(t)}function t4(t){return new Mb(t)}function Sb(t){this._context=t}Sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=ah(t),i=ah(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ah(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function e4(t){return new Sb(t)}function dc(t,e){this._context=t,this._t=e}dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function n4(t){return new dc(t,.5)}function r4(t){return new dc(t,0)}function i4(t){return new dc(t,1)}function yo(t,e,n){this.k=t,this.x=e,this.y=n}yo.prototype={constructor:yo,scale:function(t){return t===1?this:new yo(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new yo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};yo.prototype;function xr(t){return t!=null&&!Number.isNaN(t)}function Fi(t,e){return+xr(e)-+xr(t)||wn(t,e)}function cf(t,e){return+xr(e)-+xr(t)||Yr(t,e)}function ll(t){return t!=null&&`${t}`!=""}function Tb(t){return isFinite(t)?t:NaN}function hc(t){return t>0&&isFinite(t)?t:NaN}function dl(t){return t<0&&isFinite(t)?t:NaN}function o4(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${a4(t.getUTCFullYear())}-${qn(t.getUTCMonth()+1,2)}-${qn(t.getUTCDate(),2)}${n||r||i||o?`T${qn(n,2)}:${qn(r,2)}${i||o?`:${qn(i,2)}${o?`.${qn(o,3)}`:""}`:""}Z`:""}`}function a4(t){return t<0?`-${qn(-t,6)}`:t>9999?`+${qn(t,6)}`:qn(t,4)}function qn(t,e){return`${t}`.padStart(e,"0")}const s4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Ab(t,e){return s4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}function Pi(t){if(t==null)return;const e=t[0],n=t[t.length-1];return Yr(e,n)}const _i=1e3,ur=_i*60,fr=ur*60,Cn=fr*24,bn=Cn*7,zr=Cn*30,or=Cn*365,eu=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",_i],["5 seconds",5*_i],["15 seconds",15*_i],["30 seconds",30*_i],["minute",ur],["5 minutes",5*ur],["15 minutes",15*ur],["30 minutes",30*ur],["hour",fr],["3 hours",3*fr],["6 hours",6*fr],["12 hours",12*fr],["day",Cn],["2 days",2*Cn],["week",bn],["2 weeks",2*bn],["month",zr],["3 months",3*zr],["6 months",6*zr],["year",or],["2 years",2*or],["5 years",5*or],["10 years",10*or],["20 years",20*or],["50 years",50*or],["100 years",100*or]],hl=new Map([["second",_i],["minute",ur],["hour",fr],["day",Cn],["monday",bn],["tuesday",bn],["wednesday",bn],["thursday",bn],["friday",bn],["saturday",bn],["sunday",bn],["week",bn],["month",zr],["year",or]]),Cb=new Map([["second",an],["minute",ea],["hour",ra],["day",ni],["monday",jo],["tuesday",N1],["wednesday",k1],["thursday",Qr],["friday",D1],["saturday",E1],["sunday",Ii],["week",Ii],["month",oa],["year",ln]]),pl=new Map([["second",an],["minute",na],["hour",ia],["day",oc],["monday",qo],["tuesday",L1],["wednesday",R1],["thursday",Kr],["friday",I1],["saturday",O1],["sunday",Oi],["week",Oi],["month",aa],["year",dn]]),ca=Symbol("intervalDuration"),pc=Symbol("intervalType");for(const[t,e]of Cb)e[ca]=hl.get(t),e[pc]="time";for(const[t,e]of pl)e[ca]=hl.get(t),e[pc]="utc";const xo=[["year",dn,"utc"],["month",aa,"utc"],["day",oc,"utc",6*zr],["hour",ia,"utc",3*Cn],["minute",na,"utc",6*fr],["second",an,"utc",30*ur]],Va=[["year",ln,"time"],["month",oa,"time"],["day",ni,"time",6*zr],["hour",ra,"time",3*Cn],["minute",ea,"time",6*fr],["second",an,"time",30*ur]],c4=[xo[0],Va[0],xo[1],Va[1],xo[2],Va[2],...xo.slice(3)];function Nb(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(e);switch(r&&(e=e.slice(r[0].length),n=+r[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let i=pl.get(e);if(!i)throw new Error(`unknown interval: ${t}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function kb(t){return Eb(Nb(t),"time")}function Db(t){return Eb(Nb(t),"utc")}function Eb([t,e],n){let r=(n==="time"?Cb:pl).get(t);return e>1&&(r=r.every(e),r[ca]=hl.get(t)*e,r[pc]=n),r}function sh(t,e){if(!(e>1))return;const n=t[ca];if(!eu.some(([,i])=>i===n)||n%Cn===0&&Cn<n&&n<zr)return;const[r]=eu[Hs(([,i])=>Math.log(i)).center(eu,Math.log(n*e))];return(t[pc]==="time"?kb:Db)(r)}function ch(t,e,n){const r=e==="time"?il:sa;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=u4(n);switch(t){case"millisecond":return pi(r(".%L"),r(":%M:%S"),i);case"second":return pi(r(":%S"),r("%-I:%M"),i);case"minute":return pi(r("%-I:%M"),r("%p"),i);case"hour":return pi(r("%-I %p"),r("%b %-d"),i);case"day":return pi(r("%-d"),r("%b"),i);case"month":return pi(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function u4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function f4(t){return t==="time"?Va:t==="utc"?xo:c4}function l4(t,e,n){const r=Tn(e2(e,(i,o)=>Math.abs(o-i)));if(r<1e3)return ch("millisecond","utc",n);for(const[i,o,a,s]of f4(t)){if(r>s||i==="hour"&&!r)break;if(e.every(c=>o.floor(c)>=c))return ch(i,a,n)}}function pi(t,e,n){return(r,i,o)=>{const a=t(r,i),s=e(r,i),c=i-Pi(o);return i!==c&&o[c]!==void 0&&s===e(o[c],c)?a:n(a,s)}}const ml=Object.getPrototypeOf(Uint8Array),d4=Object.prototype.toString;function ua(t){return t instanceof Array||t instanceof ml}function Lb(t){return t instanceof ml&&!h4(t)}function Rb(t){return t?.prototype instanceof ml&&!p4(t)}function h4(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function p4(t){return t===BigInt64Array||t===BigUint64Array}const m4=Symbol("reindex");function wr(t,e,n){const r=typeof e;return r==="string"?Ub(t)?bl(t.getChild(e),n):uh(t,g4(e),n):r==="function"?uh(t,e,n):r==="number"||e instanceof Date||r==="boolean"?ge(t,sn(e),n):typeof e?.transform=="function"?uf(e.transform(t),n):b4(uf(e,n),t?.[m4])}function b4(t,e){return t!=null&&e?_l(t,e):t}function uh(t,e,n){return ge(t,Rb(n)?(r,i)=>gl(e(r,i)):e,n)}function uf(t,e){return e===void 0?oi(t):Bb(t)?bl(t,e):t instanceof e?t:e.from(t,Rb(e)&&!Lb(t)?gl:void 0)}function bl(t,e){return t==null?t:(e===void 0||e===Array)&&P4(t.type)?Ob(fh(t)):uf(fh(t),e)}function fh(t){return t.nullCount?t.toJSON():t.toArray()}const Xa=[null],g4=t=>e=>{const n=e[t];return n===void 0&&e.type==="Feature"?e.properties?.[t]:n},_4={transform:fa},Qn={transform:t=>t},v4=()=>!0,de=t=>t==null?t:`${t}`,me=t=>t==null?t:+t,Ib=t=>t?t[0]:void 0,y4=t=>t?t[1]:void 0,sn=t=>()=>t;function x4(t){const e=+`${t}`.slice(1)/100;return(n,r)=>is(n,e,r)}function Rs(t){return Lb(t)?t:ge(t,gl,Float64Array)}function gl(t){return t==null?NaN:Number(t)}function Ob(t){return ge(t,w4)}function w4(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?Ab(t):t==null||isNaN(t=Number(t))?void 0:new Date(t)}function ti(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:vc(t)?[void 0,t]:[t,void 0]}function we(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Fb(t,e,n){if(t!=null)return tn(t,e,n)}function tn(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function ji(t){return Ub(t)?t:oi(t)}function oi(t){if(t==null||ua(t))return t;if(Bb(t))return bl(t);if(Pb(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function Pb(t){switch(t?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function ge(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function ff(t,e=Array){return t instanceof e?t.slice():e.from(t)}function ai(t){return t?.toString===d4}function lf(t){return ai(t)&&(t.type!==void 0||t.domain!==void 0)}function mc(t){return ai(t)&&typeof t.transform!="function"}function qi(t){return mc(t)&&t.value===void 0&&t.channel===void 0}function bc(t,e){return t===void 0&&e===void 0?[Ib,y4]:[t,e]}function M4({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=ti(e)),t===void 0&&([t]=ti(n)),t}function df(t){return ua(t)?t.length:t?.numRows}function fa(t){const e=df(t),n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function _l(t,e){return ua(t)?ge(e,n=>t[n],t.constructor):ge(e,n=>t.at(n))}function $4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function Yn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function gc(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function S4(t,e){const n=vl(t,e);return n&&(r=>xr(r)?n.floor(r):r)}function vl(t,e){if(t!=null){if(typeof t=="number")return T4(t);if(typeof t=="string")return(e==="time"?kb:Db)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function T4(t){t=+t,0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:n=>Math.floor(n*e)/e,offset:(n,r=1)=>(n*e+Math.floor(r))/e,range:(n,r)=>Cu(Math.ceil(n*e),r*e).map(i=>i/e)}:{floor:n=>Math.floor(n/e)*e,offset:(n,r=1)=>n+e*Math.floor(r),range:(n,r)=>Cu(Math.ceil(n/e),r/e).map(i=>i*e)}}function la(t,e){if(t=vl(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function A4(t,e){if(t=la(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function C4(t){return typeof t?.range=="function"}function _c(t){return t===void 0||mc(t)?t:{value:t}}function N4(t){return t==null?null:{transform:e=>wr(e,t,Float64Array),label:gc(t)}}function si(t){return t&&typeof t[Symbol.iterator]=="function"}function jb(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function lh(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Nn(t){for(const e of t)if(e!=null)return e instanceof Date}function k4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&Ab(e)}function D4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function E4(t){for(const e of t)if(e!=null)return typeof e=="number"}function nu(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const L4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function vc(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||L4.has(t))}function R4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Se(t){return t==null||Uo(t)}function Uo(t){return/^\s*none\s*$/i.test(t)}function I4(t){return/^\s*round\s*$/i.test(t)}function hf(t,e){return Fb(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function yc(t="middle"){return hf(t,"frameAnchor")}function O4(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const o=r[i];n===t?n={...n,[i]:o}:n[i]=o}return n}function F4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function qb(t){return si(t)?F4(t):t}function zb(t){return t===!0?t="frame":t===!1?t=null:!Pb(t)&&t!=null&&(t=tn(t,"clip",["frame","sphere"]),t==="sphere"&&(t={type:"Sphere"})),t}function Ub(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function Bb(t){return t&&typeof t.toArray=="function"&&t.type}function P4(t){return t&&(t.typeId===8||t.typeId===10)&&t.unit===1}const xn=Symbol("position"),Kn=Symbol("color"),da=Symbol("radius"),ha=Symbol("length"),pa=Symbol("opacity"),xc=Symbol("symbol"),Hb=Symbol("projection"),Vt=new Map([["x",xn],["y",xn],["fx",xn],["fy",xn],["r",da],["color",Kn],["opacity",pa],["symbol",xc],["length",ha],["projection",Hb]]);function j4(t){return t===xn||t===Hb}function q4(t){return t===xn||t===da||t===ha||t===pa}const z4=Math.sqrt(3),U4=2/z4,B4={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*U4,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},yl=new Map([["asterisk",nb],["circle",zo],["cross",rb],["diamond",ob],["diamond2",ab],["hexagon",B4],["plus",sb],["square",cb],["square2",ub],["star",lb],["times",mb],["triangle",db],["triangle2",hb],["wye",pb]]);function xl(t){return t&&typeof t.draw=="function"}function H4(t){return xl(t)?!0:typeof t!="string"?!1:yl.has(t.toLowerCase())}function wl(t){if(t==null||xl(t))return t;const e=yl.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function Y4(t){if(t==null||xl(t))return[void 0,t];if(typeof t=="string"){const e=yl.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Yb({filter:t,sort:e,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(t!=null&&(r=Wb(t)),e!=null&&!qi(e)&&(r=ru(r,Ml(e))),n&&(r=ru(r,Gb))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||qi(e))&&{sort:e},transform:ru(r,a)}}function zi({filter:t,sort:e,reverse:n,initializer:r,...i}={},o){return r===void 0&&(t!=null&&(r=Wb(t)),e!=null&&!qi(e)&&(r=iu(r,Ml(e))),n&&(r=iu(r,Gb))),{...i,...(e===null||qi(e))&&{sort:e},initializer:iu(r,o)}}function ru(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,ji(n),r,i)}}function iu(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...o){let a,s,c,u,f,d;return{data:s=n,facets:c=r,channels:a}=t.call(this,n,r,i,...o),{data:f=s,facets:d=c,channels:u}=e.call(this,s,c,{...i,...a},...o),{data:f,facets:d,channels:{...a,...u}}}}function W4(t,e){return(t.initializer!=null?zi:Yb)(t,e)}function Wb(t){return(e,n)=>{const r=wr(e,t);return{data:e,facets:n.map(i=>i.filter(o=>r[o]))}}}function Gb(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function G4(t,{sort:e,...n}={}){return{...(mc(t)&&t.channel!==void 0?zi:W4)(n,Ml(t)),sort:qi(e)?e:null}}function Ml(t){return(typeof t=="function"&&t.length!==1?V4:X4)(t)}function V4(t){return(e,n)=>{const r=ua(e)?(i,o)=>t(e[i],e[o]):(i,o)=>t(e.get(i),e.get(o));return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function X4(t){let e,n;({channel:e,value:t,order:n}={..._c(t)});const r=e?.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?cf:Fi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Fi;break;case"descending":n=cf;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let s;if(e===void 0)s=wr(i,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(s=a[e],!s)return{};s=s.value}const c=(u,f)=>n(s[u],s[f]);return{data:i,facets:o.map(u=>u.slice().sort(c))}}}function Z4(t,e,n=J4){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ai(t))return Q4(t);if(typeof t=="function")return K4(t);if(/^p\d{2}$/i.test(t))return Pn(x4(t));switch(`${t}`.toLowerCase()){case"first":return e8;case"last":return n8;case"identity":return t8;case"count":return hh;case"distinct":return r8;case"sum":return e==null?hh:i8;case"proportion":return ph(e,"data");case"proportion-facet":return ph(e,"facet");case"deviation":return Pn(zv);case"min":return Pn(Eo);case"min-index":return Pn(Zv);case"max":return Pn(Tn);case"max-index":return Pn(Xv);case"mean":return dh(Qv);case"median":return dh(Au);case"variance":return Pn(W0);case"mode":return Pn(t2)}return n(t)}function J4(t){throw new Error(`invalid reduce: ${t}`)}function Q4(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function K4(t){return{reduceIndex(e,n,r){return t(_l(n,e),r)}}}function Pn(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function dh(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return Nn(n)?new Date(r):r}}}const t8={reduceIndex(t,e){return _l(e,t)}},e8={reduceIndex(t,e){return e[t[0]]}},n8={reduceIndex(t,e){return e[t[t.length-1]]}},hh={label:"Frequency",reduceIndex(t){return t.length}},r8={label:"Distinct",reduceIndex(t,e){const n=new Ys;for(const r of t)n.add(e[r]);return n.size}},i8=Pn(Ff);function ph(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>Ff(n,o=>r[o])/i}}function Bo(t,{scale:e,type:n,value:r,filter:i,hint:o,label:a=gc(r)},s){return o===void 0&&typeof r?.transform=="function"&&(o=r.hint),Vb(s,{scale:e,type:n,value:wr(t,r),label:a,filter:i,hint:o})}function o8(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Bo(e,r,n)]))}function a8(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:o}])=>{const a=i==null?null:e[i];return[r,a==null?o:ge(o,a)]}));return n.channels=t,n}function Vb(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&nu(r,vc)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&nu(r,R4)?null:"opacity",e.defaultScale="opacity";break;case"symbol":n!==!0&&nu(r,H4)?(e.scale=null,e.value=ge(r,wl)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=Vt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Vt.has(n))throw new Error(`unknown scale: ${n}`);return e}function s8(t,e,n,r,i){const{order:o,reverse:a,reduce:s=!0,limit:c}=i;for(const u in i){if(!Vt.has(u))continue;let{value:f,order:d=o,reverse:l=a,reduce:h=s,limit:p=c}=_c(i[u]);const m=f?.startsWith("-");if(m&&(f=f.slice(1)),d=d===void 0?m!==(f==="width"||f==="height")?Zb:Xb:f8(d),h==null||h===!1)continue;const b=u==="fx"||u==="fy"?u8(e,r[u]):c8(n,u);if(!b)throw new Error(`missing channel for scale: ${u}`);const v=b.value,[x=0,S=1/0]=si(p)?p:p<0?[p]:[0,p];if(f==null)b.domain=()=>{let y=Array.from(new Ys(v));return l&&(y=y.reverse()),(x!==0||S!==1/0)&&(y=y.slice(x,S)),y};else{const y=f==="data"?t:f==="height"?mh(n,"y1","y2"):f==="width"?mh(n,"x1","x2"):pf(n,f,f==="y"?"y2":f==="x"?"x2":void 0),A=Z4(h===!0?"max":h,y);b.domain=()=>{let M=Bv(fa(v),$=>A.reduceIndex($,y),$=>v[$]);return d&&M.sort(d),l&&M.reverse(),(x!==0||S!==1/0)&&(M=M.slice(x,S)),M.map(Ib)}}}}function c8(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function u8(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const s of t[o])i[s]=a}return e}function mh(t,e,n){const r=pf(t,e),i=pf(t,n);return ge(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function pf(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function f8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Xb;case"descending":return Zb}throw new Error(`invalid order: ${t}`)}function Xb([t,e],[n,r]){return Fi(e,r)||Fi(t,n)}function Zb([t,e],[n,r]){return cf(e,r)||Fi(t,n)}function bh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const Jb=new Map([["accent",p6],["category10",h6],["dark2",m6],["observable10",b6],["paired",g6],["pastel1",_6],["pastel2",v6],["set1",y6],["set2",x6],["set3",w6],["tableau10",M6]]);function l8(t){return t!=null&&Jb.has(`${t}`.toLowerCase())}const gh=new Map([...Jb,["brbg",In(W1,G1)],["prgn",In(V1,X1)],["piyg",In(Z1,J1)],["puor",In(Q1,K1)],["rdbu",In(of,As)],["rdgy",In(tm,em)],["rdylbu",In(af,Cs)],["rdylgn",In(nm,rm)],["spectral",In(im,om)],["burd",_h(of,As)],["buylrd",_h(af,Cs)],["blues",Kt(km,Dm)],["greens",Kt(Em,Lm)],["greys",Kt(Rm,Im)],["oranges",Kt(qm,zm)],["purples",Kt(Om,Fm)],["reds",Kt(Pm,jm)],["turbo",On(Vm)],["viridis",On(Xm)],["magma",On(Zm)],["inferno",On(Jm)],["plasma",On(Qm)],["cividis",On(Um)],["cubehelix",On(Bm)],["warm",On(Hm)],["cool",On(Ym)],["bugn",Kt(am,sm)],["bupu",Kt(cm,um)],["gnbu",Kt(fm,lm)],["orrd",Kt(dm,hm)],["pubu",Kt(bm,gm)],["pubugn",Kt(pm,mm)],["purd",Kt(_m,vm)],["rdpu",Kt(ym,xm)],["ylgn",Kt($m,Sm)],["ylgnbu",Kt(wm,Mm)],["ylorbr",Kt(Tm,Am)],["ylorrd",Kt(Cm,Nm)],["rainbow",vh(Wm)],["sinebow",vh(Gm)]]);function Kt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?fn(e,n):t[n])}function In(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?fn(e,n):t[n])}function _h(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?fn(r=>e(1-r),n):t[n].slice().reverse())}function On(t){return({length:e})=>fn(t,Math.max(2,Math.floor(e)))}function vh(t){return({length:e})=>fn(t,Math.floor(e)+1).slice(0,-1)}function Qb(t){const e=`${t}`.toLowerCase();if(!gh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return gh.get(e)}function wc(t,e){const n=Qb(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function d8(t,e="greys"){const n=new Set,[r,i]=wc(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const yh=new Map([["brbg",G1],["prgn",X1],["piyg",J1],["puor",K1],["rdbu",As],["rdgy",em],["rdylbu",Cs],["rdylgn",rm],["spectral",om],["burd",t=>As(1-t)],["buylrd",t=>Cs(1-t)],["blues",Dm],["greens",Lm],["greys",Im],["purples",Fm],["reds",jm],["oranges",zm],["turbo",Vm],["viridis",Xm],["magma",Zm],["inferno",Jm],["plasma",Qm],["cividis",Um],["cubehelix",Bm],["warm",Hm],["cool",Ym],["bugn",sm],["bupu",um],["gnbu",lm],["orrd",hm],["pubugn",mm],["pubu",gm],["purd",vm],["rdpu",xm],["ylgnbu",Mm],["ylgn",Sm],["ylorbr",Am],["ylorrd",Nm],["rainbow",Wm],["sinebow",Gm]]);function $l(t){const e=`${t}`.toLowerCase();if(!yh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return yh.get(e)}const h8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function p8(t){return t!=null&&h8.has(`${t}`.toLowerCase())}const Kb=t=>e=>t(1-e),ou=[0,1],xh=new Map([["number",le],["rgb",Xr],["hsl",Sx],["hcl",Cx],["lab",Tx]]);function tg(t){const e=`${t}`.toLowerCase();if(!xh.has(e))throw new Error(`unknown interpolator: ${e}`);return xh.get(e)}function ma(t,e,n,{type:r,nice:i,clamp:o,zero:a,domain:s=ng(t,n),unknown:c,round:u,scheme:f,interval:d,range:l=Vt.get(t)===da?S8(n,s):Vt.get(t)===ha?T8(n,s):Vt.get(t)===pa?ou:void 0,interpolate:h=Vt.get(t)===Kn?f==null&&l!==void 0?Xr:$l(f!==void 0?f:r==="cyclical"?"rainbow":"turbo"):u?Hf:le,reverse:p}){if(s=wh(s),d=la(d,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=tg(h)),p=!!p,l!==void 0){const m=s.length,b=(l=wh(l)).length;if(m!==b){if(h.length===1)throw new Error("invalid piecewise interpolator");h=Zs(h,l),l=void 0}}if(h.length===1?(p&&(h=Kb(h),p=!1),l===void 0&&(l=Float64Array.from(s,(m,b)=>b/(s.length-1)),l.length===2&&(l=ou)),e.interpolate((l===ou?sn:Tl)(h))):e.interpolate(h),a){const[m,b]=mr(s);(m>0||b<0)&&(s=ff(s),(Pi(s)||1)===Math.sign(m)?s[0]=0:s[s.length-1]=0)}return p&&(s=os(s)),e.domain(s).unknown(c),i&&(e.nice(m8(i,r)),s=e.domain()),l!==void 0&&e.range(l),o&&e.clamp(o),{type:r,domain:s,range:l,scale:e,interpolate:h,interval:d}}function wh(t){return t=oi(t),t.length>=2?t:[t[0],t[0]]}function m8(t,e){return t===!0?void 0:typeof t=="number"?t:A4(t,e)}function b8(t,e,n){return ma(t,nl(),e,n)}function g8(t,e,n){return eg(t,e,{...n,exponent:.5})}function eg(t,e,{exponent:n=1,...r}){return ma(t,T1().exponent(n),e,{...r,type:"pow"})}function _8(t,e,{base:n=10,domain:r=A8(e),...i}){return ma(t,w1().base(n),e,{...i,domain:r})}function v8(t,e,{constant:n=1,...r}){return ma(t,$1().constant(n),e,r)}function y8(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=C8(e),unknown:s,interpolate:c,reverse:u}){return n===void 0&&(n=c!==void 0?fn(c,i):Vt.get(t)===Kn?wc(o,i):void 0),a.length>0&&(a=A1(a,n===void 0?{length:i}:n).quantiles()),Sl(t,e,{domain:a,range:n,reverse:u,unknown:s})}function x8(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=ng(t,e),unknown:a,interpolate:s,reverse:c}){const[u,f]=mr(o);let d;return n===void 0?(d=rs(u,f,r),d[0]<=u&&d.splice(0,1),d[d.length-1]>=f&&d.pop(),r=d.length+1,n=s!==void 0?fn(s,r):Vt.get(t)===Kn?wc(i,r):void 0):(d=fn(le(u,f),r+1).slice(1,-1),u instanceof Date&&(d=d.map(l=>new Date(l)))),Pi(oi(o))<0&&d.reverse(),Sl(t,e,{domain:d,range:n,reverse:c,unknown:a})}function Sl(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?fn(o,n.length+1):Vt.get(t)===Kn?wc(i,n.length+1):void 0,reverse:s}){n=oi(n);const c=Pi(n);if(!isNaN(c)&&!w8(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return s&&(a=os(a)),{type:"threshold",scale:C1(c<0?os(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function w8(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const o=Yr(i,i=t[n]);if(o!==0&&o!==e)return!1}return!0}function M8(t){return{type:"identity",scale:q4(Vt.get(t))?v1():e=>e}}function Ho(t,e=Tb){return t.length?[Eo(t,({value:n})=>n===void 0?n:Eo(n,e)),Tn(t,({value:n})=>n===void 0?n:Tn(n,e))]:[0,1]}function ng(t,e){const n=Vt.get(t);return(n===da||n===pa||n===ha?$8:Ho)(e)}function $8(t){return[0,t.length?Tn(t,({value:e})=>e===void 0?e:Tn(e,Tb)):1]}function S8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=is(t,.5,({value:a})=>a===void 0?NaN:is(a,.25,hc)),i=e.map(a=>3*Math.sqrt(a/r)),o=30/Tn(i);return o<1?i.map(a=>a*o):i}function T8(t,e){const n=Au(t,({value:o})=>o===void 0?NaN:Au(o,Math.abs)),r=e.map(o=>12*o/n),i=60/Tn(r);return i<1?r.map(o=>o*i):r}function A8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Ho(t,hc);if(n<0)return Ho(t,dl)}return[1,10]}function C8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Tl(t){return(e,n)=>r=>t(e+r*(n-e))}let mf=0,bf;function N8(){const t=mf;return mf=0,bf=void 0,t}function br(t){t!==bf&&(bf=t,console.warn(t),++mf)}function Mc(t,e,n,r,{type:i,nice:o,clamp:a,domain:s=Ho(r),unknown:c,pivot:u=0,scheme:f,range:d,symmetric:l=!0,interpolate:h=Vt.get(t)===Kn?f==null&&d!==void 0?Xr:$l(f!==void 0?f:"rdbu"):le,reverse:p}){u=+u,s=oi(s);let[m,b]=s;if(s.length>2&&br(`Warning: the diverging ${t} scale domain contains extra elements.`),Yr(m,b)<0&&([m,b]=[b,m],p=!p),m=Math.min(m,u),b=Math.max(b,u),typeof h!="function"&&(h=tg(h)),d!==void 0&&(h=h.length===1?Tl(h)(...d):Zs(h,d)),p&&(h=Kb(h)),l){const v=n.apply(u),x=v-n.apply(m),S=n.apply(b)-v;x<S?m=n.invert(v-S):x>S&&(b=n.invert(v+x))}return e.domain([m,u,b]).unknown(c).interpolator(h),a&&e.clamp(a),o&&e.nice(o),{type:i,domain:[m,b],pivot:u,interpolate:h,scale:e}}function k8(t,e,n){return Mc(t,U1(),R8,e,n)}function D8(t,e,n){return rg(t,e,{...n,exponent:.5})}function rg(t,e,{exponent:n=1,...r}){return Mc(t,Y1().exponent(n=+n),F8(n),e,{...r,type:"diverging-pow"})}function E8(t,e,{base:n=10,pivot:r=1,domain:i=Ho(e,r<0?dl:hc),...o}){return Mc(t,B1().base(n=+n),I8,e,{domain:i,pivot:r,...o})}function L8(t,e,{constant:n=1,...r}){return Mc(t,H1().constant(n=+n),P8(n),e,r)}const R8={apply(t){return t},invert(t){return t}},I8={apply:Math.log,invert:Math.exp},O8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function F8(t){return t===.5?O8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function P8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function ig(t,e,n,r){return ma(t,e,n,r)}function j8(t,e,n){return ig(t,l6(),e,n)}function q8(t,e,n){return ig(t,d6(),e,n)}const ba=Symbol("ordinal");function og(t,e,n,{type:r,interval:i,domain:o,range:a,reverse:s,hint:c}){return i=la(i,r),o===void 0&&(o=sg(n,i,t)),(r==="categorical"||r===ba)&&(r="ordinal"),s&&(o=os(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:r,domain:o,range:a,scale:e,hint:c,interval:i}}function z8(t,e,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:s,...c}){r=la(r,n),i===void 0&&(i=sg(e,r,t));let u;if(Vt.get(t)===xc)u=H8(e),o=o===void 0?Y8(u):ge(o,wl);else if(Vt.get(t)===Kn&&(o===void 0&&(n==="ordinal"||n===ba)&&(o=d8(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const f=$l(a),d=o[0],l=o[1]-o[0];o=({length:h})=>fn(p=>f(d+l*p),h)}else o=Qb(a);if(s===ef)throw new Error(`implicit unknown on ${t} scale is not supported`);return og(t,el().unknown(s),e,{...c,type:n,domain:i,range:o,hint:u})}function U8(t,e,{align:n=.5,padding:r=.5,...i}){return ag(Y3().align(n).padding(r),e,i,t)}function B8(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=t==="fx"||t==="fy"?0:r,...a}){return ag(nc().align(n).paddingInner(i).paddingOuter(o),e,a,t)}function ag(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=og(r,t,e,n),t.round=i,t}function sg(t,e,n){const r=new Ys;for(const{value:i,domain:o}of t){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(e!==void 0){const[i,o]=mr(r).map(e.floor,e);return e.range(i,e.offset(o))}if(r.size>1e4&&Vt.get(n)===xn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Yv(r,Fi)}function Mh(t,e){let n;for(const{hint:r}of t){const i=r?.[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function H8(t){return{fill:Mh(t,"fill"),stroke:Mh(t,"stroke")}}function Y8(t){return Se(t.fill)?z6:q6}function gf(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:s,nice:c,clamp:u,zero:f,align:d,padding:l,projection:h,facet:{label:p=e}={},...m}={}){const b={};for(const[v,x]of t){const S=m[v],y=Z8(v,x,{round:Vt.get(v)===xn?s:void 0,nice:c,clamp:u,zero:f,align:d,padding:l,projection:h,...S});if(y){let{label:A=v==="fx"||v==="fy"?p:e,percent:M,transform:$,inset:N,insetTop:D=N!==void 0?N:v==="y"?r:0,insetRight:R=N!==void 0?N:v==="x"?i:0,insetBottom:T=N!==void 0?N:v==="y"?o:0,insetLeft:O=N!==void 0?N:v==="x"?a:0}=S||{};if($==null)$=void 0;else if(typeof $!="function")throw new Error("invalid scale transform; not a function");y.percent=!!M,y.label=A===void 0?G8(x,y):A,y.transform=$,v==="x"||v==="fx"?(y.insetLeft=+O,y.insetRight=+R):(v==="y"||v==="fy")&&(y.insetTop=+D,y.insetBottom=+T),b[v]=y}}return b}function $h(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:o,type:a,interval:s,label:c}=i;e[r]=e7(i),n[r]=o,o.type=a,s!=null&&(o.interval=s),c!=null&&(o.label=c)}return n}function W8(t,e){const{x:n,y:r,fx:i,fy:o}=t,a=i||o?Al(e):e;i&&Sh(i,a),o&&Th(o,a);const s=i||o?cg(t,e):e;n&&Sh(n,s),r&&Th(r,s)}function G8(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!ci(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function V8(t){return Math.sign(Pi(t.domain()))*Math.sign(Pi(t.range()))}function Al(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:s,marginRight:c,marginBottom:u,marginLeft:f}}=t;return{marginTop:Math.max(e,s),marginRight:Math.max(n,c),marginBottom:Math.max(r,u),marginLeft:Math.max(i,f),width:o,height:a}}function cg({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:c}=Al(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+i:s,height:e?e.scale.bandwidth()+r+o:c,facet:{width:s,height:c}}}function Sh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:o=0,marginRight:a=0}=e,s=o+n,c=i-a-r;t.range=[s,Math.max(s,c)],ci(t)||(t.range=fg(t)),t.scale.range(t.range)}ug(t)}function Th(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:o=0,marginBottom:a=0}=e,s=o+n,c=i-a-r;t.range=[Math.max(s,c),s],ci(t)?t.range.reverse():t.range=fg(t),t.scale.range(t.range)}ug(t)}function ug(t){t.round===void 0&&Q8(t)&&X8(t)<=30&&t.scale.round(!0)}function X8({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-i,s=Math.abs(r-n)/Math.max(1,a+o*2);return(s-Math.floor(s))*a}function fg(t){const e=t.scale.domain().length+lg(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,o)=>n+o/(e-1)*(r-n))}function Z8(t,e=[],n={}){const r=J8(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&ci({type:r})){const i=e.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Nn)?br(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${mi(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${mi(r)}".`):i.some(k4)?br(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${mi(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${mi(r)}".`):i.some(D4)&&br(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${mi(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${mi(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ia(e,n,Rs);break;case"identity":switch(Vt.get(t)){case xn:n=Ia(e,n,Rs);break;case xc:n=Ia(e,n,K8);break}break;case"utc":case"time":n=Ia(e,n,Ob);break}switch(r){case"diverging":return k8(t,e,n);case"diverging-sqrt":return D8(t,e,n);case"diverging-pow":return rg(t,e,n);case"diverging-log":return E8(t,e,n);case"diverging-symlog":return L8(t,e,n);case"categorical":case"ordinal":case ba:return z8(t,e,n);case"cyclical":case"sequential":case"linear":return b8(t,e,n);case"sqrt":return g8(t,e,n);case"threshold":return Sl(t,e,n);case"quantile":return y8(t,e,n);case"quantize":return x8(t,e,n);case"pow":return eg(t,e,n);case"log":return _8(t,e,n);case"symlog":return v8(t,e,n);case"utc":return q8(t,e,n);case"time":return j8(t,e,n);case"point":return U8(t,e,n);case"band":return B8(t,e,n);case"identity":return M8(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function mi(t){return typeof t=="symbol"?t.description:t}function Ah(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Ch={toString:()=>"projection"};function J8(t,e,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:s}){if(n=Ah(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&s!=null&&(n=Ch);for(const f of e){const d=Ah(f.type);if(d!==void 0){if(n===void 0)n=d;else if(n!==d)throw new Error(`scale incompatible with channel: ${n} !== ${d}`)}}if(n===Ch)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:f})=>f!==void 0))return;const c=Vt.get(t);if(c===da)return"sqrt";if(c===pa||c===ha)return"linear";if(c===xc)return"ordinal";const u=(r??i)?.length;if(u<2||u>2)return au(c);if(r!==void 0){if(lh(r))return au(c);if(Nn(r))return"utc"}else{const f=e.map(({value:d})=>d).filter(d=>d!==void 0);if(f.some(lh))return au(c);if(f.some(Nn))return"utc"}if(c===Kn){if(a!=null||p8(o))return"diverging";if(l8(o))return"categorical"}return"linear"}function au(t){switch(t){case xn:return"point";case Kn:return ba;default:return"ordinal"}}function ci({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===ba}function lg({type:t}){return t==="threshold"}function Q8({type:t}){return t==="point"||t==="band"}function Is(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function Ia(t,{domain:e,...n},r){for(const i of t)i.value!==void 0&&(e===void 0&&(e=i.value?.domain),i.value=r(i.value));return{domain:e===void 0?e:r(e),...n}}function K8(t){return ge(t,wl)}function t7(t){return e=>{if(!Vt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function e7({scale:t,type:e,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:s,pivot:c}){if(e==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const u=t.unknown?t.unknown():void 0;return{type:e,domain:ff(n),...r!==void 0&&{range:ff(r)},...a!==void 0&&{transform:a},...s&&{percent:s},...u!==void 0&&{unknown:u},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:f=>t(f),...t.invert&&{invert:f=>t.invert(f)}}}function n7(t,e){const{fx:n,fy:r}=gf(t,e),i=n?.scale.domain(),o=r?.scale.domain();return i&&o?qv(i,o).map(([a,s],c)=>({x:a,y:s,i:c})):i?i.map((a,s)=>({x:a,i:s})):o?o.map((a,s)=>({y:a,i:s})):void 0}function r7(t,{x:e,y:n}){return e&&=_f(e),n&&=_f(n),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Cl(t,{fx:e,fy:n}){const r=fa(t),i=e?.value,o=n?.value;return e&&n?Oc(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):e?Oc(r,a=>(a.fx=i[a[0]],a),a=>i[a]):Oc(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function i7(t,e,{marginTop:n,marginLeft:r}){const i=t?({x:a})=>t(a)-r:()=>0,o=e?({y:a})=>e(a)-n:()=>0;return function(a){this.tagName==="svg"?(this.setAttribute("x",i(a)),this.setAttribute("y",o(a))):this.setAttribute("transform",`translate(${i(a)},${o(a)})`)}}function o7(t){const e=[],n=new Uint32Array(Ff(t,r=>r.length));for(const r of t){let i=0;for(const o of t)r!==o&&(n.set(o,i),i+=o.length);e.push(n.slice(0,i))}return e}const a7=new Map([["top",su],["right",fu],["bottom",cu],["left",uu],["top-left",Oa(su,uu)],["top-right",Oa(su,fu)],["bottom-left",Oa(cu,uu)],["bottom-right",Oa(cu,fu)],["top-empty",u7],["right-empty",d7],["bottom-empty",f7],["left-empty",l7],["empty",h7]]);function s7(t){if(t==null)return null;const e=a7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Nh=new WeakMap;function _f(t){let e=Nh.get(t);return e||Nh.set(t,e=new Do(ge(t,(n,r)=>[n,r]))),e}function Ar(t,e){return _f(t).get(e)}function c7(t,e,n){return e=Yn(e),n=Yn(n),t.find(r=>Object.is(Yn(r.x),e)&&Object.is(Yn(r.y),n))}function $c(t,e,n){return c7(t,e,n)?.empty}function su(t,{y:e},{y:n}){return e?Ar(e,n)===0:!0}function cu(t,{y:e},{y:n}){return e?Ar(e,n)===e.length-1:!0}function uu(t,{x:e},{x:n}){return e?Ar(e,n)===0:!0}function fu(t,{x:e},{x:n}){return e?Ar(e,n)===e.length-1:!0}function u7(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Ar(e,r);if(o>0)return $c(t,n,e[o-1])}function f7(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Ar(e,r);if(o<e.length-1)return $c(t,n,e[o+1])}function l7(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Ar(e,n);if(o>0)return $c(t,e[o-1],r)}function d7(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Ar(e,n);if(o<e.length-1)return $c(t,e[o+1],r)}function h7(t,e,{empty:n}){return n}function Oa(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function lu(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:o})=>r.get(i)?.get(o)??[]):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}const dg=Math.PI,Fn=2*dg,du=.618;function p7({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let s,c,u="frame";if(ai(t)){let A;if({type:t,domain:c,inset:A,insetTop:n=A!==void 0?A:n,insetRight:r=A!==void 0?A:r,insetBottom:i=A!==void 0?A:i,insetLeft:o=A!==void 0?A:o,clip:u=u,...s}=t,t==null)return}typeof t!="function"&&({type:t}=vf(t));const{width:f,height:d,marginLeft:l,marginRight:h,marginTop:p,marginBottom:m}=a,b=f-l-h-o-r,v=d-p-m-n-i;if(t=t?.({width:b,height:v,clip:u,...s}),t==null)return;u=m7(u,l,p,f-h,d-m);let x=l+o,S=p+n,y;if(c!=null){const[[A,M],[$,N]]=Jf(t).bounds(c),D=Math.min(b/($-A),v/(N-M));D>0?(x-=(D*(A+$)-b)/2,S-=(D*(M+N)-v)/2,y=ws({point(R,T){this.stream.point(R*D+x,T*D+S)}})):br("Warning: the projection could not be fit to the specified domain; using the default scale.")}return y??=x===0&&S===0?hg():ws({point(A,M){this.stream.point(A+x,M+S)}}),{stream:A=>t.stream(y.stream(u(A)))}}function vf(t){switch(`${t}`.toLowerCase()){case"albers-usa":return rn(k3,.7463,.4673);case"albers":return Fa(s1,.7463,.4673);case"azimuthal-equal-area":return rn(D3,4,4);case"azimuthal-equidistant":return rn(E3,Fn,Fn);case"conic-conformal":return Fa(I3,Fn,Fn);case"conic-equal-area":return Fa(Ms,6.1702,2.9781);case"conic-equidistant":return Fa(P3,7.312,3.6282);case"equal-earth":return rn(q3,5.4133,2.6347);case"equirectangular":return rn(O3,Fn,dg);case"gnomonic":return rn(z3,3.4641,3.4641);case"identity":return{type:hg};case"reflect-y":return{type:b7};case"mercator":return rn(L3,Fn,Fn);case"orthographic":return rn(U3,2,2);case"stereographic":return rn(B3,2,2);case"transverse-mercator":return rn(H3,Fn,Fn);default:throw new Error(`unknown projection type: ${t}`)}}function m7(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Yp(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function rn(t,e,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:s})=>{const c=t();return a!=null&&c.precision?.(a),o!=null&&c.rotate?.(o),typeof s=="number"&&c.clipAngle?.(s),r!=null&&(c.scale(Math.min(r/e,i/n)),c.translate([r/2,i/2])),c},aspectRatio:n/e}}function Fa(t,e,n){const{type:r,aspectRatio:i}=rn(t,e,n);return{type:o=>{const{parallels:a,domain:s,width:c,height:u}=o,f=r(o);return a!=null&&(f.parallels(a),s===void 0&&c!=null&&f.fitSize([c,u],{type:"Sphere"})),f},aspectRatio:i}}const hg=sn({stream:t=>t}),b7=sn(ws({point(t,e){this.stream.point(t,-e)}}));function g7(t,e,n,r){const i=n[t],o=n[e],a=i.length,s=n[t]=new Float64Array(a).fill(NaN),c=n[e]=new Float64Array(a).fill(NaN);let u;const f=r.stream({point(d,l){s[u]=d,c[u]=l}});for(u=0;u<a;++u)f.point(i[u],o[u])}function _7({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(ai(t)&&(t=t.type),t!=null)}function v7(t){if(typeof t?.stream=="function")return du;if(ai(t)){let e,n;if({domain:e,type:t,...n}=t,e!=null&&t!=null){const r=typeof t=="string"?vf(t).type:t,[[i,o],[a,s]]=Jf(r({...n,width:100,height:100})).bounds(e),c=(s-o)/(a-i);return c&&isFinite(c)?c<.2?.2:c>5?5:c:du}}if(t!=null){if(typeof t!="function"){const{aspectRatio:e}=vf(t);if(e)return e}return du}}function y7(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},o={point(a,s){e.push(a),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Lr(a,o);return[r,i]}function x7({x:t,y:e}){if(t||e)return t??=n=>n,e??=n=>n,ws({point(n,r){this.stream.point(t(n),e(r))}})}function Nl(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:zb(n)}}function ce(t,{document:e}){return Pr(Gs(t).call(e.documentElement))}const yf=Symbol("unset");function kl(t){return(t.length===1?w7:M7)(t)}function w7(t){let e,n=yf;return r=>(Object.is(n,r)||(n=r,e=t(r)),e)}function M7(t){let e,n;return(...r)=>((n?.length!==r.length||n.some((i,o)=>!Object.is(i,r[o])))&&(n=r,e=t(...r)),e)}const $7=kl(t=>new Intl.NumberFormat(t));kl((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}}));kl((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function S7(t="en-US"){const e=$7(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function T7(t){return o4(t,"Invalid Date")}function A7(t="en-US"){const e=S7(t);return n=>(n instanceof Date?T7:typeof n=="number"?e:de)(n)}const Ui=A7(),Fe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let C7=0;function pg(){return`plot-clip-${++C7}`}function N7(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:s,fillOpacity:c,stroke:u,strokeWidth:f,strokeOpacity:d,strokeLinejoin:l,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:b,opacity:v,mixBlendMode:x,imageFilter:S,paintOrder:y,pointerEvents:A,shapeRendering:M,channels:$},{ariaLabel:N,fill:D="currentColor",fillOpacity:R,stroke:T="none",strokeOpacity:O,strokeWidth:G,strokeLinecap:q,strokeLinejoin:k,strokeMiterlimit:Y,paintOrder:rt}){D===null&&(s=null,c=null),T===null&&(u=null,d=null),Se(D)?!Se(T)&&(!Se(s)||$?.fill)&&(T="none"):Se(T)&&(!Se(u)||$?.stroke)&&(D="none");const[Q,E]=ti(s,D),[W,Z]=we(c,R),[B,P]=ti(u,T),[z,U]=we(d,O),[tt,I]=we(v);Uo(P)||(f===void 0&&(f=G),h===void 0&&(h=q),l===void 0&&(l=k),p===void 0&&!I4(l)&&(p=Y),!Uo(E)&&y===void 0&&(y=rt));const[K,L]=we(f);return D!==null&&(t.fill=ae(E,"currentColor"),t.fillOpacity=uo(Z,1)),T!==null&&(t.stroke=ae(P,"none"),t.strokeWidth=uo(L,1),t.strokeOpacity=uo(U,1),t.strokeLinejoin=ae(l,"miter"),t.strokeLinecap=ae(h,"butt"),t.strokeMiterlimit=uo(p,4),t.strokeDasharray=ae(m,"none"),t.strokeDashoffset=ae(b,"0")),t.target=de(a),t.ariaLabel=de(N),t.ariaDescription=de(i),t.ariaHidden=de(o),t.opacity=uo(I,1),t.mixBlendMode=ae(x,"normal"),t.imageFilter=ae(S,"none"),t.paintOrder=ae(y,"normal"),t.pointerEvents=ae(A,"auto"),t.shapeRendering=ae(M,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:Q,scale:"auto",optional:!0},fillOpacity:{value:W,scale:"auto",optional:!0},stroke:{value:B,scale:"auto",optional:!0},strokeOpacity:{value:z,scale:"auto",optional:!0},strokeWidth:{value:K,optional:!0},opacity:{value:tt,scale:"auto",optional:!0}}}function k7(t,e){e&&t.filter(n=>ll(e[n])).append("title").call(E7,e)}function D7(t,e){e&&t.filter(([n])=>ll(e[n])).append("title").call(L7,e)}function E7(t,e){e&&t.text(n=>Ui(e[n]))}function L7(t,e){e&&t.text(([n])=>Ui(e[n]))}function ui(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:c,strokeWidth:u,opacity:f,href:d}){r&&dt(t,"aria-label",l=>r[l]),o&&dt(t,"fill",l=>o[l]),a&&dt(t,"fill-opacity",l=>a[l]),s&&dt(t,"stroke",l=>s[l]),c&&dt(t,"stroke-opacity",l=>c[l]),u&&dt(t,"stroke-width",l=>u[l]),f&&dt(t,"opacity",l=>f[l]),d&&mg(t,l=>d[l],e),n||k7(t,i)}function R7(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:c,strokeWidth:u,opacity:f,href:d}){r&&dt(t,"aria-label",([l])=>r[l]),o&&dt(t,"fill",([l])=>o[l]),a&&dt(t,"fill-opacity",([l])=>a[l]),s&&dt(t,"stroke",([l])=>s[l]),c&&dt(t,"stroke-opacity",([l])=>c[l]),u&&dt(t,"stroke-width",([l])=>u[l]),f&&dt(t,"opacity",([l])=>f[l]),d&&mg(t,([l])=>d[l],e),n||D7(t,i)}function I7({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:s,href:c},{tip:u}){return[t,u?void 0:e,n,r,i,o,a,s,c].filter(f=>f!==void 0)}function O7(t,e,n){const r=Uv(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&br("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*F7(t,e,n,r){const{z:i}=n,{z:o}=r,a=I7(r,n),s=[...e,...a];for(const c of o?O7(t,o,i):[t]){let u,f;t:for(const d of c){for(const l of s)if(!xr(l[d])){f&&f.push(-1);continue t}if(u===void 0){f&&(yield f),u=a.map(l=>Yn(l[d])),f=[d];continue}f.push(d);for(let l=0;l<a.length;++l)if(Yn(a[l][d])!==u[l]){yield f,u=a.map(p=>Yn(p[d])),f=[d];continue t}}f&&(yield f)}}function P7(t,e,n,r){let i;const{clip:o=r.clip}=e;o==="frame"?(t=ce("svg:g",r).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=q7(r,n)):o&&(i=U7(o,r)),dt(t,"aria-label",e.ariaLabel),dt(t,"aria-description",e.ariaDescription),dt(t,"aria-hidden",e.ariaHidden),dt(t,"clip-path",i)}function j7(t){const e=new WeakMap;return(n,r)=>{let i=e.get(n);if(!i){const o=pg();Pr(n.ownerSVGElement).append("clipPath").attr("id",o).call(t,n,r),e.set(n,i=`url(#${o})`)}return i}}const q7=j7((t,e,n)=>{const{width:r,height:i,marginLeft:o,marginRight:a,marginTop:s,marginBottom:c}=n;t.append("rect").attr("x",o).attr("y",s).attr("width",r-a-o).attr("height",i-s-c)}),kh=new WeakMap,z7={type:"Sphere"};function U7(t,e){let n,r;if((n=kh.get(e))||kh.set(e,n=new WeakMap),t.type==="Sphere"&&(t=z7),!(r=n.get(t))){const i=pg();Pr(e.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",e.path()(t)),n.set(t,r=`url(#${i})`)}return r}function tr(t,e,n,r){P7(t,e,n,r),dt(t,"class",e.className),dt(t,"fill",e.fill),dt(t,"fill-opacity",e.fillOpacity),dt(t,"stroke",e.stroke),dt(t,"stroke-width",e.strokeWidth),dt(t,"stroke-opacity",e.strokeOpacity),dt(t,"stroke-linejoin",e.strokeLinejoin),dt(t,"stroke-linecap",e.strokeLinecap),dt(t,"stroke-miterlimit",e.strokeMiterlimit),dt(t,"stroke-dasharray",e.strokeDasharray),dt(t,"stroke-dashoffset",e.strokeDashoffset),dt(t,"shape-rendering",e.shapeRendering),dt(t,"filter",e.imageFilter),dt(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;dt(t,"pointer-events",i)}function er(t,e){B7(t,"mix-blend-mode",e.mixBlendMode),dt(t,"opacity",e.opacity)}function mg(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const o=this.ownerDocument.createElementNS(Ci.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Ci.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function dt(t,e,n){n!=null&&t.attr(e,n)}function B7(t,e,n){n!=null&&t.style(e,n)}function nr(t,e,{x:n,y:r},i=Fe,o=Fe){i+=e.dx,o+=e.dy,n?.bandwidth&&(i+=n.bandwidth()/2),r?.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&t.attr("transform",`translate(${i},${o})`)}function ae(t,e){if((t=de(t))!==e)return t}function uo(t,e){if((t=me(t))!==e)return t}const H7=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Dl(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!H7.test(t))throw new Error(`invalid class name: ${t}`);return t}function El(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function ga({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-i:(a+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-o:(r+n-o)/2]}class en{constructor(e,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:s,fy:c,sort:u,dx:f=0,dy:d=0,margin:l=0,marginTop:h=l,marginRight:p=l,marginBottom:m=l,marginLeft:b=l,className:v,clip:x=i?.clip,channels:S,tip:y,render:A}=r;if(this.data=e,this.sort=qi(u)?u:null,this.initializer=zi(r).initializer,this.transform=this.initializer?r.transform:Yb(r).transform,o===null||o===!1?this.facet=null:(this.facet=tn(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===Xa&&typeof s=="string"?[s]:s,this.fy=e===Xa&&typeof c=="string"?[c]:c),this.facetAnchor=s7(a),n=qb(n),S!==void 0&&(n={...Y7(S),...n}),i!==void 0&&(n={...N7(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,$])=>{if(mc($.value)){const{value:N,label:D=$.label,scale:R=$.scale}=$.value;$={...$,label:D,scale:R,value:N}}if(e===Xa&&typeof $.value=="string"){const{value:N}=$;$={...$,value:[N]}}return[M,$]}).filter(([M,{value:$,optional:N}])=>{if($!=null)return!0;if(N)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+f,this.dy=+d,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+b,this.clip=zb(x),this.tip=W7(y),this.className=de(v),this.facet==="super"){if(s||c)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:$}=n[M];if(!($!=="x"&&$!=="y"))throw new Error("super-faceting cannot use x or y")}}A!=null&&(this.render=gg(A,this.render))}initialize(e,n,r){let i=ji(this.data);e===void 0&&i!=null&&(e=[fa(i)]);const o=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=ji(i)),e!==void 0&&(e.original=o);const a=o8(this.channels,i);return this.sort!=null&&s8(i,e,a,n,this.sort),{data:i,facets:e,channels:a}}filter(e,n,r){for(const i in n){const{filter:o=xr}=n[i];if(o!==null){const a=r[i];e=e.filter(s=>o(a[s]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&g7(i,o,n,r.projection)}}scale(e,n,r){const i=a8(e,n);return r.projection&&this.project(e,i,r),i}}function bg(...t){return t.plot=en.prototype.plot,t}function gg(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,o,a,s){return t.call(this,n,r,i,o,a,(c,u,f,d,l)=>e.call(this,c,u,f,d,l,s))}}function Y7(t){return Object.fromEntries(Object.entries(qb(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:_c(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function W7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?tn(t,"tip",["x","y","xy"]):t}function _g(t,e){return t?.tip===!0?{...t,tip:e}:ai(t?.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}function G7(t,e,n={}){let r=.5-Fe,i=.5+Fe,o=.5+Fe,a=.5-Fe;for(const{marginTop:m,marginRight:b,marginBottom:v,marginLeft:x}of e)m>r&&(r=m),b>i&&(i=b),v>o&&(o=v),x>a&&(a=x);let{margin:s,marginTop:c=s!==void 0?s:r,marginRight:u=s!==void 0?s:i,marginBottom:f=s!==void 0?s:o,marginLeft:d=s!==void 0?s:a}=n;c=+c,u=+u,f=+f,d=+d;let{width:l=640,height:h=V7(t,n,{width:l,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,c-r+f-o)}=n;l=+l,h=+h;const p={width:l,height:h,marginTop:c,marginRight:u,marginBottom:f,marginLeft:d};if(t.fx||t.fy){let{margin:m,marginTop:b=m!==void 0?m:c,marginRight:v=m!==void 0?m:u,marginBottom:x=m!==void 0?m:f,marginLeft:S=m!==void 0?m:d}=n.facet??{};b=+b,v=+v,x=+x,S=+S,p.facet={marginTop:b,marginRight:v,marginBottom:x,marginLeft:S}}return p}function V7({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:s,marginRightDefault:c,marginBottomDefault:u,marginLeftDefault:f}){const d=n&&n.scale.domain().length||1,l=v7(i);if(l){const p=r?r.scale.domain().length:1,m=(1.1*d-.1)/(1.1*p-.1)*l,b=Math.max(.1,Math.min(10,m));return Math.round((a-f-c)*b+s+u)}const h=e?ci(e)?e.scale.domain().length||1:Math.max(7,17/d):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=Dh("y",e)/(Dh("x",t)*o),m=r?r.scale.bandwidth():1,b=n?n.scale.bandwidth():1,v=m*(a-f-c)-t.insetLeft-t.insetRight;return(p*v+e.insetTop+e.insetBottom)/b+s+u}return!!(e||n)*Math.max(1,Math.min(60,h*d))*20+!!r*30+60}function Dh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=e.scale.exponent();i=c=>Math.pow(c,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=mr(r);return Math.abs(i(a)-i(o))}const Eh=new WeakMap;function Ll(t,e,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:s,render:c,...u}={}){return a=+a,i!=null&&(n??=null,s={...s,px:{value:i,scale:"x"}}),o!=null&&(r??=null,s={...s,py:{value:o,scale:"y"}}),{x:n,y:r,channels:s,...u,render:gg(function(f,d,l,h,p,m){p={...p,pointerSticky:!1};const b=p.ownerSVGElement,{data:v}=p.getMarkState(this);let x=Eh.get(b);x||Eh.set(b,x={sticky:!1,roots:[],renders:[]});let S=x.renders.push(P)-1;const{x:y,y:A,fx:M,fy:$}=d;let N=M?M(f.fx)-h.marginLeft:0,D=$?$(f.fy)-h.marginTop:0;y?.bandwidth&&(N+=y.bandwidth()/2),A?.bandwidth&&(D+=A.bandwidth()/2);const R=f.fi!=null;let T;if(R){let I=x.facetStates;I||(x.facetStates=I=new Map),T=I.get(this),T||I.set(this,T=new Map)}const[O,G]=ga(this,h),{px:q,py:k}=l,Y=q?I=>q[I]:vg(l,O),rt=k?I=>k[I]:yg(l,G);let Q,E,W,Z;function B(I,K){if(R)if(Z&&(Z=cancelAnimationFrame(Z)),I==null)T.delete(f.fi);else{T.set(f.fi,K),Z=requestAnimationFrame(()=>{Z=null;for(const[L,F]of T)if(F<K||F===K&&L<f.fi){I=null;break}P(I)});return}P(I)}function P(I){if(Q===I&&W===x.sticky)return;Q=I,W=p.pointerSticky=x.sticky;const K=Q==null?[]:[Q];R&&(K.fx=f.fx,K.fy=f.fy,K.fi=f.fi);const L=m(K,d,l,h,p);if(E){if(R){const F=E.parentNode,V=E.getAttribute("transform"),C=L.getAttribute("transform");V?L.setAttribute("transform",V):L.removeAttribute("transform"),C?F.setAttribute("transform",C):F.removeAttribute("transform"),L.removeAttribute("aria-label"),L.removeAttribute("aria-description"),L.removeAttribute("aria-hidden")}E.replaceWith(L)}if(x.roots[S]=E=L,!(Q==null&&T?.size>1)){const F=Q==null?null:ua(v)?v[Q]:v.get(Q);p.dispatchValue(F)}return L}function z(I){if(x.sticky||I.pointerType==="mouse"&&I.buttons===1)return;let[K,L]=Gy(I);K-=N,L-=D;const F=K<h.marginLeft||K>h.width-h.marginRight?1:t,V=L<h.marginTop||L>h.height-h.marginBottom?1:e;let C=null,X=a*a;for(const H of f){const et=F*(Y(H)-K),nt=V*(rt(H)-L),J=et*et+nt*nt;J<=X&&(C=H,X=J)}if(C!=null&&(t!==1||e!==1)){const H=Y(C)-K,et=rt(C)-L;X=H*H+et*et}B(C,X)}function U(I){I.pointerType==="mouse"&&Q!=null&&(x.sticky&&x.roots.some(K=>K?.contains(I.target))||(x.sticky?(x.sticky=!1,x.renders.forEach(K=>K(null))):(x.sticky=!0,P(Q)),I.stopImmediatePropagation()))}function tt(I){I.pointerType==="mouse"&&(x.sticky||B(null))}return b.addEventListener("pointerenter",z),b.addEventListener("pointermove",z),b.addEventListener("pointerdown",U),b.addEventListener("pointerleave",tt),P(null)},c)}}function X7(t){return Ll(1,1,t)}function Z7(t){return Ll(1,.01,t)}function Lh(t){return Ll(.01,1,t)}function vg({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function yg({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function xg(t){return ci(t)&&t.interval===void 0?void 0:"tabular-nums"}function J7(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:s=0,marginBottom:c=16+r,marginLeft:u=0,style:f,ticks:d=(i-u-s)/64,tickFormat:l,fontVariant:h=xg(t),round:p=!0,opacity:m,className:b}=e;const v=Nl(e);b=Dl(b),m=we(m)[1],l===null&&(l=()=>null);const x=ce("svg",v).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(O=>O.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call(El,f);let S=O=>O.selectAll(".tick line").attr("y1",a+c-o),y;const A=p?(O,G)=>O.rangeRound(G):(O,G)=>O.range(G),{type:M,domain:$,range:N,interpolate:D,scale:R,pivot:T}=t;if(D){const O=N===void 0?D:Zs(D.length===1?Tl(D):D,N);y=A(R.copy(),fn(le(u,i-s),Math.min($.length+(T!==void 0),N===void 0?1/0:N.length)));const G=256,q=v.document.createElement("canvas");q.width=G,q.height=1;const k=q.getContext("2d");for(let Y=0,rt=G-1;Y<G;++Y)k.fillStyle=O(Y/rt),k.fillRect(Y,0,1,1);x.append("image").attr("opacity",m).attr("x",u).attr("y",a).attr("width",i-u-s).attr("height",o-a-c).attr("preserveAspectRatio","none").attr("xlink:href",q.toDataURL())}else if(M==="threshold"){const O=$,G=l===void 0?q=>q:typeof l=="string"?Zi(l):l;y=A(nl().domain([-1,N.length-1]),[u,i-s]),x.append("g").attr("fill-opacity",m).selectAll().data(N).enter().append("rect").attr("x",(q,k)=>y(k-1)).attr("y",a).attr("width",(q,k)=>y(k)-y(k-1)).attr("height",o-a-c).attr("fill",q=>q),d=ge(O,(q,k)=>k),l=q=>G(O[q],q)}else y=A(nc().domain($),[u,i-s]),x.append("g").attr("fill-opacity",m).selectAll().data($).enter().append("rect").attr("x",y).attr("y",a).attr("width",Math.max(0,y.bandwidth()-1)).attr("height",o-a-c).attr("fill",R),S=()=>{};return x.append("g").attr("transform",`translate(0,${o-c})`).call(f2(y).ticks(Array.isArray(d)?null:d,typeof l=="string"?l:void 0).tickFormat(typeof l=="function"?l:void 0).tickSize(r).tickValues(Array.isArray(d)?d:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ae(h,"normal")).call(S).call(O=>O.select(".domain").remove()),n!==void 0&&x.append("text").attr("x",u).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),x.node()}const Os=Math.PI/180;function Rl(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=hu(n),t.markerMid=hu(r),t.markerEnd=hu(i)}function hu(t){if(t==null||t===!1)return null;if(t===!0)return Ih;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Rh("auto");case"arrow-reverse":return Rh("auto-start-reverse");case"dot":return Q7;case"circle":case"circle-fill":return Ih;case"circle-stroke":return K7;case"tick":return pu("auto");case"tick-x":return pu(90);case"tick-y":return pu(0)}throw new Error(`invalid marker: ${t}`)}function Rh(t){return(e,n)=>ce("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Q7(t,e){return ce("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Ih(t,e){return ce("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function K7(t,e){return ce("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function pu(t){return(e,n)=>ce("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let t9=0;function wg(t,e,{stroke:n},r){return $g(t,e,n&&(i=>n[i]),null,r)}function e9(t,e,{stroke:n,z:r},i){return $g(t,e,n&&(([o])=>n[o]),r,i)}const xf=1,Mg=2;function n9(t,e){const n=new Uint8Array(e.length),r=t.data().filter(o=>o.length>1),i=r.length;for(let o=0,a=yf;o<i;++o){const s=r[o];if(s.length>1){const c=s[0];a!==(a=Yn(e[c]))&&(n[c]|=xf)}}for(let o=i-1,a=yf;o>=0;--o){const s=r[o];if(s.length>1){const c=s[0];a!==(a=Yn(e[c]))&&(n[c]|=Mg)}}return([o])=>n[o]}function $g(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a,s){if(!e&&!n&&!r)return;const c=new Map,u=a&&n9(t,a);function f(d,l,h){return function(p){if(h&&!h(p))return;const m=o(p);let b=c.get(l);b||c.set(l,b=new Map);let v=b.get(m);if(!v){const x=this.parentNode.insertBefore(l(m,s),this),S=`plot-marker-${++t9}`;x.setAttribute("id",S),b.set(m,v=`url(#${S})`)}this.setAttribute(d,v)}}e&&t.each(f("marker-start",e,u&&(d=>u(d)&xf))),n&&u&&t.each(f("marker-start",n,d=>!(u(d)&xf))),n&&t.each(f("marker-mid",n)),r&&t.each(f("marker-end",r,u&&(d=>u(d)&Mg)))}function Sg({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Ag(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Tg({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Ag(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Ag(t,e,n){return t===void 0&&e===void 0&&n===void 0?Fe?[1,0]:[.5,.5]:[e,n]}function Cg(t,{interval:e}){return t={..._c(t)},t.interval=vl(t.interval===void 0?e:t.interval),t}function Ng(t,e,n,r){const{[t]:i,[`${t}1`]:o,[`${t}2`]:a}=n,{value:s,interval:c}=Cg(i,n);if(s==null||c==null&&!r)return n;const u=gc(i);if(c==null){let h;const p={transform:m=>h||(h=wr(m,s)),label:u};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0&&!(o===a&&r)?p:a}}let f,d;function l(h){return d!==void 0&&h===f?d:d=ge(wr(f=h,s),p=>c.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:l,label:u}:o,[`${t}2`]:a===void 0?{transform:h=>l(h).map(p=>c.offset(p)),label:u}:a})}function kg(t,e,n){const{[t]:r}=n,{value:i,interval:o}=Cg(r,n);return i==null||o==null?n:e({...n,[t]:{label:gc(r),transform:a=>{const s=ge(wr(a,i),u=>o.floor(u)),c=s.map(u=>o.offset(u));return s.map(Nn(s)?(u,f)=>u==null||isNaN(u=+u)||(f=c[f],f==null)||isNaN(f=+f)?void 0:new Date((u+f)/2):(u,f)=>u==null||(f=c[f],f==null)?NaN:(+u+ +f)/2)}}})}function r9(t={}){return Ng("x",Sg,t)}function i9(t={}){return Ng("y",Tg,t)}function o9(t={}){return kg("x",Sg,t)}function a9(t={}){return kg("y",Tg,t)}const Dg={ariaLabel:"rule",fill:null,stroke:"currentColor"};class s9 extends en{constructor(e,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:s=a,insetBottom:c=a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},_g(n,"x"),Dg),this.insetTop=me(s),this.insetBottom=me(c),Rl(this,n)}render(e,n,r,i,o){const{x:a,y:s}=n,{x:c,y1:u,y2:f}=r,{width:d,height:l,marginTop:h,marginRight:p,marginLeft:m,marginBottom:b}=i,{insetTop:v,insetBottom:x}=this;return ce("svg:g",o).call(tr,this,i,o).call(nr,this,{x:c&&a},Fe,0).call(S=>S.selectAll().data(e).enter().append("line").call(er,this).attr("x1",c?y=>c[y]:(m+d-p)/2).attr("x2",c?y=>c[y]:(m+d-p)/2).attr("y1",u&&!Is(s)?y=>u[y]+v:h+v).attr("y2",f&&!Is(s)?s.bandwidth?y=>f[y]+s.bandwidth()-x:y=>f[y]-x:l-b-x).call(ui,this,r).call(wg,this,r,o)).node()}}class c9 extends en{constructor(e,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:s=a,insetLeft:c=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},_g(n,"y"),Dg),this.insetRight=me(s),this.insetLeft=me(c),Rl(this,n)}render(e,n,r,i,o){const{x:a,y:s}=n,{y:c,x1:u,x2:f}=r,{width:d,height:l,marginTop:h,marginRight:p,marginLeft:m,marginBottom:b}=i,{insetLeft:v,insetRight:x}=this;return ce("svg:g",o).call(tr,this,i,o).call(nr,this,{y:c&&s},0,Fe).call(S=>S.selectAll().data(e).enter().append("line").call(er,this).attr("x1",u&&!Is(a)?y=>u[y]+v:m+v).attr("x2",f&&!Is(a)?a.bandwidth?y=>f[y]+a.bandwidth()-x:y=>f[y]-x:d-p-x).attr("y1",c?y=>c[y]:(h+l-b)/2).attr("y2",c?y=>c[y]:(h+l-b)/2).call(ui,this,r).call(wg,this,r,o)).node()}}function u9(t,e){let{x:n=Qn,y:r,y1:i,y2:o,...a}=i9(e);return[i,o]=Eg(r,i,o),new s9(t,{...a,x:n,y1:i,y2:o})}function f9(t,e){let{y:n=Qn,x:r,x1:i,x2:o,...a}=r9(e);return[i,o]=Eg(r,i,o),new c9(t,{...a,y:n,x1:i,x2:o})}function Eg(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Il(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let o=0;o<n;++o)i+=e[o](r)+t[o+1];return i}}const l9={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Lg="";let Ol=class extends en{constructor(e,n={}){const{x:r,y:i,text:o=si(e)&&jb(e)?Qn:_4,frameAnchor:a,textAnchor:s=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:c=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:u=1,lineWidth:f=1/0,textOverflow:d,monospace:l,fontFamily:h=l?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:b,fontWeight:v,rotate:x}=n,[S,y]=we(x,0),[A,M]=g9(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:A,optional:!0},rotate:{value:N4(S),optional:!0},text:{value:o,filter:ll,optional:!0}},n,l9),this.rotate=y,this.textAnchor=ae(s,"middle"),this.lineAnchor=tn(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+f,this.textOverflow=Rg(d),this.monospace=!!l,this.fontFamily=de(h),this.fontSize=M,this.fontStyle=de(m),this.fontVariant=de(b),this.fontWeight=de(v),this.frameAnchor=yc(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=Og(this),this.clipLine=Fg(this)}render(e,n,r,i,o){const{x:a,y:s}=n,{x:c,y:u,rotate:f,text:d,title:l,fontSize:h}=r,{rotate:p}=this,[m,b]=ga(this,i);return ce("svg:g",o).call(tr,this,i,o).call(Ig,this,d,i).call(nr,this,{x:c&&a,y:u&&s}).call(v=>v.selectAll().data(e).enter().append("text").call(er,this).call(d9,this,d,l).attr("transform",Il`translate(${c?x=>c[x]:m},${u?x=>u[x]:b})${f?x=>` rotate(${f[x]})`:p?` rotate(${p})`:""}`).call(dt,"font-size",h&&(x=>h[x])).call(ui,this,r)).node()}};function Rg(t){return t==null?null:tn(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function d9(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:s,clipLine:c}=e;t.each(function(u){const f=s(Ui(n[u])??"").map(c),d=f.length,l=i==="top"?.71:i==="bottom"?1-d:(164-d*100)/200;if(d>1){let h=0;for(let p=0;p<d;++p){if(++h,!f[p])continue;const m=this.ownerDocument.createElementNS(Ci.svg,"tspan");m.setAttribute("x",0),p===h-1?m.setAttribute("y",`${(l+p)*o}em`):m.setAttribute("dy",`${h*o}em`),m.textContent=f[p],this.appendChild(m),h=0}}else l&&this.setAttribute("y",`${l*o}em`),this.textContent=f[0];if(a&&!r&&f[0]!==n[u]){const h=this.ownerDocument.createElementNS(Ci.svg,"title");h.textContent=n[u],this.appendChild(h)}})}function gr(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=bc(e,n)),new Ol(t,{...r,x:e,y:n})}function h9(t,{x:e=Qn,...n}={}){return new Ol(t,a9({...n,x:e}))}function p9(t,{y:e=Qn,...n}={}){return new Ol(t,o9({...n,y:e}))}function Ig(t,e,n){dt(t,"text-anchor",e.textAnchor),dt(t,"font-family",e.fontFamily),dt(t,"font-size",e.fontSize),dt(t,"font-style",e.fontStyle),dt(t,"font-variant",e.fontVariant===void 0?m9(n):e.fontVariant),dt(t,"font-weight",e.fontWeight)}function m9(t){return t&&(E4(t)||Nn(t))?"tabular-nums":void 0}const b9=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function g9(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),b9.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function _9(t,e,n){const r=[];let i,o=0;for(const[a,s,c]of v9(t)){if(i===void 0&&(i=a),o>i&&n(t,i,s)>e&&(r.push(t.slice(i,o)+(t[o-1]===Lg?"-":"")),i=a),c){r.push(t.slice(i,s)),i=void 0;continue}o=s}return r}function*v9(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case Lg:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const Oh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Fl(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Qi(t,i))r+=Oh[t[i]]??(jg(t,i)?120:Oh.e);return r}function Pl(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Qi(t,i))r+=jg(t,i)?126:63;return r}function Og({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const r=t?Pl:Fl,i=e*100;return o=>_9(o,i,r)}function Fg({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const r=t?Pl:Fl,i=e*100;switch(n){case"clip-start":return o=>Ph(o,i,r,"");case"clip-end":return o=>Fh(o,i,r,"");case"ellipsis-start":return o=>Ph(o,i,r,Mi);case"ellipsis-middle":return o=>y9(o,i,r,Mi);case"ellipsis-end":return o=>Fh(o,i,r,Mi)}}const Mi="";function Bi(t,e,n,r){const i=[];let o=0;for(let a=0,s=0,c=t.length;a<c;a=s){s=Qi(t,a);const u=n(t,a,s);if(o+u>e){for(o+=r;o>e&&a>0;)s=a,a=i.pop(),o-=n(t,a,s);return[a,e-o]}o+=u,i.push(a)}return[-1,0]}function Fh(t,e,n,r){t=t.trim();const i=n(r),[o]=Bi(t,e,n,i);return o<0?t:t.slice(0,o).trimEnd()+r}function y9(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r)/2,[a,s]=Bi(t,e/2,n,o),[c]=Bi(t,i-e/2-s+o,n,-o);return c<0?r:t.slice(0,a).trimEnd()+r+t.slice(Qi(t,c)).trimStart()}function Ph(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r),[a]=Bi(t,i-e+o,n,-o);return a<0?r:r+t.slice(Qi(t,a)).trimStart()}const wf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,jh=new RegExp("\\p{Extended_Pictographic}","uy");function Qi(t,e){return e+=x9(t,e)?2:1,M9(t,e)&&(e=wf.lastIndex),w9(t,e)?Qi(t,e+1):e}function Pg(t,e){return t.charCodeAt(e)<128}function x9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function w9(t,e){return t.charCodeAt(e)===8205}function M9(t,e){return Pg(t,e)?!1:(wf.lastIndex=e,wf.test(t))}function jg(t,e){return Pg(t,e)?!1:(jh.lastIndex=e,jh.test(t))}const $9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},qg=3.5,S9=qg*5,zg={draw(t,e,n){const r=e*n/S9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},T9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},A9=new Map([["arrow",zg],["spike",T9]]);function C9(t){return t&&typeof t.draw=="function"}function N9(t){if(C9(t))return t;const e=A9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class Ug extends en{constructor(e,n={}){const{x:r,y:i,r:o=qg,length:a,rotate:s,shape:c=zg,anchor:u="middle",frameAnchor:f}=n,[d,l]=we(a,12),[h,p]=we(s,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:d,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,$9),this.r=+o,this.length=l,this.rotate=p,this.shape=N9(c),this.anchor=tn(u,"anchor",["start","middle","end"]),this.frameAnchor=yc(f)}render(e,n,r,i,o){const{x:a,y:s}=n,{x:c,y:u,length:f,rotate:d}=r,{length:l,rotate:h,anchor:p,shape:m,r:b}=this,[v,x]=ga(this,i);return ce("svg:g",o).call(tr,this,i,o).call(nr,this,{x:c&&a,y:u&&s}).call(S=>S.selectAll().data(e).enter().append("path").call(er,this).attr("transform",Il`translate(${c?y=>c[y]:v},${u?y=>u[y]:x})${d?y=>` rotate(${d[y]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?f?y=>` translate(0,${f[y]})`:` translate(0,${l})`:f?y=>` translate(0,${f[y]/2})`:` translate(0,${l/2})`}`).attr("d",f?y=>{const A=Or();return m.draw(A,f[y],b),A}:(()=>{const y=Or();return m.draw(y,l,b),y})()).call(ui,this,r)).node()}}function k9(t,e={}){const{x:n=Qn,...r}=e;return new Ug(t,{...r,x:n})}function D9(t,e={}){const{y:n=Qn,...r}=e;return new Ug(t,{...r,y:n})}function Cr(t,e){return arguments.length<2&&!si(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Sc({anchor:t}={},e){return t===void 0?e[0]:tn(t,"anchor",e)}function Bg(t){return Sc(t,["left","right"])}function Hg(t){return Sc(t,["right","left"])}function Yg(t){return Sc(t,["bottom","top"])}function Wg(t){return Sc(t,["top","bottom"])}function Gg(){const[t,e]=Cr(...arguments);return Xg("y",Bg(e),t,e)}function E9(){const[t,e]=Cr(...arguments);return Xg("fy",Hg(e),t,e)}function Vg(){const[t,e]=Cr(...arguments);return Zg("x",Yg(e),t,e)}function L9(){const[t,e]=Cr(...arguments);return Zg("fx",Wg(e),t,e)}function Xg(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:c=r,fillOpacity:u=i,textAnchor:f,textStroke:d,textStrokeOpacity:l,textStrokeWidth:h,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:b,x:v,margin:x,marginTop:S=x===void 0?20:x,marginRight:y=x===void 0?e==="right"?40:0:x,marginBottom:A=x===void 0?20:x,marginLeft:M=x===void 0?e==="left"?40:0:x,label:$,labelAnchor:N,labelArrow:D,labelOffset:R,ariaLabel:T=`${t}-axis`,...O}){return p=me(p),m=me(m),b=me(b),N!==void 0&&(N=tn(N,"labelAnchor",["center","top","bottom"])),D=i_(D),bg(p&&!Se(o)?R9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:p,tickPadding:m,tickRotate:b,x:v,ariaLabel:T,...O}):null,Se(c)?null:O9(t,e,n,{fill:c,fillOpacity:u,stroke:d,strokeOpacity:l,strokeWidth:h,textAnchor:f,tickSize:p,tickPadding:m,tickRotate:b,x:v,marginTop:S,marginRight:y,marginBottom:A,marginLeft:M,ariaLabel:T,...O}),!Se(c)&&$!==null?gr([],t_({fill:c,fillOpacity:u,...O},function(G,q,k,Y,rt){const Q=Y[t],{marginTop:E,marginRight:W,marginBottom:Z,marginLeft:B}=t==="y"&&rt.inset||rt,P=N??(Q.bandwidth?"center":"top"),z=R??(e==="right"?W:B)-3;return P==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=P,this.frameAnchor=`${P}-${e}`,this.rotate=0),this.dy=P==="top"?3-E:P==="bottom"?Z-3:0,this.dx=e==="right"?z:-z,this.ariaLabel=`${T} label`,{facets:[[0]],channels:{text:{value:[r_(t,Q,{anchor:e,label:$,labelAnchor:P,labelArrow:D})]}}}})):null)}function Zg(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:c=r,fillOpacity:u=i,textAnchor:f,textStroke:d,textStrokeOpacity:l,textStrokeWidth:h,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:b,y:v,margin:x,marginTop:S=x===void 0?e==="top"?30:0:x,marginRight:y=x===void 0?20:x,marginBottom:A=x===void 0?e==="bottom"?30:0:x,marginLeft:M=x===void 0?20:x,label:$,labelAnchor:N,labelArrow:D,labelOffset:R,ariaLabel:T=`${t}-axis`,...O}){return p=me(p),m=me(m),b=me(b),N!==void 0&&(N=tn(N,"labelAnchor",["center","left","right"])),D=i_(D),bg(p&&!Se(o)?I9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:p,tickPadding:m,tickRotate:b,y:v,ariaLabel:T,...O}):null,Se(c)?null:F9(t,e,n,{fill:c,fillOpacity:u,stroke:d,strokeOpacity:l,strokeWidth:h,textAnchor:f,tickSize:p,tickPadding:m,tickRotate:b,y:v,marginTop:S,marginRight:y,marginBottom:A,marginLeft:M,ariaLabel:T,...O}),!Se(c)&&$!==null?gr([],t_({fill:c,fillOpacity:u,...O},function(G,q,k,Y,rt){const Q=Y[t],{marginTop:E,marginRight:W,marginBottom:Z,marginLeft:B}=t==="x"&&rt.inset||rt,P=N??(Q.bandwidth?"center":"right"),z=R??(e==="top"?E:Z)-3;return P==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${P}`,this.textAnchor=P==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-z:z,this.dx=P==="right"?W-3:P==="left"?3-B:0,this.ariaLabel=`${T} label`,{facets:[[0]],channels:{text:{value:[r_(t,Q,{anchor:e,label:$,labelAnchor:P,labelArrow:D})]}}}})):null)}function R9(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:s=e,tickSize:c,inset:u=0,insetLeft:f=u,insetRight:d=u,dx:l=0,y:h=t==="y"?void 0:null,ariaLabel:p,...m}){return Ki(D9,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:s,y:h,...m,dx:e==="left"?+l-Fe+ +f:+l+Fe-d,anchor:"start",length:c,shape:e==="left"?Y9:W9})}function I9(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:s=e,tickSize:c,inset:u=0,insetTop:f=u,insetBottom:d=u,dy:l=0,x:h=t==="x"?void 0:null,ariaLabel:p,...m}){return Ki(k9,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:s,x:h,...m,dy:e==="bottom"?+l-Fe-d:+l+Fe+ +f,anchor:"start",length:c,shape:e==="bottom"?B9:H9})}function O9(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Os):0),text:c,textAnchor:u=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:f=a>60?"top":a<-60?"bottom":"middle",fontVariant:d,inset:l=0,insetLeft:h=l,insetRight:p=l,dx:m=0,ariaLabel:b,y:v=t==="y"?void 0:null,...x}){return Ki(p9,t,n,{ariaLabel:`${b} tick label`},{facetAnchor:r,frameAnchor:i,text:c,textAnchor:u,lineAnchor:f,fontVariant:d,rotate:a,y:v,...x,dx:e==="left"?+m-o-s+ +h:+m+ +o+ +s-p},function(S,y,A,M,$){d===void 0&&(this.fontVariant=n_(S)),c===void 0&&($.text=e_(S,y,A,M,e))})}function F9(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Os):0),text:c,textAnchor:u=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:f=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:d,inset:l=0,insetTop:h=l,insetBottom:p=l,dy:m=0,x:b=t==="x"?void 0:null,ariaLabel:v,...x}){return Ki(h9,t,n,{ariaLabel:`${v} tick label`},{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:u,lineAnchor:f,fontVariant:d,rotate:a,x:b,...x,dy:e==="bottom"?+m+ +o+ +s-p:+m-o-s+ +h},function(S,y,A,M,$){d===void 0&&(this.fontVariant=n_(S)),c===void 0&&($.text=e_(S,y,A,M,e))})}function P9(){const[t,e]=Cr(...arguments);return Jg("y",Bg(e),t,e)}function j9(){const[t,e]=Cr(...arguments);return Jg("fy",Hg(e),t,e)}function q9(){const[t,e]=Cr(...arguments);return Qg("x",Yg(e),t,e)}function z9(){const[t,e]=Cr(...arguments);return Qg("fx",Wg(e),t,e)}function Jg(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:o=e==="left"?i:null,x2:a=e==="right"?i:null,ariaLabel:s=`${t}-grid`,ariaHidden:c=!0,...u}){return Ki(f9,t,n,{ariaLabel:s,ariaHidden:c},{y:r,x1:o,x2:a,...Kg(u)})}function Qg(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:o=e==="top"?i:null,y2:a=e==="bottom"?i:null,ariaLabel:s=`${t}-grid`,ariaHidden:c=!0,...u}){return Ki(u9,t,n,{ariaLabel:s,ariaHidden:c},{x:r,y1:o,y2:a,...Kg(u)})}function Kg({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function t_({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:s,pointerEvents:c,shapeRendering:u,clip:f=!1},d){return[,t]=ti(t),[,e]=we(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:s,pointerEvents:c,shapeRendering:u,clip:f,initializer:d}}function Ki(t,e,n,r,i,o){let a;function s(f,d,l,h,p,m){const b=f==null&&(e==="fx"||e==="fy"),{[e]:v}=h;if(!v)throw new Error(`missing scale: ${e}`);const x=v.domain();let{interval:S,ticks:y,tickFormat:A,tickSpacing:M=e==="x"?80:35}=i;if(typeof y=="string"&&o_(v)&&(S=y,y=void 0),y===void 0&&(y=la(S,v.type)??U9(v,M)),f==null){if(si(y))f=oi(y);else if(C4(y))f=mu(y,...mr(x));else if(v.interval){let N=v.interval;if(v.ticks){const[D,R]=mr(x),T=(R-D)/N[ca];N=sh(N,T/y)??N,f=mu(N,D,R)}else{f=x;const D=f.length;N=sh(N,D/y)??N,N!==v.interval&&(f=mu(N,...mr(f)))}if(N===v.interval){const D=Math.round(f.length/y);D>1&&(f=f.filter((R,T)=>T%D===0))}}else v.ticks?f=v.ticks(y):f=x;if(!v.ticks&&f.length&&f!==x){const N=new Ys(x);f=f.filter(D=>N.has(D)),f.length||br(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?d=[fa(f)]:a[e]={scale:e,value:Qn}}o?.call(this,v,f,y,A,a);const $=Object.fromEntries(Object.entries(a).map(([N,D])=>[N,{...D,value:wr(f,D.value)}]));return b&&(d=m.filterFacets(f,$)),{data:f,facets:d,channels:$}}const c=zi(i).initializer,u=t(n,zi({...i,initializer:s},c));return n==null?(a=u.channels,u.channels={}):a={},r!==void 0&&Object.assign(u,r),u.clip===void 0&&(u.clip=!1),u}function U9(t,e){const[n,r]=mr(t.range());return(r-n)/e}function e_(t,e,n,r,i){return{value:jl(t,e,n,r,i)}}function jl(t,e,n,r,i){return typeof r=="function"&&!(t.type==="log"&&t.tickFormat)?r:r===void 0&&e&&Nn(e)?l4(t.type,e,i)??Ui:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):typeof r=="string"&&t.domain().length>0?(Nn(t.domain())?sa:Zi)(r):r===void 0?Ui:sn(r)}function mu(t,e,n){return t.range(e,t.offset(t.floor(n)))}const B9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},H9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Y9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},W9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function n_(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function r_(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&o_(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){const a=V8(e);a&&(o=/x$/.test(t)||i==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function i_(t="auto"){return Se(t)?!1:typeof t=="boolean"?t:tn(t,"labelArrow",["auto","up","right","down","left"])}function o_(t){return Nn(t.domain())}function qh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function G9(t,{opacity:e,...n}={}){if(!ci(t)&&!lg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return a_(t,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",we(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function V9(t,{fill:e=t.hint?.fill!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=t.hint?.stroke!==void 0?t.hint.stroke:Se(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...s}={},c){const[u,f]=ti(e),[d,l]=ti(r),h=qh(c,u),p=qh(c,d),m=a*a*Math.PI;return n=we(n)[1],i=we(i)[1],o=we(o)[1],a_(t,s,(b,v,x,S)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",x).attr("height",S).attr("fill",u==="color"?y=>h.scale(y):f).attr("fill-opacity",n).attr("stroke",d==="color"?y=>p.scale(y):l).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",y=>{const A=Or();return t.scale(y).draw(A,m),A}))}function a_(t,e={},n){let{columns:r,tickFormat:i,fontVariant:o=xg(t),swatchSize:a=15,swatchWidth:s=a,swatchHeight:c=a,marginLeft:u=0,className:f,style:d,width:l}=e;const h=Nl(e);f=Dl(f),i=jl(t.scale,t.domain,void 0,i);const p=ce("div",h).attr("class",`${f}-swatches ${f}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`:where(.${f}-swatches-columns .${f}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${f}-swatches-columns .${f}-swatch::before) {
  flex-shrink: 0;
}
:where(.${f}-swatches-columns .${f}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,t,s,c).call(b=>b.append("div").attr("class",`${f}-swatch-label`).attr("title",i).text(i))):(m=`:where(.${f}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${f}-swatches-wrap .${f}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,t,s,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(b=>b.insert("style","*").text(`:where(.${f}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${f}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",l===void 0?null:`${+l}px`).style("font-variant",ae(o,"normal")).call(El,d).node()}const Mf=new Map([["symbol",V9],["color",c_],["opacity",Z9]]);function X9(t,e,n={}){return(r,i)=>{if(!Mf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return Mf.get(r)(t[r],s_(e,n[r],i),o=>t[o])}}function s_({className:t,...e},{label:n,ticks:r,tickFormat:i}={},o){return O4(o,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function c_(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return G9(t,n);case"ramp":return J7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function Z9({type:t,interpolate:e,...n},{legend:r=!0,color:i=vr(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return c_({type:t,...n,interpolate:J9(i)},{legend:r,...o})}function J9(t){const{r:e,g:n,b:r}=vr(t)||vr(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function Q9(t,e,n){const r=[];for(const[i,o]of Mf){const a=n[i];if(a?.legend&&i in t){const s=o(t[i],s_(e,t[i],a),c=>t[c]);s!=null&&r.push(s)}}return r}function K9(t,{inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:o=e}={}){t.insetTop=me(n),t.insetRight=me(r),t.insetBottom=me(i),t.insetLeft=me(o)}function tM(t,{r:e,rx:n,ry:r,rx1:i=e,ry1:o=e,rx2:a=e,ry2:s=e,rx1y1:c=i!==void 0?+i:o!==void 0?+o:0,rx1y2:u=i!==void 0?+i:s!==void 0?+s:0,rx2y1:f=a!==void 0?+a:o!==void 0?+o:0,rx2y2:d=a!==void 0?+a:s!==void 0?+s:0}={}){c||u||f||d?(t.rx1y1=c,t.rx1y2=u,t.rx2y1=f,t.rx2y2=d):(t.rx=ae(n,"auto"),t.ry=ae(r,"auto"))}function eM(t,e,n,r,i,o){const{rx1y1:a,rx1y2:s,rx2y1:c,rx2y2:u}=o;typeof e!="function"&&(e=sn(e)),typeof n!="function"&&(n=sn(n)),typeof r!="function"&&(r=sn(r)),typeof i!="function"&&(i=sn(i));const f=Math.max(Math.abs(a+c),Math.abs(s+u)),d=Math.max(Math.abs(a+s),Math.abs(c+u));t.attr("d",l=>{const h=e(l),p=n(l),m=r(l),b=i(l),v=h>m,x=p>b,S=v?m:h,y=v?h:m,A=x?b:p,M=x?p:b,$=Math.min(1,(y-S)/f,(M-A)/d),N=$*(v?x?u:c:x?s:a),D=$*(v?x?s:a:x?u:c),R=$*(v?x?a:s:x?c:u),T=$*(v?x?c:u:x?a:s);return`M${S},${A+ja(N,T)}A${N},${N} 0 0 ${N<0?0:1} ${S+Pa(N,T)},${A}H${y-Pa(D,R)}A${D},${D} 0 0 ${D<0?0:1} ${y},${A+ja(D,R)}V${M-ja(R,D)}A${R},${R} 0 0 ${R<0?0:1} ${y-Pa(R,D)},${M}H${S+Pa(T,N)}A${T},${T} 0 0 ${T<0?0:1} ${S},${M-ja(T,N)}Z`})}function Pa(t,e){return e<0?t:Math.abs(t)}function ja(t,e){return e<0?Math.abs(t):t}const nM={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},rM={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class iM extends en{constructor(e={}){const{anchor:n=null}=e;super(Xa,void 0,e,n==null?nM:rM),this.anchor=Fb(n,"anchor",["top","right","bottom","left"]),K9(this,e),n||tM(this,e)}render(e,n,r,i,o){const{marginTop:a,marginRight:s,marginBottom:c,marginLeft:u,width:f,height:d}=i,{anchor:l,insetTop:h,insetRight:p,insetBottom:m,insetLeft:b}=this,{rx:v,ry:x,rx1y1:S,rx1y2:y,rx2y1:A,rx2y2:M}=this,$=u+b,N=f-s-p,D=a+h,R=d-c-m;return ce(l?"svg:line":S||y||A||M?"svg:path":"svg:rect",o).datum(0).call(tr,this,i,o).call(er,this).call(ui,this,r).call(nr,this,{}).call(l==="left"?T=>T.attr("x1",$).attr("x2",$).attr("y1",D).attr("y2",R):l==="right"?T=>T.attr("x1",N).attr("x2",N).attr("y1",D).attr("y2",R):l==="top"?T=>T.attr("x1",$).attr("x2",N).attr("y1",D).attr("y2",D):l==="bottom"?T=>T.attr("x1",$).attr("x2",N).attr("y1",R).attr("y2",R):S||y||A||M?T=>T.call(eM,$,D,N,R,this):T=>T.attr("x",$).attr("y",D).attr("width",N-$).attr("height",R-D).attr("rx",v).attr("ry",x)).node()}}function oM(t){return new iM(t)}const bu={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},aM=new Set(["geometry","href","src","ariaLabel","scales"]);class sM extends en{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&si(e)&&jb(e)&&(n={...n,title:Qn});const{x:r,y:i,x1:o,x2:a,y1:s,y2:c,anchor:u,preferredAnchor:f="bottom",monospace:d,fontFamily:l=d?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:p,fontVariant:m,fontWeight:b,lineHeight:v=1,lineWidth:x=20,frameAnchor:S,format:y,textAnchor:A="start",textOverflow:M,textPadding:$=8,title:N,pointerSize:D=12,pathFilter:R="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:s,scale:"y",optional:c==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:c,scale:"y",optional:s==null},title:{value:N,optional:!0}},n,bu),this.anchor=hf(u,"anchor"),this.preferredAnchor=hf(f,"preferredAnchor"),this.frameAnchor=yc(S),this.textAnchor=ae(A,"middle"),this.textPadding=+$,this.pointerSize=+D,this.pathFilter=de(R),this.lineHeight=+v,this.lineWidth=+x,this.textOverflow=Rg(M),this.monospace=!!d,this.fontFamily=de(l),this.fontSize=me(h),this.fontStyle=de(p),this.fontVariant=de(m),this.fontWeight=de(b);for(const T in bu)T in this.channels&&(this[T]=bu[T]);this.splitLines=Og(this),this.clipLine=Fg(this),this.format=typeof y=="string"||typeof y=="function"?{title:y}:{...y}}render(e,n,r,i,o){const a=this,{x:s,y:c,fx:u,fy:f}=n,{ownerSVGElement:d,document:l}=o,{anchor:h,monospace:p,lineHeight:m,lineWidth:b}=this,{textPadding:v,pointerSize:x,pathFilter:S}=this,{marginTop:y,marginLeft:A}=i,{x1:M,y1:$,x2:N,y2:D,x:R=M??N,y:T=$??D}=r,O=u?u(e.fx)-A:0,G=f?f(e.fy)-y:0,[q,k]=ga(this,i),Y=vg(r,q),rt=yg(r,k),Q=p?Pl:Fl,E=Q(Mi);let W,Z;"title"in r?(W=zh.call(this,{title:r.channels.title},n),Z=dM):(W=zh.call(this,r.channels,n),Z=hM);const B=ce("svg:g",o).call(tr,this,i,o).call(Ig,this).call(nr,this,{x:R&&s,y:T&&c}).call(U=>U.selectAll().data(e).enter().append("g").attr("transform",tt=>`translate(${Math.round(Y(tt))},${Math.round(rt(tt))})`).call(er,this).call(tt=>tt.append("path").attr("filter",S)).call(tt=>tt.append("text").each(function(I){const K=Pr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const L=Z.call(a,I,e,W,n,r);if(typeof L=="string")for(const F of a.splitLines(L))P(K,{value:a.clipLine(F)});else{const F=new Set;for(const V of L){const{label:C=""}=V;C&&F.has(C)||(F.add(C),P(K,V))}}})));function P(U,{label:tt,value:I,color:K,opacity:L}){tt??="",I??="";const F=K!=null||L!=null;let V,C=b*100;const[X]=Bi(tt,C,Q,E);if(X>=0)tt=tt.slice(0,X).trimEnd()+Mi,V=I.trim(),I="";else{(tt||!I&&!F)&&(I=" "+I);const[et]=Bi(I,C-Q(tt),Q,E);et>=0&&(V=I.trim(),I=I.slice(0,et).trimEnd()+Mi)}const H=U.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");tt&&H.append("tspan").attr("font-weight","bold").text(tt),I&&H.append(()=>l.createTextNode(I)),F&&H.append("tspan").text(" ").attr("fill",K).attr("fill-opacity",L).style("user-select","none"),V&&H.append("title").text(V)}function z(){const{width:U,height:tt}=i.facet??i;B.selectChildren().each(function(I){let{x:K,width:L,height:F}=this.getBBox();L=Math.round(L),F=Math.round(F);let V=h;if(V===void 0){const H=Y(I)+O,et=rt(I)+G,nt=H+L+x+v*2<U,J=H-L-x-v*2>0,st=et+F+x+v*2<tt,ut=et-F-x-v*2>0;V=nt&&J?st&&ut?a.preferredAnchor:ut?"bottom":"top":st&&ut?nt?"left":"right":(nt||J)&&(st||ut)?`${ut?"bottom":"top"}-${nt?"left":"right"}`:a.preferredAnchor}const C=this.firstChild,X=this.lastChild;if(C.setAttribute("d",lM(V,x,v,L,F)),K)for(const H of X.childNodes)H.setAttribute("x",-K);X.setAttribute("y",`${+uM(V,X.childNodes.length,m).toFixed(6)}em`),X.setAttribute("transform",`translate(${fM(V,x,v,L,F)})`)}),B.attr("visibility",null)}return e.length&&(B.attr("visibility","hidden"),d.isConnected?Promise.resolve().then(z):typeof requestAnimationFrame<"u"&&requestAnimationFrame(z)),B.node()}}function cM(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=bc(e,n)),new sM(t,{...r,x:e,y:n})}function uM(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function fM(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function lM(t,e,n,r,i){const o=r+n*2,a=i+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function zh(t,e){const n={};let r=this.format;r=Uh(r,t,"x"),r=Uh(r,t,"y"),this.format=r;for(const i in r){const o=r[i];if(!(o===null||o===!1))if(i==="fx"||i==="fy")n[i]=!0;else{const a=bh(t,i);a&&(n[i]=a)}}for(const i in t){if(i in n||i in r||aM.has(i)||(i==="x"||i==="y")&&t.geometry)continue;const o=bh(t,i);if(o){if(o.scale==null&&o.defaultScale==="color")continue;n[i]=o}}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const i in n){const o=this.format[i];if(typeof o=="string"){const a=n[i]?.value??e[i]?.domain()??[];this.format[i]=(Nn(a)?sa:Zi)(o)}else if(o===void 0||o===!0){const a=e[i];this.format[i]=a?.bandwidth?jl(a,a.domain()):Ui}}return n}function Uh(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([s])=>s===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function dM(t,e,{title:n}){return this.format.title(n.value[t],t)}function*hM(t,e,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:Fs(r,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Hh(r,n,"x"),value:Bh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Hh(r,n,"y"),value:Bh(this.format.y2,n.y1,a,t)};else{const s=a.value[t],c=a.scale;if(!xr(s)&&c==null)continue;yield{label:Fs(r,n,o),value:this.format[o](s,t),color:c==="color"?i[o][t]:null,opacity:c==="opacity"?i[o][t]:null}}}}function Bh(t,e,n,r){return n.hint?.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}${t(n.value[r],r)}`}function Hh(t,e,n){const r=Fs(t,e,`${n}1`,n),i=Fs(t,e,`${n}2`,n);return r===i?r:`${r}${i}`}function Fs(t,e,n,r=n){const i=e[n],o=t[i?.scale??n];return String(o?.label??i?.label??r)}function Hi(t={}){const{facet:e,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:s}=t,c=Dl(t.className),u=t.marks===void 0?[]:Wh(t.marks);u.push(...yM(u));const f=_M(e,t),d=new Map;for(const E of u){const W=Gh(E,f,t);W&&d.set(E,W)}const l=new Map;f&&fo(l,[f],t),fo(l,d,t);const h=Wh(xM(u,l,t));for(const E of h){const W=Gh(E,f,t);W&&d.set(E,W)}u.unshift(...h);let p=n7(l,t);if(p!==void 0){const E=f?lu(p,f):void 0;for(const Z of u){if(Z.facet===null||Z.facet==="super")continue;const B=d.get(Z);B!==void 0&&(B.facetsIndex=Z.fx!=null||Z.fy!=null?lu(p,B):E)}const W=new Set;for(const{facetsIndex:Z}of d.values())Z?.forEach((B,P)=>{B?.length>0&&W.add(P)});p.forEach(0<W.size&&W.size<p.length?(Z,B)=>Z.empty=!W.has(B):Z=>Z.empty=!1);for(const Z of u)if(Z.facet==="exclude"){const B=d.get(Z);B!==void 0&&(B.facetsIndex=o7(B.facetsIndex))}}for(const E of Vt.keys())lf(t[E])&&E!=="fx"&&E!=="fy"&&l.set(E,[]);const m=new Map;for(const E of u){if(m.has(E))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:W,channels:Z}=d.get(E)??{},{data:B,facets:P,channels:z}=E.initialize(W,Z,t);ql(z,t),m.set(E,{data:B,facets:P,channels:z})}const b=gf(fo(l,m,t),t),v=G7(b,u,t);W8(b,v);const x=$h(b),{fx:S,fy:y}=x,A=S||y?cg(b,v):v,M=S||y?CM(x,v):v,$=Nl(t),N=$.document,D=Gs("svg").call(N.documentElement);let R=D;$.ownerSVGElement=D,$.className=c,$.projection=p7(t,A),$.path=function(){return Jf(this.projection??x7(x))},$.filterFacets=(E,W)=>lu(p,{channels:W,groups:Cl(E,W)}),$.getMarkState=E=>{const W=m.get(E),Z=d.get(E);return{...W,channels:{...W.channels,...Z?.channels}}},$.dispatchValue=E=>{R.value!==E&&(R.value=E,R.dispatchEvent(new $.document.defaultView.Event("input",{bubbles:!0})))};const T=new Set;for(const[E,W]of m)if(E.initializer!=null){const Z=E.facet==="super"?M:A,B=E.initializer(W.data,W.facets,W.channels,x,Z,$);if(B.data!==void 0&&(W.data=B.data),B.facets!==void 0&&(W.facets=B.facets),B.channels!==void 0){const{fx:P,fy:z,...U}=B.channels;gM(U),Object.assign(W.channels,U);for(const tt of Object.values(U)){const{scale:I}=tt;I!=null&&!j4(Vt.get(I))&&(u_(tt,t),T.add(I))}(P!=null||z!=null)&&d.set(E,!0)}}if(T.size){const E=new Map;fo(E,m,t,P=>T.has(P)),fo(l,m,t,P=>T.has(P));const W=AM(gf(E,t),b),{scales:Z,...B}=$h(W);Object.assign(b,W),Object.assign(x,B),Object.assign(x.scales,Z)}let O,G;p!==void 0&&(O={x:S?.domain(),y:y?.domain()},p=r7(p,O),G=i7(S,y,v));for(const[E,W]of m)W.values=E.scale(W.channels,x,$);const{width:q,height:k}=v;Pr(D).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",q).attr("height",k).attr("viewBox",`0 0 ${q} ${k}`).attr("aria-label",a).attr("aria-description",s).call(E=>E.append("style").text(`:where(.${c}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${c} text),
:where(.${c} tspan) {
  white-space: pre;
}`)).call(El,n);for(const E of u){const{channels:W,values:Z,facets:B}=m.get(E);if(p===void 0||E.facet==="super"){let P=null;if(B&&(P=B[0],P=E.filter(P,W,Z),P.length===0))continue;const z=E.render(P,x,Z,M,$);if(z==null)continue;D.appendChild(z)}else{let P;for(const z of p){if(!(E.facetAnchor?.(p,O,z)??!z.empty))continue;let U=null;if(B){const I=d.has(E);if(U=B[I?z.i:0],U=E.filter(U,W,Z),U.length===0)continue;!I&&U===B[0]&&(U=$4(U)),U.fx=z.x,U.fy=z.y,U.fi=z.i}const tt=E.render(U,x,Z,A,$);if(tt!=null){(P??=Pr(D).append("g")).append(()=>tt).datum(z);for(const I of["aria-label","aria-description","aria-hidden","transform"])tt.hasAttribute(I)&&(P.attr(I,tt.getAttribute(I)),tt.removeAttribute(I))}}P?.selectChildren().each(G)}}const Y=Q9(b,$,t),{figure:rt=r!=null||i!=null||o!=null||Y.length>0}=t;rt&&(R=N.createElement("figure"),R.className=`${c}-figure`,R.style.maxWidth="initial",r!=null&&R.append(Yh(N,r,"h2")),i!=null&&R.append(Yh(N,i,"h3")),R.append(...Y,D),o!=null&&R.append(pM(N,o)),"value"in D&&(R.value=D.value,delete D.value)),R.scale=t7(x.scales),R.legend=X9(b,$,t);const Q=N8();return Q>0&&Pr(D).append("text").attr("x",q).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Q.toLocaleString("en-US")} warning${Q===1?"":"s"}. Please check the console.`),R}function Yh(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function pM(t,e){const n=t.createElement("figcaption");return n.append(e),n}function Wh(t){return t.flat(1/0).filter(e=>e!=null).map(mM)}function mM(t){return typeof t.render=="function"?t:new bM(t)}class bM extends en{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function ql(t,e){for(const n in t)u_(t[n],e);return t}function u_(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:s=o?c=>c==null?NaN:c*100:S4(a,i)}=e[n]??{};s!=null&&(t.value=ge(t.value,s),t.transform=!1)}function gM(t){for(const e in t)Vb(e,t[e])}function fo(t,e,n,r=v4){for(const{channels:i}of e.values())for(const o in i){const a=i[o],{scale:s}=a;if(s!=null&&r(s))if(s==="projection"){if(!_7(n)){const c=n.x?.domain===void 0,u=n.y?.domain===void 0;if(c||u){const[f,d]=y7(a);c&&gu(t,"x",f),u&&gu(t,"y",d)}}}else gu(t,s,a)}return t}function gu(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function _M(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=ji(t.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Bo(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Bo(i,{value:r,scale:"fy"})),ql(o,e);const a=Cl(i,o);return{channels:o,groups:a,data:t.data}}function Gh(t,e,n){if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const c=ji(t.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Bo(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Bo(c,{value:i,scale:"fy"})),ql(u,n),{channels:u,groups:Cl(c,u)}}if(e===void 0)return;const{channels:o,groups:a,data:s}=e;if(t.facet!=="auto"||t.data===s)return{channels:o,groups:a};s.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&df(ji(t.data))===df(s)&&br(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function vM(t,e={}){return zi({...e,x:null,y:null},(n,r,i,o,a,s)=>s.getMarkState(t))}function yM(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?Z7:/^y$/i.test(i)?Lh:X7,r=i(vM(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===Lh?"left":"bottom");const a=cM(n.data,r);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function xM(t,e,n){let{projection:r,x:i={},y:o={},fx:a={},fy:s={},axis:c,grid:u,facet:f={},facet:{axis:d=c,grid:l}=f,x:{axis:h=c,grid:p=h===null?null:u}=i,y:{axis:m=c,grid:b=m===null?null:u}=o,fx:{axis:v=d,grid:x=v===null?null:l}=a,fy:{axis:S=d,grid:y=S===null?null:l}=s}=n;(r||!lf(i)&&!Vh("x",t))&&(h=p=null),(r||!lf(o)&&!Vh("y",t))&&(m=b=null),e.has("fx")||(v=x=null),e.has("fy")||(S=y=null),h===void 0&&(h=!Ua(t,"x")),m===void 0&&(m=!Ua(t,"y")),v===void 0&&(v=!Ua(t,"fx")),S===void 0&&(S=!Ua(t,"fy")),h===!0&&(h="bottom"),m===!0&&(m="left"),v===!0&&(v=h==="top"||h===null?"bottom":"top"),S===!0&&(S=m==="right"||m===null?"left":"right");const A=[];return za(A,y,j9,s),qa(A,S,E9,"right","left",f,s),za(A,x,z9,a),qa(A,v,L9,"top","bottom",f,a),za(A,b,P9,o),qa(A,m,Gg,"left","right",n,o),za(A,p,q9,i),qa(A,h,Vg,"bottom","top",n,i),A}function qa(t,e,n,r,i,o,a){if(!e)return;const s=wM(e);a=MM(s?r:e,o,a);const{line:c}=a;(n===Gg||n===Vg)&&c&&!Uo(c)&&t.push(oM($M(a))),t.push(n(a)),s&&t.push(n({...a,anchor:i,label:null}))}function za(t,e,n,r){!e||Uo(e)||t.push(n(SM(e,r)))}function wM(t){return/^\s*both\s*$/i.test(t)}function MM(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:c,fontVariant:u,ariaLabel:f,ariaDescription:d,label:l=e.label,labelAnchor:h,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:c,fontVariant:u,ariaLabel:f,ariaDescription:d,label:l,labelAnchor:h,labelArrow:p,labelOffset:m}}function $M(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function SM(t,{stroke:e=vc(t)?t:void 0,ticks:n=TM(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function TM(t){switch(typeof t){case"number":return!0;case"string":return!vc(t)}return si(t)||typeof t?.range=="function"}function Ua(t,e){const n=`${e}-axis `;return t.some(r=>r.ariaLabel?.startsWith(n))}function Vh(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function AM(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function CM({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:c}=Al(n),u=t&&Xh(t),f=e&&Xh(e);return{marginTop:e?f[0]:r,marginRight:t?s-u[1]:i,marginBottom:e?c-f[1]:o,marginLeft:t?u[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:c}}function Xh(t){const e=t.domain();if(e.length===0)return[0,t.bandwidth()];let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const NM=new Map([["basis",U6],["basis-closed",B6],["basis-open",H6],["bundle",Y6],["bump-x",D6],["bump-y",E6],["cardinal",W6],["cardinal-closed",G6],["cardinal-open",V6],["catmull-rom",X6],["catmull-rom-closed",Z6],["catmull-rom-open",J6],["linear",fc],["linear-closed",Q6],["monotone-x",K6],["monotone-y",t4],["natural",e4],["step",n4],["step-after",i4],["step-before",r4]]);function kM(t=fc,e){if(typeof t=="function")return t;const n=NM.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function DM(t=Ps,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Ps:kM(t,e)}function Ps(t){return fc(t)}function Zh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const EM={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class LM extends en{constructor(e,n={}){const{x1:r,y1:i,x2:o,y2:a,bend:s=0,headAngle:c=60,headLength:u=8,inset:f=0,insetStart:d=f,insetEnd:l=f,sweep:h}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,EM),this.bend=s===!0?22.5:Math.max(-90,Math.min(90,s)),this.headAngle=+c,this.headLength=+u,this.insetStart=+d,this.insetEnd=+l,this.sweep=RM(h)}render(e,n,r,i,o){const{x1:a,y1:s,x2:c=a,y2:u=s,SW:f}=r,{strokeWidth:d,bend:l,headAngle:h,headLength:p,insetStart:m,insetEnd:b}=this,v=f?y=>f[y]:sn(d===void 0?1:d),x=h*Os/2,S=p/1.5;return ce("svg:g",o).call(tr,this,i,o).call(nr,this,n).call(y=>y.selectAll().data(e).enter().append("path").call(er,this).attr("d",A=>{let M=a[A],$=s[A],N=c[A],D=u[A];const R=Math.hypot(N-M,D-$);if(R<=m+b)return null;let T=Math.atan2(D-$,N-M);const O=Math.min(S*v(A),R/3),G=this.sweep(M,$,N,D)*l*Os,q=Math.hypot(R/Math.tan(G),R)/2;if(m||b)if(q<1e5){const z=Math.sign(G),[U,tt]=IM([M,$],[N,D],q,z);if(m&&([M,$]=Jh([U,tt,q],[M,$,m],-z*Math.sign(m))),b){const[I,K]=Jh([U,tt,q],[N,D,b],z*Math.sign(b));T+=Math.atan2(K-tt,I-U)-Math.atan2(D-tt,N-U),N=I,D=K}}else{const z=N-M,U=D-$,tt=Math.hypot(z,U);m&&(M+=z/tt*m,$+=U/tt*m),b&&(N-=z/tt*b,D-=U/tt*b)}const k=T+G,Y=k+x,rt=k-x,Q=N-O*Math.cos(Y),E=D-O*Math.sin(Y),W=N-O*Math.cos(rt),Z=D-O*Math.sin(rt),B=q<1e5?`A${q},${q} 0,0,${G>0?1:0} `:"L",P=O?`M${Q},${E}L${N},${D}L${W},${Z}`:"";return`M${M},${$}${B}${N},${D}${P}`}).call(ui,this,r)).node()}}function RM(t=1){if(typeof t=="number")return sn(Math.sign(t));if(typeof t=="function")return(e,n,r,i)=>Math.sign(t(e,n,r,i));switch(tn(t,"sweep",["+x","-x","+y","-y"])){case"+x":return(e,n,r)=>wn(e,r);case"-x":return(e,n,r)=>Yr(e,r);case"+y":return(e,n,r,i)=>wn(n,i);case"-y":return(e,n,r,i)=>Yr(n,i)}}function IM([t,e],[n,r],i,o){const a=n-t,s=r-e,c=Math.hypot(a,s),u=o*Math.sqrt(i*i-c*c/4)/c;return[(t+n)/2-s*u,(e+r)/2+a*u]}function Jh([t,e,n],[r,i,o],a){const s=r-t,c=i-e,u=Math.hypot(s,c),f=(s*s+c*c-o*o+n*n)/(2*u),d=a*Math.sqrt(n*n-f*f);return[t+(s*f+c*d)/u,e+(c*f-s*d)/u]}function $f(t,{x:e,x1:n,x2:r,y:i,y1:o,y2:a,...s}={}){return[n,r]=Zh(e,n,r),[o,a]=Zh(i,o,a),new LM(t,{...s,x1:n,x2:r,y1:o,y2:a})}const OM={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function FM(t){return t.sort===void 0&&t.reverse===void 0?G4({channel:"-r"},t):t}class PM extends en{constructor(e,n={}){const{x:r,y:i,r:o,rotate:a,symbol:s=zo,frameAnchor:c}=n,[u,f]=we(a,0),[d,l]=Y4(s),[h,p]=we(o,d==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:hc,optional:!0},rotate:{value:u,optional:!0},symbol:{value:d,scale:"auto",optional:!0}},FM(n),OM),this.r=p,this.rotate=f,this.symbol=l,this.frameAnchor=yc(c);const{channels:m}=this,{symbol:b}=m;if(b){const{fill:v,stroke:x}=m;b.hint={fill:v?v.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:x?x.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,o){const{x:a,y:s}=n,{x:c,y:u,r:f,rotate:d,symbol:l}=r,{r:h,rotate:p,symbol:m}=this,[b,v]=ga(this,i),x=m===zo,S=f?void 0:h*h*Math.PI;return dl(h)&&(e=[]),ce("svg:g",o).call(tr,this,i,o).call(nr,this,{x:c&&a,y:u&&s}).call(y=>y.selectAll().data(e).enter().append(x?"circle":"path").call(er,this).call(x?A=>{A.attr("cx",c?M=>c[M]:b).attr("cy",u?M=>u[M]:v).attr("r",f?M=>f[M]:h)}:A=>{A.attr("transform",Il`translate(${c?M=>c[M]:b},${u?M=>u[M]:v})${d?M=>` rotate(${d[M]})`:p?` rotate(${p})`:""}`).attr("d",f&&l?M=>{const $=Or();return l[M].draw($,f[M]*f[M]*Math.PI),$}:f?M=>{const $=Or();return m.draw($,f[M]*f[M]*Math.PI),$}:l?M=>{const $=Or();return l[M].draw($,S),$}:(()=>{const M=Or();return m.draw(M,S),M})())}).call(ui,this,r)).node()}}function Yo(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=bc(e,n)),new PM(t,{...r,x:e,y:n})}const jM={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class qM extends en{constructor(e,n={}){const{x:r,y:i,z:o,curve:a,tension:s}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:M4(n),optional:!0}},n,jM),this.z=o,this.curve=DM(a,s),Rl(this,n)}filter(e){return e}project(e,n,r){this.curve!==Ps&&super.project(e,n,r)}render(e,n,r,i,o){const{x:a,y:s}=r,{curve:c}=this;return ce("svg:g",o).call(tr,this,i,o).call(nr,this,n).call(u=>u.selectAll().data(F7(e,[a,s],this,r)).enter().append("path").call(er,this).call(R7,this,r).call(e9,this,r,o).attr("d",c===Ps&&o.projection?zM(o.path(),a,s):k6().curve(c).defined(f=>f>=0).x(f=>a[f]).y(f=>s[f]))).node()}}function zM(t,e,n){return e=Rs(e),n=Rs(n),r=>{let i=[];const o=[i];for(const a of r)a===-1?(i=[],o.push(i)):i.push([e[a],n[a]]);return t({type:"MultiLineString",coordinates:o})}}function UM(t,{x:e,y:n,...r}={}){return[e,n]=bc(e,n),new qM(t,{...r,x:e,y:n})}en.prototype.plot=function({marks:t=[],...e}={}){return Hi({...e,marks:[...t,this]})};const BM=[{init_node:1,term_node:2,time:1},{init_node:1,term_node:3,time:2},{init_node:2,term_node:1,time:3},{init_node:2,term_node:6,time:4},{init_node:3,term_node:1,time:5},{init_node:3,term_node:4,time:6},{init_node:3,term_node:12,time:7},{init_node:4,term_node:3,time:8},{init_node:4,term_node:5,time:9},{init_node:4,term_node:11,time:10},{init_node:5,term_node:4,time:11},{init_node:5,term_node:6,time:12},{init_node:5,term_node:9,time:13},{init_node:6,term_node:2,time:14},{init_node:6,term_node:5,time:15},{init_node:6,term_node:8,time:16},{init_node:7,term_node:8,time:17},{init_node:7,term_node:18,time:18},{init_node:8,term_node:6,time:19},{init_node:8,term_node:7,time:20},{init_node:8,term_node:9,time:21},{init_node:8,term_node:16,time:22},{init_node:9,term_node:5,time:23},{init_node:9,term_node:8,time:24},{init_node:9,term_node:10,time:25},{init_node:10,term_node:9,time:26},{init_node:10,term_node:11,time:27},{init_node:10,term_node:15,time:28},{init_node:10,term_node:16,time:29},{init_node:10,term_node:17,time:30},{init_node:11,term_node:4,time:31},{init_node:11,term_node:10,time:32},{init_node:11,term_node:12,time:33},{init_node:11,term_node:14,time:34},{init_node:12,term_node:3,time:35},{init_node:12,term_node:11,time:36},{init_node:12,term_node:13,time:37},{init_node:13,term_node:12,time:38},{init_node:13,term_node:24,time:39},{init_node:14,term_node:11,time:40},{init_node:14,term_node:15,time:41},{init_node:14,term_node:23,time:42},{init_node:15,term_node:10,time:43},{init_node:15,term_node:14,time:44},{init_node:15,term_node:19,time:45},{init_node:15,term_node:22,time:46},{init_node:16,term_node:8,time:47},{init_node:16,term_node:10,time:48},{init_node:16,term_node:17,time:49},{init_node:16,term_node:18,time:50},{init_node:17,term_node:10,time:51},{init_node:17,term_node:16,time:52},{init_node:17,term_node:19,time:53},{init_node:18,term_node:7,time:54},{init_node:18,term_node:16,time:55},{init_node:18,term_node:20,time:56},{init_node:19,term_node:15,time:57},{init_node:19,term_node:17,time:58},{init_node:19,term_node:20,time:59},{init_node:20,term_node:18,time:60},{init_node:20,term_node:19,time:61},{init_node:20,term_node:21,time:62},{init_node:20,term_node:22,time:63},{init_node:21,term_node:20,time:64},{init_node:21,term_node:22,time:65},{init_node:21,term_node:24,time:66},{init_node:22,term_node:15,time:67},{init_node:22,term_node:20,time:68},{init_node:22,term_node:21,time:69},{init_node:22,term_node:23,time:70},{init_node:23,term_node:14,time:71},{init_node:23,term_node:22,time:72},{init_node:23,term_node:24,time:73},{init_node:24,term_node:13,time:74},{init_node:24,term_node:21,time:75},{init_node:24,term_node:23,time:76}],HM=[{node:1,x:5e4,y:51e4},{node:2,x:32e4,y:51e4},{node:3,x:5e4,y:44e4},{node:4,x:13e4,y:44e4},{node:5,x:22e4,y:44e4},{node:6,x:32e4,y:44e4},{node:7,x:42e4,y:38e4},{node:8,x:32e4,y:38e4},{node:9,x:22e4,y:38e4},{node:10,x:22e4,y:32e4},{node:11,x:13e4,y:32e4},{node:12,x:5e4,y:32e4},{node:13,x:5e4,y:5e4},{node:14,x:13e4,y:19e4},{node:15,x:22e4,y:19e4},{node:16,x:32e4,y:32e4},{node:17,x:32e4,y:26e4},{node:18,x:42e4,y:32e4},{node:19,x:32e4,y:19e4},{node:20,x:32e4,y:5e4},{node:21,x:22e4,y:5e4},{node:22,x:22e4,y:13e4},{node:23,x:13e4,y:13e4},{node:24,x:13e4,y:5e4}],f_=HM,l_=BM;function d_(t,e){t=t-1;const n=e.length,r=new Array(n).fill(!1),i=[];let o=t;r[o]=!0,i.push(o);for(let a=1;a<n;a++){let s=-1,c=1/0;for(let u=0;u<n;u++)if(!r[u]){const f=e[o][u];f<c&&(c=f,s=u)}s>=0&&(r[s]=!0,i.push(s),o=s)}return i.push(t),i.map(a=>a+1)}function h_(t,e){t=t-1;const n=e.length,r=new Array(n).fill(!1),i=[];for(r[t]=!0,i.push(t);i.length<n;){let o=-1,a=1/0,s=-1;for(let c=0;c<n;c++)if(!r[c])for(let u=0;u<i.length;u++){const f=i[u],d=i[(u+1)%i.length],l=e[f][c]+e[c][d]-e[f][d];l<a&&(a=l,o=c,s=u+1)}o>=0&&s>=0&&(r[o]=!0,i.splice(s,0,o))}return i.push(t),i.map(o=>o+1)}function te(t,e){let n=0;for(let r=0;r<t.length-1;r++){const i=t[r]-1,o=t[r+1]-1;n+=e[i][o]}return n}function*p_(t,e){const n=Array.from(t),r=n.length;if(e=e===void 0?r:e,e>r)return;const i=[...Array(r).keys()],o=[];for(let a=r;a>r-e;a--)o.push(a);for(yield i.slice(0,e).map(a=>n[a]);r;){let a=!1;for(let s=e-1;s>=0;s--)if(o[s]-=1,o[s]===0){const c=i.splice(s,1);i.push(...c),o[s]=r-s}else{const c=o[s],u=i.length-c;[i[s],i[u]]=[i[u],i[s]],yield i.slice(0,e).map(f=>n[f]),a=!0;break}if(!a)return}}function YM(t,e,n=1){const r=t.length;let i=0;const o=[];let a=t.slice();for(const[s,c]of p_(Array.from({length:r-2},(u,f)=>f),2)){[a[s],a[c]]=[a[c],a[s]],a[r-1]=a[0];const u=te(t,e),f=te(a,e);if(f<u?(i++,t=a.slice(),o.push({i:t[s],j:t[c],feasible:!0,currentDistance:u,newDistance:f,delta:u-f,route:t.slice()})):(o.push({i:t[s],j:t[c],feasible:!1,currentDistance:u,newDistance:f,delta:u-f,route:t.slice()}),[a[s],a[c]]=[a[c],a[s]],a[r-1]=a[0]),i>=n)break}return{route:t,history:o}}function Qh(t,e,n){const r=[];for(let i=0;i<n;i++){const o=YM(t,e,1);t=o.route,r.push(...o.history)}return{route:t,history:r}}function Kh(t,e,n){const r=[];for(let i=0;i<n;i++){const o=WM(t,e,1);t=o.route,r.push(...o.history)}return{route:t,history:r}}function WM(t,e,n=1){const r=t.length;let i=0;const o=[];let a=t.slice();for(const[s,c,u]of p_(Array.from({length:r-2},(f,d)=>d),3)){[a[c],a[u],a[s]]=[a[s],a[c],a[u]],a[r-1]=a[0];const f=te(t,e),d=te(a,e);if(d<f?(i++,t=a.slice(),o.push({i:t[s],j:t[c],k:t[u],feasible:!0,currentDistance:f,newDistance:d,delta:f-d,route:t.slice()})):(o.push({i:t[s],j:t[c],k:t[u],feasible:!1,currentDistance:f,newDistance:d,delta:f-d,route:t.slice()}),[a[s],a[c],a[u]]=[a[c],a[u],a[s]],a[r-1]=a[0]),i>=n)break}return{route:t,history:o}}function m_(t,e){const n=t.length,r=new Array(n),i=new Map;for(let o=0;o<n;o++)i.set(t[o],o),r[o]=new Array(n).fill(1/0),r[o][o]=0;for(const o of e){const a=i.get(o.from),s=i.get(o.to);a!==void 0&&s!==void 0&&(r[a][s]=o.weight)}for(let o=0;o<n;o++)for(let a=0;a<n;a++)for(let s=0;s<n;s++)r[a][s]>r[a][o]+r[o][s]&&(r[a][s]=r[a][o]+r[o][s]);return r}function GM(t){return new Worker(""+new URL("codehighlight-DVZFatJc.js",import.meta.url).href,{name:t?.name})}var VM=wt('<button role="tab"> </button>'),XM=wt('<div class="flex flex-col justify-center items-center w-full"><div role="tablist" class="tabs tabs-box"></div> <div class="text-left mockup-code whitespace-pre my-4 min-w-100"><!></div></div>');function Tc(t,e){Wi(e,!0);const n=new GM;n.onmessage=u=>{o.push(...u.data)},e.data.length>0&&n.postMessage(e.data);let r=$t(0);function i(u){at(r,u,!0)}let o=Te([]);var a=Wt(),s=Nt(a);{var c=u=>{var f=XM(),d=_(f);Ne(d,21,()=>e.data,Ce,(p,m,b)=>{var v=VM();v.__click=()=>i(b);var x=_(v);Ft(()=>{It(v,1,`tab ${b===g(r)?"tab-active ":""}`),j(x,g(m).filename)}),ot(p,v)});var l=w(d,2),h=_(l);fe(h,()=>o[g(r)]),ot(u,f)};Pt(s,u=>{o.length>0&&u(c)})}ot(t,a),Gi()}Vi(["click"]);const ZM=`import { TotalDistance } from "./q2";
import { permutations } from "../foundation/permutation";

type Opt2Data = {
    i: number; j: number, feasible: boolean, currentDistance: number,
    newDistance: number, delta: number, route: Array<number>
}

type Opt2Result = {
    route: Array<number>,
    history: Opt2Data[]
}

function Opt2ExchangeBase(route: Array<number>, dstMatrix: Array<Array<number>>, iterations: number = 1): Opt2Result {
    const n = route.length;
    let countSwaps = 0;
    const Attempts: Opt2Data[] = [];

    let newRoute = route.slice();

    for (const [i, j] of permutations(Array.from({ length: n - 2 }, (_, k) => k), 2)) {
        [newRoute[i], newRoute[j]] = [newRoute[j], newRoute[i]];
        newRoute[n - 1] = newRoute[0];

        const currentDistance = TotalDistance(route, dstMatrix);
        const newDistance = TotalDistance(newRoute, dstMatrix);

        if (newDistance < currentDistance) {
            countSwaps++;
            route = newRoute.slice();
            Attempts.push({
                i: route[i], j: route[j], feasible: true, currentDistance,
                newDistance, delta: currentDistance - newDistance, route: route.slice()
            });
        } else {
            Attempts.push({
                i: route[i], j: route[j], feasible: false, currentDistance,
                newDistance, delta: currentDistance - newDistance, route: route.slice()
            });
            [newRoute[i], newRoute[j]] = [newRoute[j], newRoute[i]];
            newRoute[n - 1] = newRoute[0];
        }

        if (countSwaps >= iterations) {
            break;
        }
    }

    return { route, history: Attempts };
}


export function Opt2Exchange(route: Array<number>, dstMatrix: Array<Array<number>>, iterations: number): Opt2Result {
    const Attempts: Opt2Data[] = [];
    for (let iter = 0; iter < iterations; iter++) {
        const result = Opt2ExchangeBase(route, dstMatrix, 1);
        route = result.route;
        Attempts.push(...result.history);
    }
    return { route, history: Attempts };
}

type Opt3Data = {
    i: number; j: number; k: number; feasible: boolean; currentDistance: number;
    newDistance: number, delta: number, route: Array<number>
}

type Opt3Result = {
    route: Array<number>,
    history: Opt3Data[]
}


export function Opt3Exchange(route: Array<number>, dstMatrix: Array<Array<number>>, iterations: number): Opt3Result {
    const Attempts: Opt3Data[] = [];
    for (let iter = 0; iter < iterations; iter++) {
        const result = Opt3ExchangeBase(route, dstMatrix, 1);
        route = result.route;
        Attempts.push(...result.history);
    }
    return { route, history: Attempts };
}

function Opt3ExchangeBase(route: Array<number>, dstMatrix: Array<Array<number>>, iterations: number = 1): Opt3Result {
    const n = route.length;
    let countSwaps = 0;
    const Attempts: Opt3Data[] = [];

    let newRoute = route.slice();

    for (const [i, j, k] of permutations(Array.from({ length: n - 2 }, (_, l) => l), 3)) {

        [newRoute[j], newRoute[k], newRoute[i]] = [newRoute[i], newRoute[j], newRoute[k]];
        newRoute[n - 1] = newRoute[0];

        const currentDistance = TotalDistance(route, dstMatrix);
        const newDistance = TotalDistance(newRoute, dstMatrix);

        if (newDistance < currentDistance) {
            countSwaps++;
            route = newRoute.slice();
            Attempts.push({
                i: route[i], j: route[j], k: route[k], feasible: true,
                currentDistance, newDistance, delta: currentDistance - newDistance, route: route.slice()
            });
        } else {
            Attempts.push({
                i: route[i], j: route[j], k: route[k], feasible: false,
                currentDistance, newDistance, delta: currentDistance - newDistance, route: route.slice()
            });
            [newRoute[i], newRoute[j], newRoute[k]] = [newRoute[j], newRoute[k], newRoute[i]];
            newRoute[n - 1] = newRoute[0];
        }

        if (countSwaps >= iterations) {
            break;
        }
    }

    return { route, history: Attempts };
}`,JM=`export function* permutations<T>(iterable: Iterable<T>, r?: number): Generator<T[]> {
    const pool = Array.from(iterable);
    const n = pool.length;
    r = (r === undefined) ? n : r;

    if (r > n) return;

    const indices = [...Array(n).keys()];
    const cycles: number[] = [];
    for (let i = n; i > n - r; i--) cycles.push(i);

    yield indices.slice(0, r).map(i => pool[i]);

    while (n) {
        let broken = false;

        for (let i = r - 1; i >= 0; i--) {
            cycles[i] -= 1;

            if (cycles[i] === 0) {
                // rotate indices[i:]
                const removed = indices.splice(i, 1);
                indices.push(...removed);
                cycles[i] = n - i;
            } else {
                const j = cycles[i];
                const k = indices.length - j;

                // swap
                [indices[i], indices[k]] = [indices[k], indices[i]];

                yield indices.slice(0, r).map(i => pool[i]);

                broken = true;
                break;
            }
        }

        if (!broken) return;
    }
}
`;var QM=wt('<div class=" flex justify-center"><table class="table w-fit"><thead><tr><th colspan="4" class="text-center font-bold text-lg text-primary">Summary</th></tr><tr><th>Method</th><th class="text-center w-40">Initial</th><th class="text-center w-40">2 Opt</th><th class="text-center w-40">3 Opt</th></tr></thead><tbody><tr><td>Nearest Neighbor</td><td class="text-center"> </td><td class="text-center"> </td><td class="text-center"> </td></tr><tr><td>Nearest Insertion</td><td class="text-center"> </td><td class="text-center"> </td><td class="text-center"> </td></tr></tbody></table></div> <div class="grid grid-cols-2 justify-center pt-4 gap-4"><div><h3 class="text-center font-bold text-lg text-primary pb-2">Nearest Neighbor</h3> <!></div> <div><h3 class="text-center font-bold text-lg text-primary pb-2">Nearest Insertion</h3> <!></div> <div><h3 class="text-center font-bold text-lg text-primary pb-2">Nearest Neighbor + 2 Opt</h3> <!></div> <div><h3 class="text-center font-bold text-lg text-primary pb-2">Nearest Insertion + 2 Opt</h3> <!></div> <div><h3 class="text-center font-bold text-lg text-primary pb-2">Nearest Neighbor + 3 Opt</h3> <!></div> <div><h3 class="text-center font-bold text-lg text-primary pb-2">Nearest Insertion + 3 Opt</h3> <!></div></div>',1),KM=wt("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),t$=wt('<div class=" flex justify-center"><div><!></div> <div><table class="table border border-base-content/5 w-fit ml-4"><thead><tr><th colspan="6" class="text-center font-bold text-lg text-primary">Nearest Neighbor + 2 Opt</th></tr><tr><th>i</th><th>j</th><th>Feasible</th><th>Current Distance</th><th>New Distance</th><th>Delta</th></tr></thead><tbody></tbody></table></div></div>'),e$=wt("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),n$=wt('<div class=" flex justify-center"><div><!></div> <div><table class="table border border-base-content/5 w-fit ml-4"><thead><tr><th colspan="6" class="text-center font-bold text-lg text-primary">Nearest Insertion + 2 Opt</th></tr><tr><th>i</th><th>j</th><th>Feasible</th><th>Current Distance</th><th>New Distance</th><th>Delta</th><th>Route</th></tr></thead><tbody></tbody></table></div></div>'),r$=wt("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),i$=wt('<div class=" flex justify-center"><div><!></div> <div><table class="table border border-base-content/5 w-fit ml-4"><thead><tr><th colspan="6" class="text-center font-bold text-lg text-primary">Nearest Neighbor + 3 Opt</th></tr><tr><th>i</th><th>j</th><th>k</th><th>Feasible</th><th>Current Distance</th><th>New Distance</th><th>Delta</th><th>Route</th></tr></thead><tbody></tbody></table></div></div>'),o$=wt("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),a$=wt('<div class=" flex justify-center"><div><!></div> <div><table class="table border border-base-content/5 w-fit ml-4"><thead><tr><th colspan="6" class="text-center font-bold text-lg text-primary">Nearest Insertion + 3 Opt</th></tr><tr><th>i</th><th>j</th><th>k</th><th>Feasible</th><th>Current Distance</th><th>New Distance</th><th>Delta</th><th>Route</th></tr></thead><tbody></tbody></table></div></div>'),s$=wt('<div class="flex justify-center pb-4"><div role="tablist" class="tabs tabs-border"><button role="tab">Summary</button> <button role="tab">2 Opt - NN</button> <button role="tab">2 Opt - NI</button> <button role="tab">3 Opt - NN</button> <button role="tab">3 Opt - NI</button> <button role="tab">Code</button></div></div> <div class="flex justify-center"><table class="table w-fit mb-4"><thead><tr><th colspan="2" class="text-center font-bold text-lg text-primary">Parameters</th></tr></thead><tbody><tr><td>Starting Node:</td><td><label class="input w-32"><input type="number" placeholder="Start Node"/></label></td></tr></tbody></table></div> <!>',1);function c$(t,e){Wi(e,!0);let n=[{filename:"permutation.ts",code:JM},{filename:"q3.ts",code:ZM}],r=$t(Te([])),i=$t(Te([]));at(r,l_,!0),at(i,f_.map(I=>({node:I.node,x:I.x/1e4,y:I.y/1e4})),!0);const o=(I,K,L,F,V)=>{let C=L-I,X=F-K,H=0,et=0;C==0&&(X>0?H=-.5:H=.5),X==0&&(C>0?et=-.5:et=.5),C*X>0?H=X/Math.abs(X)*.5:C*X<0&&(et=C/Math.abs(C)*.5);const nt=Math.sqrt(C*C+X*X);if(nt===0)return{x1:I,y1:K,x2:L,y2:F,ox:H,oy:et};C/=nt,X/=nt;const J={x:(I+L)/2,y:(K+F)/2};return{x1:J.x-C*(nt-V)/2+H,y1:J.y-X*(nt-V)/2-et,x2:J.x+C*(nt-V)/2+H,y2:J.y+X*(nt-V)/2-et,ox:H,oy:et}};function a(I){const K=[];for(let F=0;F<I.length-1;F++){const V=g(i).find(X=>X.node===I[F]),C=g(i).find(X=>X.node===I[F+1]);if(V&&C){const X=o(V.x,V.y,C.x,C.y,4);K.push($f([X],{x1:"x1",y1:"y1",x2:"x2",y2:"y2",strokeWidth:2,stroke:"red"}))}}return Hi({width:600,height:600,marks:[...K,Yo(g(i).map(F=>({x:F.x,y:F.y})),{x:"x",y:"y",fill:"red",r:6}),gr(g(i).map(F=>({x:F.x,y:F.y,label:F.node})),{x:"x",y:"y",text:"label",dy:-12,fill:"black",fontSize:12})],x:{domain:[0,50],ticks:0},y:{domain:[0,55],ticks:0}})}let s=$t(0),c=At(()=>g(r).map(I=>({from:I.init_node,to:I.term_node,weight:I.time}))),u=At(()=>g(i).map(I=>I.node)),f=At(()=>m_(g(u),g(c))),d=$t(1),l=At(()=>d_(g(d),g(f))),h=At(()=>te(g(l),g(f))),p=At(()=>Qh(g(l),g(f),3)),m=At(()=>te(g(p).route,g(f))),b=At(()=>Kh(g(l),g(f),3)),v=At(()=>te(g(b).route,g(f))),x=At(()=>h_(g(d),g(f))),S=At(()=>te(g(x),g(f))),y=At(()=>Qh(g(x),g(f),3)),A=At(()=>te(g(y).route,g(f))),M=At(()=>Kh(g(x),g(f),3)),$=At(()=>te(g(M).route,g(f)));var N=s$(),D=Nt(N),R=_(D),T=_(R);T.__click=()=>{at(s,0)};var O=w(T,2);O.__click=()=>{at(s,1)};var G=w(O,2);G.__click=()=>{at(s,2)};var q=w(G,2);q.__click=()=>{at(s,3)};var k=w(q,2);k.__click=()=>{at(s,4)};var Y=w(k,2);Y.__click=()=>{at(s,5)};var rt=w(D,2),Q=_(rt),E=w(_(Q)),W=_(E),Z=w(_(W)),B=_(Z),P=_(B),z=w(rt,2);{var U=I=>{var K=QM(),L=Nt(K),F=_(L),V=w(_(F)),C=_(V),X=w(_(C)),H=_(X),et=w(X),nt=_(et),J=w(et),st=_(J),ut=w(C),pt=w(_(ut)),_t=_(pt),ct=w(pt),bt=_(ct),vt=w(ct),mt=_(vt),Mt=w(L,2),xt=_(Mt),Lt=w(_(xt),2);fe(Lt,()=>a(g(l)).outerHTML);var kt=w(xt,2),Ct=w(_(kt),2);fe(Ct,()=>a(g(x)).outerHTML);var St=w(kt,2),Ut=w(_(St),2);fe(Ut,()=>a(g(p).route).outerHTML);var Bt=w(St,2),Zt=w(_(Bt),2);fe(Zt,()=>a(g(y).route).outerHTML);var zt=w(Bt,2),Xt=w(_(zt),2);fe(Xt,()=>a(g(b).route).outerHTML);var ie=w(zt,2),oe=w(_(ie),2);fe(oe,()=>a(g(M).route).outerHTML),Ft((Tt,Me,_e,ve,$e,ze,nn,En,pn,Ln)=>{j(H,`${Tt??""} (0%)`),j(nt,`${Me??""} (${_e??""} %)`),j(st,`${ve??""} (${$e??""} %)`),j(_t,`${ze??""} (0 %)`),j(bt,`${nn??""} (${En??""} %)`),j(mt,`${pn??""} (${Ln??""} %)`)},[()=>g(h).toLocaleString("en",{useGrouping:!0}),()=>g(m).toLocaleString("en",{useGrouping:!0}),()=>((g(h)-g(m))/g(h)*100).toFixed(2),()=>g(v).toLocaleString("en",{useGrouping:!0}),()=>((g(h)-g(v))/g(h)*100).toFixed(2),()=>g(S).toLocaleString("en",{useGrouping:!0}),()=>g(A).toLocaleString("en",{useGrouping:!0}),()=>((g(S)-g(A))/g(S)*100).toFixed(2),()=>g($).toLocaleString("en",{useGrouping:!0}),()=>((g(S)-g($))/g(S)*100).toFixed(2)]),ot(I,K)},tt=I=>{var K=Wt(),L=Nt(K);{var F=C=>{var X=t$(),H=_(X),et=_(H);fe(et,()=>a(g(p).route).outerHTML);var nt=w(H,2),J=_(nt),st=w(_(J));Ne(st,21,()=>g(p).history.filter(ut=>ut.feasible),Ce,(ut,pt)=>{var _t=KM(),ct=_(_t),bt=_(ct),vt=w(ct),mt=_(vt),Mt=w(vt),xt=_(Mt),Lt=w(Mt),kt=_(Lt),Ct=w(Lt),St=_(Ct),Ut=w(Ct),Bt=_(Ut),Zt=w(Ut),zt=_(Zt);Ft((Xt,ie,oe,Tt)=>{It(_t,1,lo(g(pt).feasible?"bg-accent":"")),j(bt,g(pt).i),j(mt,g(pt).j),j(xt,g(pt).feasible?"Yes":"No"),j(kt,Xt),j(St,ie),j(Bt,oe),j(zt,Tt)},[()=>g(pt).currentDistance.toLocaleString("en",{useGrouping:!0}),()=>g(pt).newDistance.toLocaleString("en",{useGrouping:!0}),()=>g(pt).delta.toLocaleString("en",{useGrouping:!0}),()=>g(pt).route.join("-")]),ot(ut,_t)}),ot(C,X)},V=C=>{var X=Wt(),H=Nt(X);{var et=J=>{var st=n$(),ut=_(st),pt=_(ut);fe(pt,()=>a(g(y).route).outerHTML);var _t=w(ut,2),ct=_(_t),bt=w(_(ct));Ne(bt,21,()=>g(y).history.filter(vt=>vt.feasible),Ce,(vt,mt)=>{var Mt=e$(),xt=_(Mt),Lt=_(xt),kt=w(xt),Ct=_(kt),St=w(kt),Ut=_(St),Bt=w(St),Zt=_(Bt),zt=w(Bt),Xt=_(zt),ie=w(zt),oe=_(ie),Tt=w(ie),Me=_(Tt);Ft((_e,ve,$e,ze)=>{It(Mt,1,lo(g(mt).feasible?"bg-accent":"")),j(Lt,g(mt).i),j(Ct,g(mt).j),j(Ut,g(mt).feasible?"Yes":"No"),j(Zt,_e),j(Xt,ve),j(oe,$e),j(Me,ze)},[()=>g(mt).currentDistance.toLocaleString("en",{useGrouping:!0}),()=>g(mt).newDistance.toLocaleString("en",{useGrouping:!0}),()=>g(mt).delta.toLocaleString("en",{useGrouping:!0}),()=>g(mt).route.join("-")]),ot(vt,Mt)}),ot(J,st)},nt=J=>{var st=Wt(),ut=Nt(st);{var pt=ct=>{var bt=i$(),vt=_(bt),mt=_(vt);fe(mt,()=>a(g(b).route).outerHTML);var Mt=w(vt,2),xt=_(Mt),Lt=w(_(xt));Ne(Lt,21,()=>g(b).history.filter(kt=>kt.feasible),Ce,(kt,Ct)=>{var St=r$(),Ut=_(St),Bt=_(Ut),Zt=w(Ut),zt=_(Zt),Xt=w(Zt),ie=_(Xt),oe=w(Xt),Tt=_(oe),Me=w(oe),_e=_(Me),ve=w(Me),$e=_(ve),ze=w(ve),nn=_(ze),En=w(ze),pn=_(En);Ft((Ln,Le,rr,Nr)=>{It(St,1,lo(g(Ct).feasible?"bg-accent":"")),j(Bt,g(Ct).i),j(zt,g(Ct).j),j(ie,g(Ct).k),j(Tt,g(Ct).feasible?"Yes":"No"),j(_e,Ln),j($e,Le),j(nn,rr),j(pn,Nr)},[()=>g(Ct).currentDistance.toLocaleString("en",{useGrouping:!0}),()=>g(Ct).newDistance.toLocaleString("en",{useGrouping:!0}),()=>g(Ct).delta.toLocaleString("en",{useGrouping:!0}),()=>g(Ct).route.join("-")]),ot(kt,St)}),ot(ct,bt)},_t=ct=>{var bt=Wt(),vt=Nt(bt);{var mt=xt=>{var Lt=a$(),kt=_(Lt),Ct=_(kt);fe(Ct,()=>a(g(M).route).outerHTML);var St=w(kt,2),Ut=_(St),Bt=w(_(Ut));Ne(Bt,21,()=>g(M).history.filter(Zt=>Zt.feasible),Ce,(Zt,zt)=>{var Xt=o$(),ie=_(Xt),oe=_(ie),Tt=w(ie),Me=_(Tt),_e=w(Tt),ve=_(_e),$e=w(_e),ze=_($e),nn=w($e),En=_(nn),pn=w(nn),Ln=_(pn),Le=w(pn),rr=_(Le),Nr=w(Le),fi=_(Nr);Ft((to,eo,no,ro)=>{It(Xt,1,lo(g(zt).feasible?"bg-accent":"")),j(oe,g(zt).i),j(Me,g(zt).j),j(ve,g(zt).k),j(ze,g(zt).feasible?"Yes":"No"),j(En,to),j(Ln,eo),j(rr,no),j(fi,ro)},[()=>g(zt).currentDistance.toLocaleString("en",{useGrouping:!0}),()=>g(zt).newDistance.toLocaleString("en",{useGrouping:!0}),()=>g(zt).delta.toLocaleString("en",{useGrouping:!0}),()=>g(zt).route.join("-")]),ot(Zt,Xt)}),ot(xt,Lt)},Mt=xt=>{var Lt=Wt(),kt=Nt(Lt);{var Ct=St=>{Tc(St,{get data(){return n}})};Pt(kt,St=>{g(s)==5&&St(Ct)},!0)}ot(xt,Lt)};Pt(vt,xt=>{g(s)==4?xt(mt):xt(Mt,!1)},!0)}ot(ct,bt)};Pt(ut,ct=>{g(s)==3?ct(pt):ct(_t,!1)},!0)}ot(J,st)};Pt(H,J=>{g(s)==2?J(et):J(nt,!1)},!0)}ot(C,X)};Pt(L,C=>{g(s)==1?C(F):C(V,!1)},!0)}ot(I,K)};Pt(z,I=>{g(s)==0?I(U):I(tt,!1)})}Ft(()=>{It(T,1,`tab ${g(s)==0?"tab-active":""}`),It(O,1,`tab ${g(s)==1?"tab-active":""}`),It(G,1,`tab ${g(s)==2?"tab-active":""}`),It(q,1,`tab ${g(s)==3?"tab-active":""}`),It(k,1,`tab ${g(s)==4?"tab-active":""}`),It(Y,1,`tab ${g(s)==5?"tab-active":""}`)}),Ht(P,()=>g(d),I=>at(d,I)),ot(t,N),Gi()}Vi(["click"]);const u$=`import NetworkData from "../assets/q2arcs.json";
import NodeData from "../assets/q2node.json";

export const NetworkNodes: Array<NetworkNode> = NodeData as Array<NetworkNode>;
export const NetworkDataLinks: Array<NetworkLink> = NetworkData as Array<NetworkLink>;

export interface NetworkLink {
    init_node: number,
    term_node: number,
    time: number,
}

export interface NetworkNode {
    node: number,
    x: number,
    y: number
}

export function NearestNeighbor(startIndex: number, dstMatrix: Array<Array<number>>): Array<number> {
    startIndex = startIndex - 1;
    const n = dstMatrix.length
    const visited: Array<boolean> = new Array(n).fill(false)
    const route: Array<number> = []
    let currentIndex = startIndex
    visited[currentIndex] = true
    route.push(currentIndex)

    for (let step = 1; step < n; step++) {
        let nearestIndex = -1
        let nearestDistance = Infinity
        for (let i = 0; i < n; i++) {
            if (!visited[i]) {
                const distance = dstMatrix[currentIndex][i]
                if (distance < nearestDistance) {
                    nearestDistance = distance
                    nearestIndex = i
                }
            }
        }
        if (nearestIndex >= 0) {
            visited[nearestIndex] = true
            route.push(nearestIndex)
            currentIndex = nearestIndex
        }
    }
    route.push(startIndex);
    //1-based index
    return route.map(i => i + 1);
}

export function NearestInsertion(startIndex: number, dstMatrix: Array<Array<number>>): Array<number> {
    startIndex = startIndex - 1;
    const n = dstMatrix.length
    const visited: Array<boolean> = new Array(n).fill(false)
    const route: Array<number> = []
    visited[startIndex] = true
    route.push(startIndex)

    while (route.length < n) {
        let nearestIndex = -1
        let nearestDistance = Infinity
        let insertPosition = -1

        for (let i = 0; i < n; i++) {
            if (!visited[i]) {
                for (let j = 0; j < route.length; j++) {
                    const fromIndex = route[j]
                    const toIndex = route[(j + 1) % route.length]
                    const distance = dstMatrix[fromIndex][i] + dstMatrix[i][toIndex] - dstMatrix[fromIndex][toIndex]
                    if (distance < nearestDistance) {
                        nearestDistance = distance
                        nearestIndex = i
                        insertPosition = j + 1
                    }
                }
            }
        }

        if (nearestIndex >= 0 && insertPosition >= 0) {
            visited[nearestIndex] = true
            route.splice(insertPosition, 0, nearestIndex)
        }
    }

    route.push(startIndex);
    //1-based index
    return route.map(i => i + 1);
}

export function TotalDistance(route: Array<number>, dstMatrix: Array<Array<number>>): number {
    let totalDistance = 0;
    for (let i = 0; i < route.length - 1; i++) {
        const fromIndex = route[i] - 1;
        const toIndex = route[i + 1] - 1;
        totalDistance += dstMatrix[fromIndex][toIndex];
    }
    return totalDistance;
}`,f$=`[
    {
        "node": 1,
        "x": 50000,
        "y": 510000
    },
    {
        "node": 2,
        "x": 320000,
        "y": 510000
    },
    {
        "node": 3,
        "x": 50000,
        "y": 440000
    },
    {
        "node": 4,
        "x": 130000,
        "y": 440000
    },
    {
        "node": 5,
        "x": 220000,
        "y": 440000
    },
    {
        "node": 6,
        "x": 320000,
        "y": 440000
    },
    {
        "node": 7,
        "x": 420000,
        "y": 380000
    },
    {
        "node": 8,
        "x": 320000,
        "y": 380000
    },
    {
        "node": 9,
        "x": 220000,
        "y": 380000
    },
    {
        "node": 10,
        "x": 220000,
        "y": 320000
    },
    {
        "node": 11,
        "x": 130000,
        "y": 320000
    },
    {
        "node": 12,
        "x": 50000,
        "y": 320000
    },
    {
        "node": 13,
        "x": 50000,
        "y": 50000
    },
    {
        "node": 14,
        "x": 130000,
        "y": 190000
    },
    {
        "node": 15,
        "x": 220000,
        "y": 190000
    },
    {
        "node": 16,
        "x": 320000,
        "y": 320000
    },
    {
        "node": 17,
        "x": 320000,
        "y": 260000
    },
    {
        "node": 18,
        "x": 420000,
        "y": 320000
    },
    {
        "node": 19,
        "x": 320000,
        "y": 190000
    },
    {
        "node": 20,
        "x": 320000,
        "y": 50000
    },
    {
        "node": 21,
        "x": 220000,
        "y": 50000
    },
    {
        "node": 22,
        "x": 220000,
        "y": 130000
    },
    {
        "node": 23,
        "x": 130000,
        "y": 130000
    },
    {
        "node": 24,
        "x": 130000,
        "y": 50000
    }
]`,l$=`[
    {
        "init_node": 1,
        "term_node": 2,
        "time": 1
    },
    {
        "init_node": 1,
        "term_node": 3,
        "time": 2
    },
    {
        "init_node": 2,
        "term_node": 1,
        "time": 3
    },
    {
        "init_node": 2,
        "term_node": 6,
        "time": 4
    },
    {
        "init_node": 3,
        "term_node": 1,
        "time": 5
    },
    {
        "init_node": 3,
        "term_node": 4,
        "time": 6
    },
    {
        "init_node": 3,
        "term_node": 12,
        "time": 7
    },
    {
        "init_node": 4,
        "term_node": 3,
        "time": 8
    },
    {
        "init_node": 4,
        "term_node": 5,
        "time": 9
    },
    {
        "init_node": 4,
        "term_node": 11,
        "time": 10
    },
    {
        "init_node": 5,
        "term_node": 4,
        "time": 11
    },
    {
        "init_node": 5,
        "term_node": 6,
        "time": 12
    },
    {
        "init_node": 5,
        "term_node": 9,
        "time": 13
    },
    {
        "init_node": 6,
        "term_node": 2,
        "time": 14
    },
    {
        "init_node": 6,
        "term_node": 5,
        "time": 15
    },
    {
        "init_node": 6,
        "term_node": 8,
        "time": 16
    },
    {
        "init_node": 7,
        "term_node": 8,
        "time": 17
    },
    {
        "init_node": 7,
        "term_node": 18,
        "time": 18
    },
    {
        "init_node": 8,
        "term_node": 6,
        "time": 19
    },
    {
        "init_node": 8,
        "term_node": 7,
        "time": 20
    },
    {
        "init_node": 8,
        "term_node": 9,
        "time": 21
    },
    {
        "init_node": 8,
        "term_node": 16,
        "time": 22
    },
    {
        "init_node": 9,
        "term_node": 5,
        "time": 23
    },
    {
        "init_node": 9,
        "term_node": 8,
        "time": 24
    },
    {
        "init_node": 9,
        "term_node": 10,
        "time": 25
    },
    {
        "init_node": 10,
        "term_node": 9,
        "time": 26
    },
    {
        "init_node": 10,
        "term_node": 11,
        "time": 27
    },
    {
        "init_node": 10,
        "term_node": 15,
        "time": 28
    },
    {
        "init_node": 10,
        "term_node": 16,
        "time": 29
    },
    {
        "init_node": 10,
        "term_node": 17,
        "time": 30
    },
    {
        "init_node": 11,
        "term_node": 4,
        "time": 31
    },
    {
        "init_node": 11,
        "term_node": 10,
        "time": 32
    },
    {
        "init_node": 11,
        "term_node": 12,
        "time": 33
    },
    {
        "init_node": 11,
        "term_node": 14,
        "time": 34
    },
    {
        "init_node": 12,
        "term_node": 3,
        "time": 35
    },
    {
        "init_node": 12,
        "term_node": 11,
        "time": 36
    },
    {
        "init_node": 12,
        "term_node": 13,
        "time": 37
    },
    {
        "init_node": 13,
        "term_node": 12,
        "time": 38
    },
    {
        "init_node": 13,
        "term_node": 24,
        "time": 39
    },
    {
        "init_node": 14,
        "term_node": 11,
        "time": 40
    },
    {
        "init_node": 14,
        "term_node": 15,
        "time": 41
    },
    {
        "init_node": 14,
        "term_node": 23,
        "time": 42
    },
    {
        "init_node": 15,
        "term_node": 10,
        "time": 43
    },
    {
        "init_node": 15,
        "term_node": 14,
        "time": 44
    },
    {
        "init_node": 15,
        "term_node": 19,
        "time": 45
    },
    {
        "init_node": 15,
        "term_node": 22,
        "time": 46
    },
    {
        "init_node": 16,
        "term_node": 8,
        "time": 47
    },
    {
        "init_node": 16,
        "term_node": 10,
        "time": 48
    },
    {
        "init_node": 16,
        "term_node": 17,
        "time": 49
    },
    {
        "init_node": 16,
        "term_node": 18,
        "time": 50
    },
    {
        "init_node": 17,
        "term_node": 10,
        "time": 51
    },
    {
        "init_node": 17,
        "term_node": 16,
        "time": 52
    },
    {
        "init_node": 17,
        "term_node": 19,
        "time": 53
    },
    {
        "init_node": 18,
        "term_node": 7,
        "time": 54
    },
    {
        "init_node": 18,
        "term_node": 16,
        "time": 55
    },
    {
        "init_node": 18,
        "term_node": 20,
        "time": 56
    },
    {
        "init_node": 19,
        "term_node": 15,
        "time": 57
    },
    {
        "init_node": 19,
        "term_node": 17,
        "time": 58
    },
    {
        "init_node": 19,
        "term_node": 20,
        "time": 59
    },
    {
        "init_node": 20,
        "term_node": 18,
        "time": 60
    },
    {
        "init_node": 20,
        "term_node": 19,
        "time": 61
    },
    {
        "init_node": 20,
        "term_node": 21,
        "time": 62
    },
    {
        "init_node": 20,
        "term_node": 22,
        "time": 63
    },
    {
        "init_node": 21,
        "term_node": 20,
        "time": 64
    },
    {
        "init_node": 21,
        "term_node": 22,
        "time": 65
    },
    {
        "init_node": 21,
        "term_node": 24,
        "time": 66
    },
    {
        "init_node": 22,
        "term_node": 15,
        "time": 67
    },
    {
        "init_node": 22,
        "term_node": 20,
        "time": 68
    },
    {
        "init_node": 22,
        "term_node": 21,
        "time": 69
    },
    {
        "init_node": 22,
        "term_node": 23,
        "time": 70
    },
    {
        "init_node": 23,
        "term_node": 14,
        "time": 71
    },
    {
        "init_node": 23,
        "term_node": 22,
        "time": 72
    },
    {
        "init_node": 23,
        "term_node": 24,
        "time": 73
    },
    {
        "init_node": 24,
        "term_node": 13,
        "time": 74
    },
    {
        "init_node": 24,
        "term_node": 21,
        "time": 75
    },
    {
        "init_node": 24,
        "term_node": 23,
        "time": 76
    }
]`,d$=`export interface Edge<T> {
    from: T;
    to: T;
    weight: number;
}

export function FloydWarshall<T>(nodes: Array<T>, edges: Array<Edge<T>>): Array<Array<number>> {
    const n = nodes.length;
    const dist: Array<Array<number>> = new Array(n);
    const nodeIndex: Map<T, number> = new Map();

    for (let i = 0; i < n; i++) {
        nodeIndex.set(nodes[i], i);
        dist[i] = new Array(n).fill(Infinity);
        dist[i][i] = 0;
    }

    for (const edge of edges) {
        const u = nodeIndex.get(edge.from);
        const v = nodeIndex.get(edge.to);
        if (u !== undefined && v !== undefined) {
            dist[u][v] = edge.weight;
        }
    }

    for (let k = 0; k < n; k++) {
        for (let i = 0; i < n; i++) {
            for (let j = 0; j < n; j++) {
                if (dist[i][j] > dist[i][k] + dist[k][j]) {
                    dist[i][j] = dist[i][k] + dist[k][j];
                }
            }
        }
    }

    return dist;
}`;var h$=wt('<div class=" flex flex-row items-center gap-4 flex-wrap"><div><table class="table table-md w-full mt-4 border-2 border-base-content/5"><thead><tr><th class="text-center font-bold text-lg text-primary" colspan="2">Summary</th></tr></thead><tbody><tr><td class="font-bold w-32">Number of Nodes</td><td class="text-center w-80"> </td></tr><tr><td class="font-bold">Number of Edges</td><td class="text-center"> </td></tr><tr><td class="font-bold">Starting Node</td><td class="text-center"><label class="input w-24"><input type="number" placeholder="Start Node" class="text-center" min="1"/></label></td></tr><tr><td class="font-bold">NN Route</td><td class="text-center"> </td></tr><tr><td class="font-bold">Total NN Distance</td><td class="text-center"> </td></tr><tr><td class="font-bold">NI Route</td><td class="text-center"> </td></tr><tr><td class="font-bold">Total NI Distance</td><td class="text-center"> </td></tr></tbody></table> <table class="table table-md w-full mt-4 border-2 border-base-content/5"><tbody><tr><td class="font-bold">Optimal z*</td><td colspan="4" class="text-center"><input class="input text-center" type="number"/></td><td class="font-bold">Theoretically Bounded</td></tr><tr><td class="font-bold">Z<sup>NN</sup>/z*</td><td class="text-center"> </td><td> </td><td class="font-bold">0.5([log<sub>2</sub> n] +1)</td><td class="text-center"> </td><td class="text-center"> </td></tr><tr><td class="font-bold">Z<sup>NI</sup>/z*</td><td class="text-center"> </td><td> </td><td class="font-bold">2</td><td class="text-center">2</td><td class="text-center"> </td></tr></tbody></table></div> <div><!></div></div>'),p$=wt("<th> </th>"),m$=wt("<td> </td>"),b$=wt("<tr><th> </th><!></tr>"),g$=wt('<div class="flex justify-center"><table class="table w-80 border-2 border-base-content/5"><thead><tr><th>Node A</th><th>Node B</th><th>Shortest Path Distance</th></tr></thead><tbody><tr><td><input type="number" class="input input-bordered w-24"/></td><td><input type="number" class="input input-bordered w-24"/></td><td class="text-center"> </td></tr></tbody></table></div> <div class="overflow-x-auto py-4"><table class="table w-full border-2 border-base-content/5"><thead><tr><th>From - To</th><!></tr></thead><tbody></tbody></table></div>',1),_$=wt('<div class="flex justify-center"><table class="table table-md w-full mt-4 border-2 border-base-content/5"><thead><tr><th class="text-center font-bold text-lg text-primary" colspan="2">Summary</th></tr></thead><tbody><tr><td class="font-bold">Starting Node</td><td class="text-center"><label class="input w-24"><input type="number" placeholder="Start Node" class="text-center" min="1"/></label></td></tr><tr><td class="font-bold">Total Distance</td><td class="text-center"> </td></tr><tr><td class="font-bold">Tour</td><td class="text-center"> </td></tr></tbody></table></div> <div class="flex justify-center"><!></div>',1),v$=wt('<div class="flex justify-center"><table class="table table-md w-full mt-4 border-2 border-base-content/5"><thead><tr><th class="text-center font-bold text-lg text-primary" colspan="2">Summary</th></tr></thead><tbody><tr><td class="font-bold">Starting Node</td><td class="text-center"><label class="input w-24"><input type="number" placeholder="Start Node" class="text-center" min="1"/></label></td></tr><tr><td class="font-bold">Total Distance</td><td class="text-center"> </td></tr><tr><td class="font-bold">Tour</td><td class="text-center"> </td></tr></tbody></table></div> <div class="flex justify-center"><!></div>',1),y$=wt('<div class="flex justify-center pb-4"><div role="tablist" class="tabs tabs-border"><button role="tab">Summary</button> <button role="tab">Nearest Neighbor</button> <button role="tab">Nearest Insertion</button> <button role="tab">Floyd Warshall Distance Matrix</button> <button role="tab">Code</button></div></div> <!>',1);function x$(t,e){Wi(e,!0);let n=[{filename:"floydwarshall.ts",code:d$},{filename:"q2.ts",code:u$},{filename:"q2arcs.json",code:l$},{filename:"q2nodes.json",code:f$}],r=$t(Te([])),i=$t(Te([]));at(r,l_,!0),at(i,f_.map(E=>({node:E.node,x:E.x/1e4,y:E.y/1e4})),!0);const o=(E,W,Z,B,P)=>{let z=Z-E,U=B-W,tt=0,I=0;z==0&&(U>0?tt=-.5:tt=.5),U==0&&(z>0?I=-.5:I=.5),z*U>0?tt=U/Math.abs(U)*.5:z*U<0&&(I=z/Math.abs(z)*.5);const K=Math.sqrt(z*z+U*U);if(K===0)return{x1:E,y1:W,x2:Z,y2:B,ox:tt,oy:I};z/=K,U/=K;const L={x:(E+Z)/2,y:(W+B)/2};return{x1:L.x-z*(K-P)/2+tt,y1:L.y-U*(K-P)/2-I,x2:L.x+z*(K-P)/2+tt,y2:L.y+U*(K-P)/2-I,ox:tt,oy:I}};function a(){const E=[],W=[],Z=P=>P.init_node<P.term_node;for(let P of g(r)){const z=g(i).find(tt=>tt.node===P.init_node),U=g(i).find(tt=>tt.node===P.term_node);if(z&&U){const tt=Z(P),I=o(z.x,z.y,U.x,U.y,4);W.push(gr([{x:(I.x1+I.x2)/2+2*I.ox,y:(I.y1+I.y2)/2-2*I.oy,label:P.time}],{x:"x",y:"y",text:"label",fill:"black",fontSize:10})),E.push($f([I],{x1:"x1",y1:"y1",x2:"x2",y2:"y2",strokeWidth:2,stroke:tt?"blue":"green"}))}}return Hi({width:600,height:600,marks:[...E,...W,Yo(g(i).map(P=>({x:P.x,y:P.y})),{x:"x",y:"y",fill:"red",r:6}),gr(g(i).map(P=>({x:P.x,y:P.y,label:P.node})),{x:"x",y:"y",text:"label",dy:-12,fill:"black",fontSize:12})],x:{domain:[0,50],ticks:0},y:{domain:[0,55],ticks:0}})}function s(E){const W=[];for(let B=0;B<E.length-1;B++){const P=g(i).find(U=>U.node===E[B]),z=g(i).find(U=>U.node===E[B+1]);if(P&&z){const U=o(P.x,P.y,z.x,z.y,4);W.push($f([U],{x1:"x1",y1:"y1",x2:"x2",y2:"y2",strokeWidth:2,stroke:"red"}))}}return Hi({width:600,height:600,marks:[...W,Yo(g(i).map(B=>({x:B.x,y:B.y})),{x:"x",y:"y",fill:"red",r:6}),gr(g(i).map(B=>({x:B.x,y:B.y,label:B.node})),{x:"x",y:"y",text:"label",dy:-12,fill:"black",fontSize:12})],x:{domain:[0,50],ticks:0},y:{domain:[0,55],ticks:0}})}let c=At(()=>g(r).map(E=>({from:E.init_node,to:E.term_node,weight:E.time}))),u=At(()=>g(i).map(E=>E.node)),f=At(()=>m_(g(u),g(c))),d=$t(1),l=At(()=>d_(g(d),g(f))),h=At(()=>h_(g(d),g(f))),p=$t(1),m=$t(1),b=$t(685),v=At(()=>te(g(l),g(f))/g(b)),x=At(()=>te(g(h),g(f))/g(b)),S=At(()=>.5*(Math.ceil(Math.log2(g(i).length))+1)),y=At(()=>2),A=At(()=>g(v)<g(S)),M=At(()=>g(x)<g(y)),$=$t(0);var N=y$(),D=Nt(N),R=_(D),T=_(R);T.__click=()=>{at($,0)};var O=w(T,2);O.__click=()=>{at($,2)};var G=w(O,2);G.__click=()=>{at($,3)};var q=w(G,2);q.__click=()=>{at($,1)};var k=w(q,2);k.__click=()=>{at($,4)};var Y=w(D,2);{var rt=E=>{var W=h$(),Z=_(W),B=_(Z),P=w(_(B)),z=_(P),U=w(_(z)),tt=_(U),I=w(z),K=w(_(I)),L=_(K),F=w(I),V=w(_(F)),C=_(V),X=_(C),H=w(F),et=w(_(H)),nt=_(et),J=w(H),st=w(_(J)),ut=_(st),pt=w(J),_t=w(_(pt)),ct=_(_t),bt=w(pt),vt=w(_(bt)),mt=_(vt),Mt=w(B,2),xt=_(Mt),Lt=_(xt),kt=w(_(Lt)),Ct=_(kt),St=w(Lt),Ut=w(_(St)),Bt=_(Ut),Zt=w(Ut),zt=_(Zt),Xt=w(Zt,2),ie=_(Xt),oe=w(Xt),Tt=_(oe),Me=w(St),_e=w(_(Me)),ve=_(_e),$e=w(_e),ze=_($e),nn=w($e,3),En=_(nn),pn=w(Z,2),Ln=_(pn);fe(Ln,()=>a().outerHTML),Ft((Le,rr,Nr,fi,to,eo,no,ro,kr)=>{j(tt,Le),j(L,rr),yi(X,"max",g(i).length),j(nt,Nr),j(ut,fi),j(ct,to),j(mt,eo),j(Bt,no),j(zt,g(A)?"<":">"),j(ie,ro),j(Tt,g(A)?"Yes":"No"),j(ve,kr),j(ze,g(M)?"<":">"),j(En,g(M)?"Yes":"No")},[()=>g(i).length.toLocaleString("en",{useGrouping:!0}),()=>g(r).length.toLocaleString("en",{useGrouping:!0}),()=>g(l).join("-"),()=>te(g(l),g(f)).toLocaleString("en",{useGrouping:!0}),()=>g(h).join("-"),()=>te(g(h),g(f)).toLocaleString("en",{useGrouping:!0}),()=>(te(g(l),g(f))/g(b)).toLocaleString("en",{useGrouping:!0}),()=>(.5*(Math.ceil(Math.log2(g(i).length))+1)).toLocaleString("en",{useGrouping:!0}),()=>(te(g(h),g(f))/g(b)).toLocaleString("en",{useGrouping:!0})]),Ht(X,()=>g(d),Le=>at(d,Le)),Ht(Ct,()=>g(b),Le=>at(b,Le)),ot(E,W)},Q=E=>{var W=Wt(),Z=Nt(W);{var B=z=>{var U=g$(),tt=Nt(U),I=_(tt),K=w(_(I)),L=_(K),F=_(L),V=_(F),C=w(F),X=_(C),H=w(C),et=_(H),nt=w(tt,2),J=_(nt),st=_(J),ut=_(st),pt=w(_(ut));Ne(pt,17,()=>g(u),Ce,(ct,bt)=>{var vt=p$(),mt=_(vt);Ft(()=>j(mt,g(bt))),ot(ct,vt)});var _t=w(st);Ne(_t,21,()=>g(f),Ce,(ct,bt,vt)=>{var mt=b$(),Mt=_(mt),xt=_(Mt),Lt=w(Mt);Ne(Lt,17,()=>g(bt),Ce,(kt,Ct)=>{var St=m$(),Ut=_(St);Ft(()=>j(Ut,g(Ct))),ot(kt,St)}),Ft(()=>j(xt,g(u)[vt])),ot(ct,mt)}),Ft(ct=>j(et,ct),[()=>g(f)[g(u).indexOf(g(p))][g(u).indexOf(g(m))].toLocaleString("en",{useGrouping:!0})]),Ht(V,()=>g(p),ct=>at(p,ct)),Ht(X,()=>g(m),ct=>at(m,ct)),ot(z,U)},P=z=>{var U=Wt(),tt=Nt(U);{var I=L=>{var F=_$(),V=Nt(F),C=_(V),X=w(_(C)),H=_(X),et=w(_(H)),nt=_(et),J=_(nt),st=w(H),ut=w(_(st)),pt=_(ut),_t=w(st),ct=w(_(_t)),bt=_(ct),vt=w(V,2),mt=_(vt);fe(mt,()=>s(g(l)).outerHTML),Ft((Mt,xt)=>{yi(J,"max",g(i).length),j(pt,Mt),j(bt,xt)},[()=>te(g(l),g(f)).toLocaleString("en",{useGrouping:!0}),()=>g(l).join("-")]),Ht(J,()=>g(d),Mt=>at(d,Mt)),ot(L,F)},K=L=>{var F=Wt(),V=Nt(F);{var C=H=>{var et=v$(),nt=Nt(et),J=_(nt),st=w(_(J)),ut=_(st),pt=w(_(ut)),_t=_(pt),ct=_(_t),bt=w(ut),vt=w(_(bt)),mt=_(vt),Mt=w(bt),xt=w(_(Mt)),Lt=_(xt),kt=w(nt,2),Ct=_(kt);fe(Ct,()=>s(g(h)).outerHTML),Ft((St,Ut)=>{yi(ct,"max",g(i).length),j(mt,St),j(Lt,Ut)},[()=>te(g(h),g(f)).toLocaleString("en",{useGrouping:!0}),()=>g(h).join("-")]),Ht(ct,()=>g(d),St=>at(d,St)),ot(H,et)},X=H=>{var et=Wt(),nt=Nt(et);{var J=st=>{Tc(st,{get data(){return n}})};Pt(nt,st=>{g($)==4&&st(J)},!0)}ot(H,et)};Pt(V,H=>{g($)==3?H(C):H(X,!1)},!0)}ot(L,F)};Pt(tt,L=>{g($)==2?L(I):L(K,!1)},!0)}ot(z,U)};Pt(Z,z=>{g($)==1?z(B):z(P,!1)},!0)}ot(E,W)};Pt(Y,E=>{g($)==0?E(rt):E(Q,!1)})}Ft(()=>{It(T,1,`tab ${g($)==0?"tab-active":""}`),It(O,1,`tab ${g($)==2?"tab-active":""}`),It(G,1,`tab ${g($)==3?"tab-active":""}`),It(q,1,`tab ${g($)==1?"tab-active":""}`),It(k,1,`tab ${g($)==4?"tab-active":""}`)}),ot(t,N),Gi()}Vi(["click"]);function w$(t){return t.feasible?`Merged nodes ${t.i} and ${t.j} successfully. ${t.reason}`:`Could not merge nodes ${t.i} and ${t.j}. Reason: ${t.reason}`}class M${Q;RouteNodeLimit;Coordinates;Demand;DistanceMatrix;Routes=[];savingList=[];MergeAttempts=[];constructor(e,n,r,i){this.Q=e,this.RouteNodeLimit=n,this.Coordinates=r,this.Demand=i,this.DistanceMatrix=this.matrixDistance(),this.initializeClarkeWrightRoutes(),this.savingList=this.calculateSavings()}routeNodeCount(e){return e.length-1}routeDemand(e){let n=0;for(const r of e)n+=this.Demand[r];return n}calculateDistance(e){let n=0;for(let r=0;r<e.length-1;r++)n+=this.DistanceMatrix[e[r]][e[r+1]];return n}calculateRouteDemand(e){let n=0;for(const r of e)n+=this.Demand[r];return n}calculateTotalDistance(){let e=0;for(const n of this.Routes)for(let r=0;r<n.length-1;r++)e+=this.DistanceMatrix[n[r]][n[r+1]];return e}findRouteContainingNode(e){for(let n=0;n<this.Routes.length;n++)if(this.Routes[n].includes(e))return n;return null}merge(){for(const e of this.savingList){const n=this.findRouteContainingNode(e.i),r=this.findRouteContainingNode(e.j);if(n===null||r===null){console.log("This should never happen!! => Merge: route not found for nodes ",e.i,e.j);continue}else if(n===r)this.MergeAttempts.push({i:e.i,j:e.j,saving:e.saving,feasible:!1,routeI:this.Routes[n],routeJ:this.Routes[r],reason:"Same route"});else{const i=this.routeNodeCount(this.Routes[n]),o=this.routeNodeCount(this.Routes[r]),a=i+o-1;if(a>this.RouteNodeLimit)this.MergeAttempts.push({i:e.i,j:e.j,saving:e.saving,routeI:this.Routes[n],routeJ:this.Routes[r],feasible:!1,reason:"Node limit exceeded"});else{const s=this.routeDemand(this.Routes[n]),c=this.routeDemand(this.Routes[r]),u=s+c;if(u>this.Q)this.MergeAttempts.push({i:e.i,j:e.j,saving:e.saving,routeI:this.Routes[n],routeJ:this.Routes[r],feasible:!1,reason:"Capacity exceeded"});else{const f=this.Routes[n].slice(0,-1).concat(this.Routes[r].slice(1));this.MergeAttempts.push({i:e.i,j:e.j,saving:e.saving,routeI:this.Routes[n],routeJ:this.Routes[r],feasible:!0,reason:"Total demand: "+u+", Total nodes: "+a}),this.Routes.splice(Math.max(n,r),1),this.Routes.splice(Math.min(n,r),1),this.Routes.push(f)}}}}}optimizeRoutes(){for(let e of this.Routes);}initializeClarkeWrightRoutes(){const e=this.Coordinates.length;for(let n=1;n<e;n++)this.Routes.push([0,n,0])}calculateSavings(){const e=[],n=this.Coordinates.length;for(let r=1;r<n;r++)for(let i=r+1;i<n;i++){const o=this.DistanceMatrix[0][r]+this.DistanceMatrix[0][i]-this.DistanceMatrix[r][i];e.push({i:r,j:i,saving:o})}return e.sort((r,i)=>i.saving-r.saving),e}euclideanDistance(e,n){return Math.sqrt((e[0]-n[0])**2+(e[1]-n[1])**2)}matrixDistance(){const e=this.Coordinates.length;let n=[];for(let r=0;r<e;r++){n.push([]);for(let i=0;i<e;i++)n[r].push(this.euclideanDistance(this.Coordinates[r],this.Coordinates[i]))}return n}}const $$=`import { NearestNeighbor } from "./q2";

export interface Savings {
    i: number;
    j: number;
    saving: number
}

export interface MergeAttempt {
    i: number;
    j: number;
    saving?: number;
    routeI?: Array<number>;
    routeJ?: Array<number>;
    feasible: boolean;
    reason?: string;
}

export function ExplainMergeAttempt(attempt: MergeAttempt): string {
    if (attempt.feasible) {
        return \`Merged nodes \${attempt.i} and \${attempt.j} successfully. \${attempt.reason}\`;
    } else {
        return \`Could not merge nodes \${attempt.i} and \${attempt.j}. Reason: \${attempt.reason}\`;
    }
}




export class VRP {
    Q: number // Truck capacity
    RouteNodeLimit: number // Max number of nodes in a route including depot
    Coordinates: Array<[number, number]> // Coordinates of points
    Demand: Array<number> // Demand at each point
    DistanceMatrix: Array<Array<number>> // Distance matrix between points
    Routes: Array<Array<number>> = [] // Routes
    savingList: Array<Savings> = [] // Savings list

    MergeAttempts: Array<MergeAttempt> = []

    constructor(
        Q: number,
        RouteNodeLimit: number,
        Coordinates: Array<[number, number]>,
        Demand: Array<number>
    ) {
        this.Q = Q
        this.RouteNodeLimit = RouteNodeLimit
        this.Coordinates = Coordinates
        this.Demand = Demand
        this.DistanceMatrix = this.matrixDistance()
        this.initializeClarkeWrightRoutes()
        this.savingList = this.calculateSavings()
    }

    routeNodeCount(route: Array<number>): number {
        return route.length - 1
    }

    routeDemand(route: Array<number>): number {
        let totalDemand = 0
        for (const node of route) {
            totalDemand += this.Demand[node]
        }
        return totalDemand
    }

    calculateDistance(route: Array<number>): number {
        let distance = 0
        for (let i = 0; i < route.length - 1; i++) {
            distance += this.DistanceMatrix[route[i]][route[i + 1]]
        }
        return distance
    }

    calculateRouteDemand(route: Array<number>): number {
        let totalDemand = 0
        for (const node of route) {
            totalDemand += this.Demand[node]
        }
        return totalDemand
    }

    calculateTotalDistance(): number {
        let totalDistance = 0
        for (const route of this.Routes) {
            for (let i = 0; i < route.length - 1; i++) {
                totalDistance +=
                    this.DistanceMatrix[route[i]][route[i + 1]]
            }
        }
        return totalDistance
    }

    findRouteContainingNode(node: number): number | null {
        for (let r = 0; r < this.Routes.length; r++) {
            if (this.Routes[r].includes(node)) {
                return r
            }
        }
        return null
    }

    merge() {
        for (const saving of this.savingList) {
            const routeI = this.findRouteContainingNode(saving.i)
            const routeJ = this.findRouteContainingNode(saving.j)
            if (routeI === null || routeJ === null) {
                console.log("This should never happen!! => Merge: route not found for nodes ", saving.i, saving.j)
                continue
            }
            else if (routeI === routeJ) {
                this.MergeAttempts.push({
                    i: saving.i,
                    j: saving.j,
                    saving: saving.saving,
                    feasible: false,
                    routeI: this.Routes[routeI],
                    routeJ: this.Routes[routeJ],
                    reason: "Same route"
                })
            } else {
                const routeINodeCount = this.routeNodeCount(this.Routes[routeI])
                const routeJNodeCount = this.routeNodeCount(this.Routes[routeJ])
                const totalNodeCount = routeINodeCount + routeJNodeCount - 1
                if (totalNodeCount > this.RouteNodeLimit) {
                    this.MergeAttempts.push({
                        i: saving.i,
                        j: saving.j,
                        saving: saving.saving,
                        routeI: this.Routes[routeI],
                        routeJ: this.Routes[routeJ],
                        feasible: false,
                        reason: "Node limit exceeded"
                    })
                } else {
                    const routeIDemand = this.routeDemand(this.Routes[routeI])
                    const routeJDemand = this.routeDemand(this.Routes[routeJ])
                    const totalDemand = routeIDemand + routeJDemand
                    if (totalDemand > this.Q) {
                        this.MergeAttempts.push({
                            i: saving.i,
                            j: saving.j,
                            saving: saving.saving,
                            routeI: this.Routes[routeI],
                            routeJ: this.Routes[routeJ],
                            feasible: false,
                            reason: "Capacity exceeded"
                        })
                    } else {
                        const newRoute = this.Routes[routeI].slice(0, -1).concat(this.Routes[routeJ].slice(1))
                        this.MergeAttempts.push({
                            i: saving.i,
                            j: saving.j,
                            saving: saving.saving,
                            routeI: this.Routes[routeI],
                            routeJ: this.Routes[routeJ],
                            feasible: true,
                            reason: "Total demand: " + totalDemand + ", Total nodes: " + totalNodeCount
                        })
                        this.Routes.splice(Math.max(routeI, routeJ), 1)
                        this.Routes.splice(Math.min(routeI, routeJ), 1)
                        this.Routes.push(newRoute)

                    }
                }
            }
        }
    }

    optimizeRoutes() {
        for (let route of this.Routes) {
            //route = NearestNeighbor(route.map(i => this.Coordinates[i]), 0)
        }
    }

    initializeClarkeWrightRoutes() {
        const n = this.Coordinates.length
        for (let i = 1; i < n; i++) {
            this.Routes.push([0, i, 0])
        }
    }

    calculateSavings(): Array<Savings> {
        const savings: Array<Savings> = []
        const n = this.Coordinates.length
        for (let i = 1; i < n; i++) {
            for (let j = i + 1; j < n; j++) {
                const saving =
                    this.DistanceMatrix[0][i] +
                    this.DistanceMatrix[0][j] -
                    this.DistanceMatrix[i][j]
                savings.push({ i, j, saving })
            }
        }
        savings.sort((a, b) => b.saving - a.saving)
        return savings
    }

    euclideanDistance(v1: [number, number], v2: [number, number]): number {
        return Math.sqrt((v1[0] - v2[0]) ** 2 + (v1[1] - v2[1]) ** 2)
    }

    matrixDistance(): Array<Array<number>> {
        const n = this.Coordinates.length
        let matrix: Array<Array<number>> = []
        for (let i = 0; i < n; i++) {
            matrix.push([])
            for (let j = 0; j < n; j++) {
                matrix[i].push(this.euclideanDistance(this.Coordinates[i], this.Coordinates[j]))
            }
        }
        return matrix
    }

}`;var S$=wt('<tr><td class="text-center"></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-center"> </td></tr>'),T$=wt('<div class=" grid grid-cols-2"><div class="w-full col-span-2 my-4"><div class="flex justify-center"><!></div></div> <div class="mx-4 py-4"><table class="table border-base-content/5 border-2"><thead><tr><th class="text-center font-bold text-lg text-primary" colspan="2">Summary</th></tr><tr><th class="text-left">Parameter</th><th class=" text-center">Value</th></tr></thead><tbody><tr><td class="font-bold">Total demand</td><td class="text-center"> </td></tr><tr><td class="font-bold">Truck Capacity</td><td class="text-center">300</td></tr><tr><td class="font-bold">Max nodes per route</td><td class="text-center">6</td></tr><tr><td class="font-bold">Depot Location</td><td class="text-center"> </td></tr><tr><td class="font-bold">Number of Routes</td><td class="text-center"> </td></tr></tbody></table></div> <div class="mx-4 py-4"><table class="table border-base-content/5 border-2"><thead><tr><th class="text-center font-bold text-lg text-primary" colspan="4">Routes</th></tr><tr><th class="w-10 text-center">Route #</th><th class="text-center">Nodes</th><th class="w-20 text-center">Demand</th><th class="w-20 text-center">Cost</th></tr></thead><tbody><!><tr><td>Total</td><td></td><td class="text-center"> </td><td class="text-center"> </td></tr></tbody></table></div></div>'),A$=wt('<tr><td class="text-center"><label class="input w-28 border-0"><b></b> <input type="number"/></label></td><td><label class="input w-28 border-0"><b></b> <input type="number"/></label></td><td><label class="input w-28 border-0"><b></b> <input type="number"/></label></td><td class="text-center"><button class="btn btn-square btn-sm btn-error">X</button></td></tr>'),C$=wt('<div class="flex justify-center"><!></div> <div class="flex justify-center"><table class="table table-xs border-base-content/5 border-2 my-4 w-fit"><thead><tr><th colspan="4" class="text-center font-bold text-lg text-primary">Demand and Locations</th></tr><tr><th class="text-center">Demand</th><th class="w-20 text-center">X</th><th class="w-20 text-center">Y</th><th class="w-20 text-center">Action</th></tr></thead><tbody><!><tr><td colspan="4" class="h-8"></td></tr><tr><td class="text-center"><label class="input w-24"><b>d:</b> <input type="number" placeholder="Demand"/></label></td><td><label class="input w-24"><b>x:</b> <input type="number" placeholder="X"/></label></td><td><label class="input w-24"><b>y:</b> <input type="number" placeholder="Y"/></label></td><td class="text-center"><button class="btn btn-sm btn-primary">Add</button></td></tr></tbody></table></div>',1),N$=wt('<tr><td class="font-bold text-center"> </td><td class="font-bold text-center"> </td><td class="text-center"> </td><td class="text-center"> </td><td class="font-bold text-center"> </td><td> </td><td class="text-center"> </td></tr>'),k$=wt('<div class=" flex"><table class="table table-sm border-base-content/5 border-2 my-4 w-fit"><thead><tr><th class="text-center font-bold text-lg text-primary" colspan="7">Merge Attempts</th></tr><tr><th class="w-6 text-center">i</th><th class="w-6 text-center">j</th><th class="text-center">Route i</th><th class="text-center">Route j</th><th class="w-20 text-center">Saving</th><th class="text-center">Feasible</th><th class="text-center w-52">Reason</th></tr></thead><tbody></tbody></table></div>'),D$=wt('<div class="flex justify-center"><div role="tablist" class="tabs tabs-border"><button role="tab">Summary</button> <button role="tab">Demand and Locations</button> <button role="tab">Merge Attempts</button> <button role="tab">Code</button></div></div> <!>',1);function E$(t,e){Wi(e,!0);let n=[{filename:"q4.ts",code:$$}],r=0,i=Te([0,50,100,50,100,50,50,50,50,50,50,100,50,50]),o=Te([[50,50],[70,95],[90,80],[82,63],[75,58],[90,48],[98,52],[90,40],[60,40],[46,37],[30,48],[20,55],[20,70],[30,90]]);function a(R,T,O){i.push(R),o.push([T,O])}function s(R){i.length>1&&(i.splice(R,1),o.splice(R,1))}let c=$t(0),u=$t(0),f=$t(0);function d(){a(g(c),g(u),g(f)),at(c,0),at(u,0),at(f,0)}function l(){return Hi({marks:[Yo(o.map((T,O)=>({x:T[0],y:T[1],r:50})),{x:"x",y:"y",r:"r",fill:"magenta",opacity:.9}),gr(o.map((T,O)=>({x:T[0],y:T[1],label:O.toString()})),{x:"x",y:"y",text:"label",fontSize:14,dy:-12,dx:-5,fill:"currentColor"})],width:600,height:400,x:{label:"X Coordinate"},y:{label:"Y Coordinate"}})}function h(){const R=["blue","green","orange","purple","cyan","magenta","brown","pink"],T=[];let O=0;for(const q of p.Routes){const k=q.map(Y=>o[Y]).map(Y=>({x:Y[0],y:Y[1]}));T.push(UM(k,{x:"x",y:"y",stroke:R[O%R.length],strokeWidth:2})),O++}return Hi({marks:[...T,Yo(o.map((q,k)=>({x:q[0],y:q[1],r:50})),{x:"x",y:"y",r:"r",fill:"red",opacity:.9}),gr(o.map((q,k)=>({x:q[0],y:q[1],label:k.toString()})),{x:"x",y:"y",text:"label",fontSize:14,dy:-12,dx:-5,fill:"currentColor"})],width:600,height:400,x:{label:"X Coordinate"},y:{label:"Y Coordinate"}})}let p=Te(new M$(300,6,o,i));p.merge(),p.MergeAttempts;let m=$t(0);var b=D$(),v=Nt(b),x=_(v),S=_(x);S.__click=()=>{at(m,0)};var y=w(S,2);y.__click=()=>{at(m,1)};var A=w(y,2);A.__click=()=>{at(m,2)};var M=w(A,2);M.__click=()=>{at(m,3)};var $=w(v,2);{var N=R=>{var T=T$(),O=_(T),G=_(O),q=_(G);fe(q,()=>h().outerHTML);var k=w(O,2),Y=_(k),rt=w(_(Y)),Q=_(rt),E=w(_(Q)),W=_(E),Z=w(Q,3),B=w(_(Z)),P=_(B),z=w(Z),U=w(_(z)),tt=_(U),I=w(k,2),K=_(I),L=w(_(K)),F=_(L);Ne(F,17,()=>p.Routes,Ce,(nt,J,st)=>{var ut=S$(),pt=_(ut);pt.textContent=st+1;var _t=w(pt),ct=_(_t),bt=w(_t),vt=_(bt),mt=w(bt),Mt=_(mt);Ft((xt,Lt,kt)=>{j(ct,xt),j(vt,Lt),j(Mt,kt)},[()=>g(J).join("-"),()=>p.calculateRouteDemand(g(J)).toLocaleString("en",{useGrouping:!0,maximumFractionDigits:2}),()=>p.calculateDistance(g(J)).toLocaleString("en",{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2})]),ot(nt,ut)});var V=w(F),C=w(_(V),2),X=_(C),H=w(C),et=_(H);Ft((nt,J,st)=>{j(W,nt),j(P,`Node 0 (${o[r]??""})`),j(tt,p.Routes.length),j(X,J),j(et,st)},[()=>i.reduce((nt,J)=>nt+J,0),()=>i.reduce((nt,J)=>nt+J,0).toLocaleString("en",{useGrouping:!0}),()=>p.calculateTotalDistance().toLocaleString("en",{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2})]),ot(R,T)},D=R=>{var T=Wt(),O=Nt(T);{var G=k=>{var Y=C$(),rt=Nt(Y),Q=_(rt);fe(Q,()=>l().outerHTML);var E=w(rt,2),W=_(E),Z=w(_(W)),B=_(Z);Ne(B,17,()=>i,Ce,(et,nt,J)=>{var st=A$(),ut=_(st),pt=_(ut),_t=_(pt);_t.textContent=`d${J}:`;var ct=w(_t,2);yi(ct,"placeholder",`Demand ${J}`);var bt=w(ut),vt=_(bt),mt=_(vt);mt.textContent=`x${J}:`;var Mt=w(mt,2);yi(Mt,"placeholder",`X${J}`);var xt=w(bt),Lt=_(xt),kt=_(Lt);kt.textContent=`y${J}:`;var Ct=w(kt,2);yi(Ct,"placeholder",`Y${J}`);var St=w(xt),Ut=_(St);Ut.__click=()=>s(J),Ht(ct,()=>i[J],Bt=>i[J]=Bt),Ht(Mt,()=>o[J][0],Bt=>o[J][0]=Bt),Ht(Ct,()=>o[J][1],Bt=>o[J][1]=Bt),ot(et,st)});var P=w(B,2),z=_(P),U=_(z),tt=w(_(U),2),I=w(z),K=_(I),L=w(_(K),2),F=w(I),V=_(F),C=w(_(V),2),X=w(F),H=_(X);H.__click=d,Ht(tt,()=>g(c),et=>at(c,et)),Ht(L,()=>g(u),et=>at(u,et)),Ht(C,()=>g(f),et=>at(f,et)),ot(k,Y)},q=k=>{var Y=Wt(),rt=Nt(Y);{var Q=W=>{var Z=k$(),B=_(Z),P=w(_(B));Ne(P,21,()=>p.MergeAttempts,Ce,(z,U)=>{var tt=N$(),I=_(tt),K=_(I),L=w(I),F=_(L),V=w(L),C=_(V),X=w(V),H=_(X),et=w(X),nt=_(et),J=w(et),st=_(J),ut=w(J),pt=_(ut);Ft((_t,ct,bt,vt)=>{It(tt,1,lo(g(U).feasible?"bg-accent":"")),j(K,g(U).i),j(F,g(U).j),j(C,_t),j(H,ct),j(nt,bt),It(J,1,`${g(U).feasible?"font-bold":""} text-center`),j(st,g(U).feasible?"Yes":"No"),j(pt,vt)},[()=>g(U).routeI?.map(_t=>_t).join("-"),()=>g(U).routeJ?.map(_t=>_t).join("-"),()=>g(U).saving?.toLocaleString("en",{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2}),()=>w$(g(U))]),ot(z,tt)}),ot(W,Z)},E=W=>{var Z=Wt(),B=Nt(Z);{var P=z=>{Tc(z,{get data(){return n}})};Pt(B,z=>{g(m)==3&&z(P)},!0)}ot(W,Z)};Pt(rt,W=>{g(m)==2?W(Q):W(E,!1)},!0)}ot(k,Y)};Pt(O,k=>{g(m)==1?k(G):k(q,!1)},!0)}ot(R,T)};Pt($,R=>{g(m)==0?R(N):R(D,!1)})}Ft(()=>{It(S,1,`tab ${g(m)==0?"tab-active":""}`),It(y,1,`tab ${g(m)==1?"tab-active":""}`),It(A,1,`tab ${g(m)==2?"tab-active":""}`),It(M,1,`tab ${g(m)==3?"tab-active":""}`)}),ot(t,b),Gi()}Vi(["click"]);function L$(t,e,n,r=1e-7){const i=(l,h)=>n(l,h)*n(l,h),o=(l,h)=>{const m=i(l-1e-7,h),b=i(l+1e-7,h),v=i(l,h+1e-7),x=i(l,h-1e-7),S=(b-m)/(2*1e-7),y=(v-x)/(2*1e-7);return[S,y]},a=(l,h,p,m)=>{const[b,v]=o(p,m),[x,S]=o(l,h),y=(b-x)**2+(v-S)**2;return Math.abs(((l-p)*b+(h-m)*v)/y)};let s=Math.sqrt(i(t,e)),c=.05,u=0,f=0,d=0;for(;s>r;){const[l,h]=o(t,e);u=t,f=e,t=t-c*l,e=e-c*h;const p=Math.sqrt(i(t,e));if(p<s)s=p;else{t=u,e=f,c=c/2,d+=1;continue}if(c=a(t,e,u,f),d+=1,d>2500){console.log("GradientDescent2D: Max iterations reached"),console.log("c1: ",t," c2: ",e," obj: ",s);break}}return console.log("Gradient Descent: Iterations: ",d,"c1: ",t,"c2: ",e," Final Objective: ",s," Final Step: ",c),[t,e]}const R$={transportationCostPerUnitDistance:3};function Oe(t){return t<0?(console.log("CummulativeDemand: d out of bounds d: ",t),0):t<500?5*t:t<1e3?2500+(t-500):t<=1500?3e3+5*(t-1e3):(console.log("CummulativeDemand: d out of bounds d: ",t),NaN)}function t0(t,e){return t*e}function js(t){return t<=500?5*t**2/2:t<=1e3?js(500)+t0(t-500,Oe(500))+(t-500)**2/2:t<=1501?js(1e3)+t0(t-1e3,Oe(1e3))+5*(t-1e3)**2/2:1/0}function sr(t,e){return js(e)-js(t)}function ar(t,e,n){const r=R$.transportationCostPerUnitDistance,i=sr(t,n)-Oe(t)*(n-t),o=Oe(e)*(e-n)-sr(n,e);return r*(i+o)}function Ie(t,e,n){const r=[],i=ee(t,e,n,r);let o=0;for(let a=0;a<r.length-1;a++){const s=r[a],c=r[a+1],u=i[a];o+=ar(s,c,u)}return o}function Za(t,e,n,r){const i=r.slice().sort((a,s)=>a-s),o=[];if(n==1){const a=Ie(t,e,1);for(let s=0;s<i.length-1;s++){const c=ar(t,e,i[s]),u=c-a,f=u/a*100;o.push({locations:[i[s]],cost:c,left:t,right:e,delta:u,percentage:f,optimalCost:a})}}else if(n==2){const a=Ie(t,e,2);for(let s=0;s<i.length-1;s++)for(let c=s+1;c<i.length;c++){const u=i[s],f=i[c],d=ee(u,f,1)[0],l=ar(t,d,i[s])+ar(d,e,i[c]),h=l-a,p=h/a*100;o.push({locations:[i[s],i[c]],cost:l,left:u,right:f,delta:h,percentage:p,optimalCost:a})}}else if(n==3){const a=Ie(t,e,3);for(let s=0;s<i.length-2;s++)for(let c=s+1;c<i.length-1;c++)for(let u=c+1;u<i.length;u++){const f=i[s],d=i[c],l=i[u],h=ee(f,d,1)[0],p=ee(d,l,1)[0],m=ar(t,h,i[s])+ar(h,p,i[c])+ar(p,e,i[u]),b=m-a,v=b/a*100;o.push({locations:[i[s],i[c],i[u]],cost:m,left:f,right:l,delta:b,percentage:v,optimalCost:a})}}return o}function ee(t,e,n,r=null){if(n==1){const i=sr(t,e),o=Oe(t)-Oe(e),a=Oe(t)*t-Oe(e)*e;return r&&r.push(t,e),[(i+a)/o]}if(n==2){const i=u=>sr(u,e)/(e-u)-sr(t,u)/(u-t)-Oe(u)+Oe(t);let o=t,a=e,s=(o+a)/2,c=i(s);for(;Math.abs(c)>1e-5;)c<0?a=s:o=s,s=(o+a)/2,c=i(s);return r&&r.push(t,s,e),[ee(t,s,1)[0],ee(s,e,1)[0]]}if(n==3){const i=(c,u)=>sr(t,c)/(c-t)-sr(u,e)/(e-u)-Oe(t)+Oe(u),o=(t+e)/2;let a=ee(t,o,1)[0],s=ee(o,e,1)[0];return[a,s]=L$(a,s,i,1e-7),r&&r.push(t,a,s,e),[ee(t,a,1)[0],ee(a,s,1)[0],ee(s,e,1)[0]]}return[]}function Sf(t,e){const n=Ie(0,1500,t),r=t*e;return n+r}function I$(t,e){let n=1,r=Sf(1,e);for(let i=2;i<=t;i++){const o=Sf(i,e);o<r&&(r=o,n=i)}return{optimalNumLocations:n,minimalCost:r}}function O$(t,e,n){let r=1,i=Sf(1,e),o=[];for(let a=1;a<=t;a++){const s=Za(0,1500,a,n);for(const c of s){const u=c.cost+a*e;u<i&&(i=u,r=a,o=c.locations)}}return{optimalNumLocations:r,minimalCost:i,selectedLocations:o}}function ir(t,e=2){return"["+t.map(n=>n.toLocaleString("en",{useGrouping:!0,minimumFractionDigits:e,maximumFractionDigits:e})).join("  ")+"]"}const F$=`import { GradientDescent2D } from "../foundation/gradientDescent.js";

import { permutations } from "../foundation/permutation";


const Params = {
    transportationCostPerUnitDistance: 3,
}

export function CummulativeDemand(d: number) {
    if (d < 0) {
        console.log("CummulativeDemand: d out of bounds d: ", d);
        return 0;
    } else if (d < 500) {
        return 5 * d;
    } else if (d < 1000) {
        return 2500 + (d - 500)
    } else if (d <= 1500) {
        return 3000 + 5 * (d - 1000);
    } else {
        console.log("CummulativeDemand: d out of bounds d: ", d);
        return NaN;
    }
}

function RectangleArea(width: number, height: number) {
    return width * height;
}

export function IntegralCummulativeDemandZero(b: number): number {
    if (b <= 500) {
        return 5 * (b ** 2) / 2;
    } else if (b <= 1000) {
        return IntegralCummulativeDemandZero(500) + RectangleArea(b - 500, CummulativeDemand(500)) + ((b - 500) ** 2) / 2;
    } else if (b <= 1501) {
        return IntegralCummulativeDemandZero(1000) + RectangleArea(b - 1000, CummulativeDemand(1000)) + (5 * (b - 1000) ** 2) / 2;
    }
    return Infinity;
}

export function IntegralCummulativeDemand(a: number, b: number): number {
    return IntegralCummulativeDemandZero(b) - IntegralCummulativeDemandZero(a);
}

export function AccessCostInterval(a: number, b: number, p: number): number {
    //console.log(\`AccessCostInterval a: \${a}, b: \${b}, p: \${p}\`);
    const base = Params.transportationCostPerUnitDistance
    const leftSide = IntegralCummulativeDemand(a, p) - CummulativeDemand(a) * (p - a)
    const rightSide = CummulativeDemand(b) * (b - p) - IntegralCummulativeDemand(p, b)
    return base * (leftSide + rightSide)
}

export function TotalAccessCost(a: number, b: number, n: number): number {
    const Boundary: Array<number> = [];
    const locations = OptimalLocation(a, b, n, Boundary);
    let totalCost = 0;


    for (let i = 0; i < Boundary.length - 1; i++) {
        const left = Boundary[i];
        const right = Boundary[i + 1];
        const loc = locations[i];
        totalCost += AccessCostInterval(left, right, loc);
    }

    return totalCost;
}

export function TotalAccessCostForLocations(a: number, b: number, n: number, locations: Array<number>) {
    const sortedLocations = locations.slice().sort((x, y) => x - y);

    const Results: Array<{ locations: Array<number>, cost: number, left: number, right: number, delta: number, percentage: number, optimalCost: number }> = [];

    if (n == 1) {
        const optimalCost = TotalAccessCost(a, b, 1);

        for (let i = 0; i < sortedLocations.length - 1; i++) {

            const cost = AccessCostInterval(a, b, sortedLocations[i]);
            const delta = cost - optimalCost;
            const percentage = (delta / optimalCost) * 100;
            Results.push({ locations: [sortedLocations[i]], cost, left: a, right: b, delta, percentage, optimalCost });
        }
    }
    else if (n == 2) {
        const optimalCost = TotalAccessCost(a, b, 2);

        for (let i = 0; i < sortedLocations.length - 1; i++) {
            for (let j = i + 1; j < sortedLocations.length; j++) {
                const left = sortedLocations[i];
                const right = sortedLocations[j];
                const mid = OptimalLocation(left, right, 1)[0];

                const cost = AccessCostInterval(a, mid, sortedLocations[i]) + AccessCostInterval(mid, b, sortedLocations[j]);
                const delta = cost - optimalCost;
                const percentage = (delta / optimalCost) * 100;
                Results.push({ locations: [sortedLocations[i], sortedLocations[j]], cost, left, right, delta, percentage, optimalCost });
            }
        }
    } else if (n == 3) {
        const optimalCost = TotalAccessCost(a, b, 3);
        for (let i = 0; i < sortedLocations.length - 2; i++) {
            for (let j = i + 1; j < sortedLocations.length - 1; j++) {
                for (let k = j + 1; k < sortedLocations.length; k++) {
                    const left = sortedLocations[i];
                    const mid = sortedLocations[j];
                    const right = sortedLocations[k];

                    const optimalMidLeft = OptimalLocation(left, mid, 1)[0];
                    const optimalMidRight = OptimalLocation(mid, right, 1)[0];


                    const cost = AccessCostInterval(a, optimalMidLeft, sortedLocations[i]) +
                        AccessCostInterval(optimalMidLeft, optimalMidRight, sortedLocations[j]) +
                        AccessCostInterval(optimalMidRight, b, sortedLocations[k]);
                    const delta = cost - optimalCost;
                    const percentage = (delta / optimalCost) * 100;
                    Results.push({ locations: [sortedLocations[i], sortedLocations[j], sortedLocations[k]], cost, left, right, delta, percentage, optimalCost });
                }
            }
        }
    }

    return Results;
}

export function OptimalLocation(a: number, b: number, n: number, Boundary: Array<number> | null = null): Array<number> {
    if (n == 1) {
        const inte = IntegralCummulativeDemand(a, b)
        const fba = CummulativeDemand(a) - CummulativeDemand(b)
        const weight = CummulativeDemand(a) * a - CummulativeDemand(b) * b
        if (Boundary) {
            Boundary.push(a, b)
        }
        return [(inte + weight) / fba]
    }

    if (n == 2) {
        const Objective = (c: number): number => {
            return IntegralCummulativeDemand(c, b) / (b - c) - IntegralCummulativeDemand(a, c) / (c - a) - CummulativeDemand(c) + CummulativeDemand(a);
        }
        let left = a
        let right = b
        let mid = (left + right) / 2
        let cval = Objective(mid)
        while (Math.abs(cval) > 1e-5) {
            if (cval < 0) {
                right = mid
            } else {
                left = mid
            }
            mid = (left + right) / 2
            cval = Objective(mid)
        }

        if (Boundary) {
            Boundary.push(a, mid, b)
        }

        return [OptimalLocation(a, mid, 1)[0], OptimalLocation(mid, b, 1)[0]]
    }

    if (n == 3) {
        const F = (c1: number, c2: number): number => {
            return IntegralCummulativeDemand(a, c1) / (c1 - a) - IntegralCummulativeDemand(c2, b) / (b - c2) - CummulativeDemand(a) + CummulativeDemand(c2);
        }

        const mid = (a + b) / 2;

        let c1 = OptimalLocation(a, mid, 1)[0];
        let c2 = OptimalLocation(mid, b, 1)[0];

        [c1, c2] = GradientDescent2D(c1, c2, F, 1e-7);


        if (Boundary) {
            Boundary.push(a, c1, c2, b)
        }
        return [OptimalLocation(a, c1, 1)[0], OptimalLocation(c1, c2, 1)[0], OptimalLocation(c2, b, 1)[0]];
    }
    return []
}

export function RegionalCost(n: number, unitCostPerLocation: number): number {
    const accessCost = TotalAccessCost(0, 1500, n);
    const locationCost = n * unitCostPerLocation;
    return accessCost + locationCost;
}

export function OptimalNumberOfLocations(maxLocations: number, unitCostPerLocation: number): { optimalNumLocations: number, minimalCost: number } {
    let optimalNumLocations = 1;
    let minimalCost = RegionalCost(1, unitCostPerLocation);

    for (let n = 2; n <= maxLocations; n++) {
        const cost = RegionalCost(n, unitCostPerLocation);
        if (cost < minimalCost) {
            minimalCost = cost;
            optimalNumLocations = n;
        }
    }

    return { optimalNumLocations, minimalCost };
}


type LocationResult = { optimalNumLocations: number, minimalCost: number, selectedLocations: Array<number> };

export function OptimalNumberOfLocationsWithLocations(maxLocations: number, unitCostPerLocation: number, locations: Array<number>): LocationResult {
    let optimalNumLocations = 1;
    let minimalCost = RegionalCost(1, unitCostPerLocation);
    let selectedLocations: Array<number> = [];

    for (let n = 1; n <= maxLocations; n++) {
        const results = TotalAccessCostForLocations(0, 1500, n, locations);
        for (const result of results) {
            const cost = result.cost + n * unitCostPerLocation;
            if (cost < minimalCost) {
                minimalCost = cost;
                optimalNumLocations = n;
                selectedLocations = result.locations;
            }
        }
    }

    return { optimalNumLocations, minimalCost, selectedLocations };
}`,P$=`export function GradientDescent2D(c1: number, c2: number, F: (c1: number, c2: number) => number, tol: number = 1e-7): [number, number] {
    const Objective = (c1: number, c2: number): number => F(c1, c2) * F(c1, c2);
    //Numeric gradient
    const Gradient = (c1: number, c2: number): [number, number] => {
        const h = 1e-7;
        const f_xmhy = Objective(c1 - h, c2);
        const f_xhy = Objective(c1 + h, c2);
        const f_xyh = Objective(c1, c2 + h);
        const f_xymh = Objective(c1, c2 - h);
        const dx = (f_xhy - f_xmhy) / (2 * h);
        const dy = (f_xyh - f_xymh) / (2 * h);
        return [dx, dy];
    }
    const Step = (c1: number, c2: number, c1prev: number, c2prev: number): number => {
        const [pdx, pdy] = Gradient(c1prev, c2prev);
        const [dx, dy] = Gradient(c1, c2);
        const norm = (pdx - dx) ** 2 + (pdy - dy) ** 2;
        return Math.abs(((c1 - c1prev) * pdx + (c2 - c2prev) * pdy) / norm);
    }

    let obj = Math.sqrt(Objective(c1, c2));
    let step = 0.05;
    let c1prev = 0;
    let c2prev = 0;

    let ctr = 0;

    while (obj > tol) {
        const [dx, dy] = Gradient(c1, c2);
        c1prev = c1
        c2prev = c2;
        c1 = c1 - step * dx;
        c2 = c2 - step * dy;
        const newObj = Math.sqrt(Objective(c1, c2));

        if (newObj < obj) {
            obj = newObj;
        } else {
            c1 = c1prev;
            c2 = c2prev;
            step = step / 2;
            ctr += 1;
            continue;
        }

        step = Step(c1, c2, c1prev, c2prev);
        ctr += 1;
        if (ctr > 2500) {
            console.log("GradientDescent2D: Max iterations reached");
            console.log("c1: ", c1, " c2: ", c2, " obj: ", obj);
            break;
        }
    }
    console.log("Gradient Descent: Iterations: ", ctr, "c1: ", c1, "c2: ", c2, " Final Objective: ", obj, " Final Step: ", step);
    return [c1, c2];
}`;var j$=wt('<div class="border rounded-box border-base-content/5"><table class="table"><thead><tr><th colspan="3" class="text-center font-bold text-lg text-primary">Calculator</th></tr><tr><th>Function</th><th>Parameters</th><th class="w-60 text-center">Result</th></tr></thead><tbody><tr><td>CummulativeDemand(d)</td><td><label class="input w-80"><b>d:</b> <input type="number" placeholder="d"/></label></td><td class=" text-center"> </td></tr><tr><td>IntegralCummulativeDemand(a, b)</td><td><div class="join w-80"><label class="input join-item"><b>a:</b> <input type="number" placeholder="a"/></label> <label class="input join-item"><b>b:</b> <input type="number" placeholder="b"/></label></div></td><td class="text-center"> </td></tr><tr><td>AccessCostInterval(a,b,p)</td><td><div class="join w-80"><label class="input join-item"><b>a:</b> <input type="number" placeholder="a"/></label> <label class="input join-item"><b>b:</b> <input type="number" placeholder="b"/></label> <label class="input join-item"><b>p:</b> <input type="number" placeholder="b"/></label></div></td><td class="text-center"> </td></tr><tr><td>OptimalLocation(a,b,n)</td><td><div class="join w-80"><label class="input join-item"><b>a:</b> <input type="number" placeholder="a"/></label> <label class="input join-item"><b>b:</b> <input type="number" placeholder="b"/></label> <label class="input join-item"><b>n:</b> <input type="number" placeholder="n"/></label></div></td><td class="text-center"> </td></tr></tbody></table></div>'),q$=wt('<div class=" flex justify-center"><table class="table border-base-content/5"><thead><tr><th># of locations</th><th>Optimal locations</th><th>Total Access Cost</th></tr></thead><tbody><tr><td>1</td><td> </td><td> </td></tr><tr><td>2</td><td> </td><td> </td></tr><tr><td>3</td><td> </td><td> </td></tr></tbody></table></div>'),z$=wt("<tr><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),U$=wt('<div class=" flex justify-center"><table class="table border-base-content/5"><thead><tr><th>Location</th><th>Total Access Cost</th><th>Optimal Access Cost</th><th>Delta</th><th>Percentage</th></tr></thead><tbody></tbody></table></div>'),B$=wt("<tr><td> </td><td> </td><td> </td><td> </td></tr>"),H$=wt('<div class=" flex justify-center"><table class="table border-base-content/5 w-fit border-2 my-2"><thead><tr><th>Parameter</th><th>Value (Optimal Location)</th><th>Value (Location Selection)</th></tr></thead><tbody><tr class="text-center"><td class="font-bold">c<sub>T</sub></td><td colspan="2"><label class="input"><input type="number" placeholder="cT" class="text-center"/></label></td></tr><tr class="text-center"><td class="font-bold">n<sup>*</sup></td><td> </td><td> </td></tr><tr class="text-center"><td class="font-bold">z<sup>*</sup></td><td> </td><td> </td></tr></tbody></table></div> <div class=" flex justify-center"><table class="table border-base-content/5"><thead><tr><th># of Locations</th><th>Optimal Locations</th><th>Total Access Cost</th><th>Total Regional Cost</th></tr></thead><tbody><tr><td>1</td><td> </td><td> </td><td> </td></tr><tr><td>2</td><td> </td><td> </td><td> </td></tr><tr><td>3</td><td> </td><td> </td><td> </td></tr><!></tbody></table></div>',1),Y$=wt('<div class="flex justify-center"><div role="tablist" class="tabs tabs-border"><button role="tab">Summary</button> <button role="tab">Optimal Location</button> <button role="tab">Location Selection</button> <button role="tab">Optimal Number of Locations</button> <button role="tab">Code</button></div></div> <!>',1);function W$(t,e){Wi(e,!0);let n=[{filename:"gradientDescent.ts",code:P$},{filename:"q5.ts",code:F$}],r=$t(0),i=$t(0),o=$t(0),a=$t(0),s=$t(0),c=$t(0),u=$t(0),f=$t(1500),d=$t(3),l=$t(12e4),h=$t(0),p=Te([103,179,258,272,294,321,326,331,343,377,436,455,622,649,670,694,696,707,839,842,872,894,994,1044,1080,1085,1153,1289,1382,1451]),m=At(()=>Za(0,1500,1,p)),b=At(()=>g(m).reduce((Q,E)=>E.cost<Q.cost?E:Q)),v=At(()=>Za(0,1500,2,p)),x=At(()=>g(v).reduce((Q,E)=>E.cost<Q.cost?E:Q)),S=At(()=>Za(0,1500,3,p)),y=At(()=>g(S).reduce((Q,E)=>E.cost<Q.cost?E:Q)),A=At(()=>I$(3,g(l))),M=At(()=>O$(3,g(l),p));var $=Y$(),N=Nt($),D=_(N),R=_(D);R.__click=()=>{at(h,0)};var T=w(R,2);T.__click=()=>{at(h,1)};var O=w(T,2);O.__click=()=>{at(h,2)};var G=w(O,2);G.__click=()=>{at(h,3)};var q=w(G,2);q.__click=()=>{at(h,5)};var k=w(N,2);{var Y=Q=>{var E=j$(),W=_(E),Z=w(_(W)),B=_(Z),P=w(_(B)),z=_(P),U=w(_(z),2),tt=w(P),I=_(tt),K=w(B),L=w(_(K)),F=_(L),V=_(F),C=w(_(V),2),X=w(V,2),H=w(_(X),2),et=w(L),nt=_(et),J=w(K),st=w(_(J)),ut=_(st),pt=_(ut),_t=w(_(pt),2),ct=w(pt,2),bt=w(_(ct),2),vt=w(ct,2),mt=w(_(vt),2),Mt=w(st),xt=_(Mt),Lt=w(J),kt=w(_(Lt)),Ct=_(kt),St=_(Ct),Ut=w(_(St),2),Bt=w(St,2),Zt=w(_(Bt),2),zt=w(Bt,2),Xt=w(_(zt),2),ie=w(kt),oe=_(ie);Ft((Tt,Me,_e,ve)=>{j(I,Tt),j(nt,Me),j(xt,_e),j(oe,ve)},[()=>Oe(g(r)).toLocaleString("en",{useGrouping:!0}),()=>sr(g(i),g(o)).toLocaleString("en",{useGrouping:!0}),()=>ar(g(a),g(s),g(c)).toLocaleString("en",{useGrouping:!0}),()=>ir(ee(g(u),g(f),g(d)))]),Ht(U,()=>g(r),Tt=>at(r,Tt)),Ht(C,()=>g(i),Tt=>at(i,Tt)),Ht(H,()=>g(o),Tt=>at(o,Tt)),Ht(_t,()=>g(a),Tt=>at(a,Tt)),Ht(bt,()=>g(s),Tt=>at(s,Tt)),Ht(mt,()=>g(c),Tt=>at(c,Tt)),Ht(Ut,()=>g(u),Tt=>at(u,Tt)),Ht(Zt,()=>g(f),Tt=>at(f,Tt)),Ht(Xt,()=>g(d),Tt=>at(d,Tt)),ot(Q,E)},rt=Q=>{var E=Wt(),W=Nt(E);{var Z=P=>{var z=q$(),U=_(z),tt=w(_(U)),I=_(tt),K=w(_(I)),L=_(K),F=w(K),V=_(F),C=w(I),X=w(_(C)),H=_(X),et=w(X),nt=_(et),J=w(C),st=w(_(J)),ut=_(st),pt=w(st),_t=_(pt);Ft((ct,bt,vt,mt,Mt,xt)=>{j(L,ct),j(V,bt),j(H,vt),j(nt,mt),j(ut,Mt),j(_t,xt)},[()=>ir(ee(0,1500,1)),()=>Ie(0,1500,1).toLocaleString("en",{useGrouping:!0}),()=>ir(ee(0,1500,2)),()=>Ie(0,1500,2).toLocaleString("en",{useGrouping:!0}),()=>ir(ee(0,1500,3)),()=>Ie(0,1500,3).toLocaleString("en",{useGrouping:!0})]),ot(P,z)},B=P=>{var z=Wt(),U=Nt(z);{var tt=K=>{var L=U$(),F=_(L),V=w(_(F));Ne(V,21,()=>[g(b),g(x),g(y)],Ce,(C,X)=>{var H=z$(),et=_(H),nt=_(et),J=w(et),st=_(J),ut=w(J),pt=_(ut),_t=w(ut),ct=_(_t),bt=w(_t),vt=_(bt);Ft((mt,Mt,xt)=>{j(nt,g(X).locations),j(st,mt),j(pt,Mt),j(ct,g(X).delta),j(vt,`${xt??""}%`)},[()=>g(X).cost.toFixed(2),()=>g(X).optimalCost.toFixed(2),()=>g(X).percentage.toFixed(2)]),ot(C,H)}),ot(K,L)},I=K=>{var L=Wt(),F=Nt(L);{var V=X=>{var H=H$(),et=Nt(H),nt=_(et),J=w(_(nt)),st=_(J),ut=w(_(st)),pt=_(ut),_t=_(pt),ct=w(st),bt=w(_(ct)),vt=_(bt),mt=w(bt),Mt=_(mt),xt=w(ct),Lt=w(_(xt)),kt=_(Lt),Ct=w(Lt),St=_(Ct),Ut=w(et,2),Bt=_(Ut),Zt=w(_(Bt)),zt=_(Zt),Xt=w(_(zt)),ie=_(Xt),oe=w(Xt),Tt=_(oe),Me=w(oe),_e=_(Me),ve=w(zt),$e=w(_(ve)),ze=_($e),nn=w($e),En=_(nn),pn=w(nn),Ln=_(pn),Le=w(ve),rr=w(_(Le)),Nr=_(rr),fi=w(rr),to=_(fi),eo=w(fi),no=_(eo),ro=w(Le);Ne(ro,17,()=>[g(b),g(x),g(y)],Ce,(kr,Dr)=>{var _a=B$(),va=_(_a),Ac=_(va),ya=w(va),Cc=_(ya),xa=w(ya),Nc=_(xa),kc=w(xa),Dc=_(kc);Ft((b_,g_,__)=>{j(Ac,g(Dr).locations.length),j(Cc,b_),j(Nc,g_),j(Dc,__)},[()=>ir(g(Dr).locations),()=>g(Dr).cost.toLocaleString("en",{useGrouping:!0}),()=>(g(Dr).cost+g(Dr).locations.length*g(l)).toLocaleString("en",{useGrouping:!0})]),ot(kr,_a)}),Ft((kr,Dr,_a,va,Ac,ya,Cc,xa,Nc,kc,Dc)=>{j(vt,g(A).optimalNumLocations),j(Mt,`${g(M).optimalNumLocations??""} (${g(M).selectedLocations??""})`),j(kt,kr),j(St,Dr),j(ie,_a),j(Tt,va),j(_e,Ac),j(ze,ya),j(En,Cc),j(Ln,xa),j(Nr,Nc),j(to,kc),j(no,Dc)},[()=>g(A).minimalCost.toLocaleString("en",{useGrouping:!0}),()=>g(M).minimalCost.toLocaleString("en",{useGrouping:!0}),()=>ir(ee(0,1500,1)),()=>Ie(0,1500,1).toLocaleString("en",{useGrouping:!0}),()=>(Ie(0,1500,1)+1*g(l)).toLocaleString("en",{useGrouping:!0}),()=>ir(ee(0,1500,2)),()=>Ie(0,1500,2).toLocaleString("en",{useGrouping:!0}),()=>(Ie(0,1500,2)+2*g(l)).toLocaleString("en",{useGrouping:!0}),()=>ir(ee(0,1500,3)),()=>Ie(0,1500,3).toLocaleString("en",{useGrouping:!0}),()=>(Ie(0,1500,3)+3*g(l)).toLocaleString("en",{useGrouping:!0})]),Ht(_t,()=>g(l),kr=>at(l,kr)),ot(X,H)},C=X=>{var H=Wt(),et=Nt(H);{var nt=J=>{Tc(J,{get data(){return n}})};Pt(et,J=>{g(h)==5&&J(nt)},!0)}ot(X,H)};Pt(F,X=>{g(h)==3?X(V):X(C,!1)},!0)}ot(K,L)};Pt(U,K=>{g(h)==2?K(tt):K(I,!1)},!0)}ot(P,z)};Pt(W,P=>{g(h)==1?P(Z):P(B,!1)},!0)}ot(Q,E)};Pt(k,Q=>{g(h)==0?Q(Y):Q(rt,!1)})}Ft(()=>{It(R,1,`tab ${g(h)==0?"tab-active":""}`),It(T,1,`tab ${g(h)==1?"tab-active":""}`),It(O,1,`tab ${g(h)==2?"tab-active":""}`),It(G,1,`tab ${g(h)==3?"tab-active":""}`),It(q,1,`tab ${g(h)==5?"tab-active":""}`)}),ot(t,$),Gi()}Vi(["click"]);var G$=wt('<button role="tab"></button>'),V$=wt('<div class="flex justify-center"><div role="tablist" class="tabs tabs-lift"></div></div> <div class="grid justify-center"><!></div>',1);function X$(t){let e=$t(1),n=5;function r(d){at(e,d,!0)}var i=V$(),o=Nt(i),a=_(o);Ne(a,21,()=>Array(n),Ce,(d,l,h)=>{var p=G$();p.__click=()=>r(h+1),p.textContent=`Question ${h+1}`,Ft(()=>It(p,1,`tab ${g(e)===h+1?"tab-active bg-secondary":""}`)),ot(d,p)});var s=w(o,2),c=_(s);{var u=d=>{Ev(d)},f=d=>{var l=Wt(),h=Nt(l);{var p=b=>{x$(b,{})},m=b=>{var v=Wt(),x=Nt(v);{var S=A=>{c$(A,{})},y=A=>{var M=Wt(),$=Nt(M);{var N=R=>{E$(R,{})},D=R=>{var T=Wt(),O=Nt(T);{var G=k=>{W$(k,{})},q=k=>{var Y=Wt(),rt=Nt(Y);{var Q=E=>{};Pt(rt,E=>{g(e)===6&&E(Q)},!0)}ot(k,Y)};Pt(O,k=>{g(e)===5?k(G):k(q,!1)},!0)}ot(R,T)};Pt($,R=>{g(e)===4?R(N):R(D,!1)},!0)}ot(A,M)};Pt(x,A=>{g(e)===3?A(S):A(y,!1)},!0)}ot(b,v)};Pt(h,b=>{g(e)===2?b(p):b(m,!1)},!0)}ot(d,l)};Pt(c,d=>{g(e)===1?d(u):d(f,!1)})}ot(t,i)}Vi(["click"]);gv(X$,{target:document.getElementById("app")});
//# sourceMappingURL=index-DAXbnmOa.js.map
